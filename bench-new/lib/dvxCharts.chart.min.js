/*
 * dvxCharts v5.0.1.0 (http://www.dvxcharts.com)
 * Copyright 2021 dvxCharts Inc. All rights reserved.
 *
 * dvxCharts commercial licenses may be obtained at
 * http://www.dvxcharts.com/Pricing
 * If you do not own a commercial license, this file shall be governed by the trial license terms.
 */
if(typeof dvxCharts==="undefined"){var dvxCharts={};}
(function(){"use strict";var class2type={},toString=class2type.toString,hasOwn=class2type.hasOwnProperty,support={};function jFunc(){}
function isArrayLike(obj){var length=!!obj&&"length"in obj&&obj.length,type=jFunc.type(obj);if(type==="function"||jFunc.isWindow(obj)){return false;}
return type==="array"||length===0||typeof length==="number"&&length>0&&(length-1)in obj;}
jFunc.isArray=Array.isArray||function(obj){return jFunc.type(obj)==="array";}
jFunc.extend=function(){var options,name,src,copy,copyIsArray,clone,target=arguments[0]||{},i=1,length=arguments.length,deep=false;if(typeof target==="boolean"){deep=target;target=arguments[i]||{};i++;}
if(typeof target!=="object"&&!jFunc.isFunction(target)){target={};}
if(i===length){target=this;i--;}
for(;i<length;i++){if((options=arguments[i])!=null){for(name in options){src=target[name];copy=options[name];if(target===copy){continue;}
if(deep&&copy&&(jFunc.isPlainObject(copy)||(copyIsArray=jFunc.isArray(copy)))){if(copyIsArray){copyIsArray=false;clone=src&&jFunc.isArray(src)?src:[];}else{clone=src&&jFunc.isPlainObject(src)?src:{};}
target[name]=jFunc.extend(deep,clone,copy);}else if(copy!==undefined){target[name]=copy;}}}}
return target;};jFunc.isFunction=function(obj){return jFunc.type(obj)==="function";};jFunc.isWindow=function(obj){return obj!=null&&obj===obj.window;};jFunc.isNumeric=function(obj){var type=jFunc.type(obj);return(type==="number"||type==="string")&&!isNaN(obj-parseFloat(obj));};jFunc.isPlainObject=function(obj){var key;if(!obj||jFunc.type(obj)!=="object"||obj.nodeType||jFunc.isWindow(obj)){return false;}
try{if(obj.constructor&&!hasOwn.call(obj,"constructor")&&!hasOwn.call(obj.constructor.prototype,"isPrototypeOf")){return false;}}catch(e){return false;}
if(!support.ownFirst){for(key in obj){return hasOwn.call(obj,key);}}
for(key in obj){}
return key===undefined||hasOwn.call(obj,key);};jFunc.isEmptyObject=function(obj){var name;for(name in obj){return false;}
return true;};jFunc.type=function(obj){if(obj==null){return obj+"";}
return typeof obj==="object"||typeof obj==="function"?class2type[toString.call(obj)]||"object":typeof obj;};jFunc.each=function(obj,callback){var length,i=0;if(isArrayLike(obj)){length=obj.length;for(;i<length;i++){if(callback.call(obj[i],i,obj[i])===false){break;}}}else{for(i in obj){if(callback.call(obj[i],i,obj[i])===false){break;}}}
return obj;};jFunc.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(i,name){class2type["[object "+name+"]"]=name.toLowerCase();});jFunc.makeArray=function(arr,results){var ret=results||[],arr=[],push=arr.push;if(arr!=null){if(isArrayLike(Object(arr))){jFunc.merge(ret,typeof arr==="string"?[arr]:arr);}else{push.call(ret,arr);}}
return ret;};jFunc.inArray=function(elem,arr,i){var len;if(arr){len=arr.length;i=i?i<0?Math.max(0,len+i):i:0;for(;i<len;i++){if(i in arr&&arr[i]===elem){return i;}}}
return-1;};jFunc.merge=function(first,second){var len=+second.length,j=0,i=first.length;while(j<len){first[i++]=second[j++];}
if(len!==len){while(second[j]!==undefined){first[i++]=second[j++];}}
first.length=i;return first;};jFunc.guid=1;jFunc.proxy=function(fn,context){var tmp,args,proxy,arr=[],slice=arr.slice,concat=arr.concat;if(typeof context==="string"){tmp=fn[context];context=fn;fn=tmp;}
if(!jFunc.isFunction(fn)){return undefined;}
args=slice.call(arguments,2);proxy=function(){return fn.apply(context||this,args.concat(slice.call(arguments)));};proxy.guid=fn.guid=fn.guid||jFunc.guid++;return proxy;};jFunc.ready=function(fn){if(document.attachEvent?document.readyState==="complete":document.readyState!=="loading"){fn();}else{document.addEventListener('DOMContentLoaded',fn);}};jFunc.ajax=function(config){var request=new XMLHttpRequest(),dataType=config.dataType||'json';request.onload=function(){if(request.status>=200&&request.status<400){var resp=request.responseText;if(dataType.toLowerCase()==='json'){resp=JSON.parse(resp);}
config.success(resp);}
config.complete();};request.onerror=function(){config.complete();};request.open(config.type||'GET',config.url);request.send();};jFunc.hasClass=function(el,className){if(el.classList){return el.classList.contains(className);}
return new RegExp('(^| )'+className+'( |$)','gi').test(el.className);};jFunc.addClass=function(el,className){if(el.classList){var classes=className.split(' ');for(var i=0;i<classes.length;i++){el.classList.add(classes[i]);}}
else{el.className+=' '+className;}};jFunc.removeClass=function(el,className){if(el.classList){var classes=className.split(' ');for(var i=0;i<classes.length;i++){el.classList.remove(classes[i]);}}
else{el.className=el.className.replace(new RegExp('(^|\\b)'+className.split(' ').join('|')+'(\\b|$)','gi'),' ');}};jFunc.css=function(el,ruleName,value){if(value===undefined){return window.getComputedStyle(el)[ruleName];}
el.style[ruleName]=value;};jFunc.offset=function(el){var rect=el.getBoundingClientRect();return{top:rect.top+document.body.scrollTop,left:rect.left+document.body.scrollLeft};};jFunc.outerWidth=function(el,margins){var width=el.offsetWidth;if(margins){var style=window.getComputedStyle(el);width+=parseInt(style.marginLeft)+parseInt(style.marginRight);}
return width;};jFunc.outerHeight=function(el,margins){var height=el.offsetHeight;if(margins){var style=window.getComputedStyle(el);height+=parseInt(style.marginTop)+parseInt(style.marginBottom);}
return height;};jFunc.width=function(el){var width=parseFloat(window.getComputedStyle(el).width);return width;};jFunc.height=function(el){var height=parseFloat(window.getComputedStyle(el).height);return height;};jFunc.trigger=function(el,event,data){var eventName=event,customEvent=event,isString=typeof event==='string';if(!isString){eventName=event.name;}
if(typeof window.CustomEvent==="function"){customEvent=new CustomEvent(eventName,{detail:data});}else{customEvent=document.createEvent('CustomEvent');customEvent.initCustomEvent(eventName,true,true,data);}
el.dispatchEvent(customEvent);if(!isString){event.result=customEvent.result;}};jFunc.show=function(el){el.style.display='block';};jFunc.hide=function(el){el.style.display='none';};jFunc.fadeIn=function(el,speed){el.style.display='block';};jFunc.fadeOut=function(el,speed){el.style.display='none';};jFunc.getRealSize=function(value){var sValue=parseFloat(value)+'';if(sValue===value.toString()){value=sValue+"px";}
return value;};jFunc.cssRules=function(el,rules){var rule,value;for(rule in rules){value=rules[rule]+'';if((['top','left','width','height'].indexOf(rule)>-1)&&value.indexOf('px')<0){value+='px';}
el.style[rule]=value;}};jFunc.animate=function(el,rules,speed){jFunc.cssRules(el,rules);};jFunc.empty=function(el){el.innerHTML='';};jFunc.attr=function(el,att,value){if(value===undefined){return el.getAttribute(att);}
el.setAttribute(att,value);};jFunc.stop=function(){};jFunc.remove=function(el){var parentNode=el.parentNode;if(parentNode){parentNode.removeChild(el);}};jFunc.bind=function(el,eventName,func){el.addEventListener(eventName,func);};jFunc.unbind=function(el,eventName,func){el.removeEventListener(eventName,func);};jFunc.getDateFormatter=function(){return dvxCharts.DateFormatter;};jFunc.getDateFormat=function(){return dvxCharts.DateFormatter.DateFormat;};jFunc.mouseCapture=function(el,params){var sharedData={};el.addEventListener('mousedown',function(e){if(e.target&&e.target.type&&e.target.type.toLowerCase()==="textarea"){return;}
var moveHandler;if(params.move){moveHandler=function(e){params.move.call(el,e);};document.addEventListener('mousemove',moveHandler);}
var upHandler;var unbind=function(){if(params.move){document.removeEventListener("mousemove",moveHandler);}
document.removeEventListener("mouseup",upHandler);};if(params.up){upHandler=function(e){unbind();return params.up.call(el,e,sharedData);};}
else{upHandler=unbind;}
document.addEventListener('mouseup',upHandler);e.preventDefault();return params.down.call(el,e,sharedData);});};function Storyboard(callback){this.callback=callback;this.animations=[];}
Storyboard.prototype={begin:function(){var animaitons=this.animations;if(!animaitons||!animaitons.length){return;}
this.stopped=false;var startTime=new Date();for(var i=0;i<animaitons.length;i++){var animation=animaitons[i];animation.begin(startTime);}
this.animate();},animate:function(){if(this.stopped){return;}
var animaitons=this.animations;var time=new Date();var animating=false;for(var i=0;i<animaitons.length;i++){var animation=animaitons[i];var animate=animation.animate(time);animating=animating||animate;}
if(!animating){return;}
this.callback();requestFrame(jFunc.proxy(this.animate,this));},stop:function(){this.stopped=true;this.clear();},clear:function(){this.animations=[];},addAnimation:function(animation){this.animations.push(animation);}}
var requestFrame=(function(){return(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(fn,element){return window.setTimeout(function(){fn();},25);});})();function Timer(fn){var callback=fn;var active=false;var running=false;function trigger(time){if(active){callback();requestFrame(trigger);running=true;active=false;}
else{running=false;}}
this.kick=function(fn){active=true;if(!running){trigger();}};this.end=function(fn){var cb=callback;if(!fn){return;}
if(!running){fn();}
else{callback=active?function(){cb();fn();}:fn;active=true;}};}
function Animation(settings,object,option,from,to){var defs={enabled:true,delayTime:0,duration:2}
if(!settings){return;}
this.enabled=!(settings.enabled===false);this.delayTime=settings.delayTime||0;this.duration=settings.duration||2;this.from=from;this.to=to;this.object=object;this.option=option;}
Animation.prototype={begin:function(time){this.startTime=jDate.addSeconds(time,this.delayTime);this.endTime=jDate.addSeconds(this.startTime,this.duration);this.timeDiff=this.endTime.getTime()-this.startTime.getTime();this.valueDiff=this.to-this.from;this.object[this.option]=this.from;this.lastIsSet=false;},animate:function(time){if(time>=this.endTime){if(!this.lastIsSet){this.object[this.option]=this.to;this.lastIsSet=true;return true;}
return false;}
if(time>this.startTime){var currTime=time.getTime()-this.startTime.getTime();var curValue=this.from+this.valueDiff*currTime/this.timeDiff;if(curValue===this.to){this.lastIsSet=true;}
this.object[this.option]=curValue;}
return true;}}
function OptionAnimation(settings,object,option,from,to){Animation.call(this,settings,object,option,from,to);}
OptionAnimation.prototype=new Animation();OptionAnimation.constructor=OptionAnimation;OptionAnimation.prototype.begin=function(time){this.startTime=jDate.addSeconds(time,this.delayTime);this.endTime=jDate.addSeconds(this.startTime,this.duration);this.object[this.option]=this.from;this.lastIsSet=false;}
OptionAnimation.prototype.animate=function(time){if(time>=this.endTime){if(!this.lastIsSet){this.object[this.option]=this.to;this.lastIsSet=true;return true;}
return false;}
return true;}
function Tool(view){this.view=view;}
Tool.prototype={canStart:function(e){return false;},start:function(){},keyDown:function(e){},keyUp:function(e){},mouseMove:function(e){},mouseDown:function(e){},mouseUp:function(e){},mouseDblClick:function(e){},touchStart:function(e){},touchMove:function(e){},touchEnd:function(e){},mouseWheel:function(e,delta,deltaX,deltaY){},stop:function(){},stopTool:function(){if(this.view.currentTool===this){this.view.setCurrentTool(null);}}}
function DefaultTool(view){Tool.call(this,view);}
DefaultTool.prototype=new Tool();DefaultTool.constructor=DefaultTool;DefaultTool.prototype.mouseDown=function(e){var tools=this.view.mouseDownTools;for(var i=0;i<tools.length;i++){var tool=tools[i];if(tool.canStart(e)){this.view.setCurrentTool(tool);return;}}};DefaultTool.prototype.mouseMove=function(e){var tools=this.view.mouseMoveTools;for(var i=0;i<tools.length;i++){var tool=tools[i];if(tool.canStart(e)){this.view.setCurrentTool(tool);return;}}
this.view._processMouseMove(e);};DefaultTool.prototype.mouseDblClick=function(e){var tools=this.view.mouseDblClickTools;for(var i=0;i<tools.length;i++){var tool=tools[i];if(tool.canStart(e)){this.view.setCurrentTool(tool);return;}}};DefaultTool.prototype.touchStart=function(e){var tools=this.view.touchStartTools;for(var i=0;i<tools.length;i++){var tool=tools[i];if(tool.canStart(e)){this.view.setCurrentTool(tool);return;}}
this.view._processTouchStart(e);};DefaultTool.prototype.touchMove=function(e){var tools=this.view.touchMoveTools;for(var i=0;i<tools.length;i++){var tool=tools[i];if(tool.canStart(e)){this.view.setCurrentTool(tool);return;}}
this.view._processTouchMove(e);};var getDvxId=(function(){var incrementingId=0;return function(){return "dvx_id_"+incrementingId++;};}());function SvgControl(options){this.dvxId=getDvxId();this.shapes=[];this.mouseDownTools=[];this.mouseMoveTools=[];this.mouseDblClickTools=[];this.touchStartTools=[];this.touchMoveTools=[];this.defaultTool=new DefaultTool(this);this.currentTool=this.defaultTool;this._events={};if(jFunc.isPlainObject(options)){return;}
this.elem=options;this._createElements();}
SvgControl.setShadows=function(shape,opts,chart){if(!chart){return;}
var shadows=chart.options.shadows;shape.shadowColor=!jMath.isNull(opts.shadowColor)?opts.shadowColor:shadows.shadowColor;shape.shadowBlur=!jMath.isNull(opts.shadowBlur)?opts.shadowBlur:shadows.shadowBlur;shape.shadowOffsetX=!jMath.isNull(opts.shadowOffsetX)?opts.shadowOffsetX:shadows.shadowOffsetX;shape.shadowOffsetY=!jMath.isNull(opts.shadowOffsetY)?opts.shadowOffsetY:shadows.shadowOffsetY;};SvgControl.isMouseDevice=!!('onmousedown'in window||'onmousedown'in window.document);SvgControl.isTouchDevice=!!('ontouchstart'in window);SvgControl.isGestureDevice=!!('ongesturestart'in window);SvgControl.isPointerDevice=window.navigator.pointerEnabled||window.navigator.msPointerEnabled;SvgControl.prototype={_createElements:function(elem){var that=this,domElement=elem||this.getDOMElement();if(!domElement){return;}
TextBlock.getMeasuringSvg(domElement);if(SvgControl.isMouseDevice){jFunc.bind(domElement,'mouseenter',function(e){that._mouseEnter(e);});jFunc.bind(domElement,'mouseleave',function(e){that._mouseLeave(e);});jFunc.mouseCapture(domElement,{down:jFunc.proxy(that._mouseDown,this),move:jFunc.proxy(that._mouseMove,this),up:jFunc.proxy(that._mouseUp,this)});jFunc.bind(domElement,'mousemove',function(e){if(!that.isMouseDown){that._mouseMove(e);}});}
jFunc.bind(domElement,'keydown',function(e){that._keyDown(e);});jFunc.bind(domElement,'keyup',function(e){that._keyUp(e);});jFunc.bind(domElement,'click',function(e){that._click(e);});jFunc.bind(domElement,'dblclick',function(e){that._dblClick(e);});jFunc.bind(domElement,'resize',jFunc.proxy(that._resize,that));jFunc.bind(window,'resize',jFunc.proxy(that._resize,that));jFunc.bind(window.document,'keydown',jFunc.proxy(that._keyDown,that));jFunc.bind(domElement,'mousewheel',function(e){that._mouseWheel(e);});jFunc.bind(domElement,'DOMMouseScroll',function(e){that._mouseWheel(e);});if(SvgControl.isTouchDevice){jFunc.bind(domElement,'touchstart',function(e){that._touchStart(e);});jFunc.bind(domElement,'touchmove',function(e){that._touchMove(e);});jFunc.bind(domElement,'touchend',function(e){that._touchEnd(e);});}
else if(SvgControl.isPointerDevice){jFunc.each(['pointerdown','MSPointerDown'],function(){jFunc.bind(domElement,'touchstart',function(e){that._touchStart(e);});});jFunc.each(['pointermove','MSPointerMove'],function(){jFunc.bind(domElement,'touchmove',function(e){that._touchMove(e);});});jFunc.each(['pointerup','pointercancel','MSPointerUp','MSPointerCancel'],function(){jFunc.bind(domElement,'touchend',function(e){that._touchEnd(e);});});}
this.svg=this._createSvg();this.tooltip=this._createTooltip();this.shapeRenderer=new ShapeRenderer(this.svg,this);},_setOptions:function(){this.locOffset=null;var domElement=this.getDOMElement();if(!jFunc.hasClass(domElement,this.pluginClass)){jFunc.addClass(domElement,this.pluginClass);}
if(!jFunc.hasClass(this.tooltip,this.tooltipClass)){jFunc.addClass(this.tooltip,this.tooltipClass);}},_setSizes:function(domElement,defWidth,defHeight){var ops=this.options;if(ops.width){domElement.style.width=jFunc.getRealSize(ops.width);}
else if(!jFunc.width(domElement)){domElement.style.width=ops.defaultWidth||defWidth;}
if(ops.height){domElement.style.height=jFunc.getRealSize(ops.height);}
else if(!jFunc.height(domElement)){domElement.style.height=ops.defaultHeight||defHeight;}},_createSvg:function(){var svg=document.createElementNS("http://www.w3.org/2000/svg",'svg');svg.setAttribute('class',this.pluginClass+'-svg');this.getSvgContainer().appendChild(svg);return svg;},renderShape:function(shape){shape.renderToSvg(this.svg);},_createTooltip:function(){var svgContainer=this.getSvgContainer(),tooltip;svgContainer.insertAdjacentHTML('beforeend','<div style="position:absolute;display:none"></div>');tooltip=svgContainer.lastChild;return tooltip;},_addTrialWatermark:function(shapes){var indexOf=window.location.host.indexOf('www.dvxcharts.com');if(indexOf!==-1){return;}
var textBlock=new TextBlock('www.dvxcharts.com');textBlock.addClass('dvx-chart-trial-watermark');textBlock.chart=this;textBlock.measure();textBlock.x=this._width-textBlock.width-16;textBlock.y=this._height-textBlock.height;shapes.push(textBlock);},_measure:function(){},_arrange:function(){},_keyDown:function(e){this.currentTool.keyDown(e);},_keyUp:function(e){this.currentTool.keyUp(e);},_mouseEnter:function(e){this.isMouseOver=true;},_mouseLeave:function(e){this._clearRenderers();this.locOffset=null;this.isMouseOver=false;},_mouseDown:function(e){this.isMouseDown=true;if(!this._oldShape&&this.mouseInput){this._oldShape=this.hitTest(this.mouseInput.locX,this.mouseInput.locY);}
if(this._oldShape){this._triggerShapeEvent('MouseDown',this._oldShape);}
this.currentTool.mouseDown(e);},_mouseMove:function(e){this._initMouseInput(e);this._processMouseEvents();this.currentTool.mouseMove(e);},_mouseUp:function(e){if(this._oldShape!=null){this._triggerShapeEvent('MouseUp',this._oldShape);}
this.isMouseDown=false;this.currentTool.mouseUp(e);},_mouseWheel:function(e){this.currentTool.mouseWheel(e);},_click:function(e){if(!this._oldShape&&this.mouseInput){this._oldShape=this.hitTest(this.mouseInput.locX,this.mouseInput.locY);}
if(this._oldShape){this._triggerShapeEvent('Click',this._oldShape);}},_dblClick:function(e){if(!this._oldShape&&this.mouseInput){this._oldShape=this.hitTest(this.mouseInput.locX,this.mouseInput.locY);}
if(this._oldShape){this._triggerShapeEvent('DblClick',this._oldShape);}
this.currentTool.mouseDblClick(e);},_touchStart:function(e){this._initTouchInput(e);this.isTouchOver=true;this._processTouchEvents();this.currentTool.touchStart(e);},_touchMove:function(e){this._initTouchInput(e);var touch=this.touchInput[0];this.isTouchOver=this.contains(touch.locX,touch.locY);this._processTouchEvents();this.currentTool.touchMove(e);},_touchEnd:function(e){this._initTouchInput(e);if(this._oldShape!=null){this._triggerShapeEvent('TouchEnd',this._oldShape);this._oldShape=null;}
this.currentTool.touchEnd(e);},_initMouseInput:function(e){this.isMouseOver=true;e=e.originalEvent||e;var x=e.offsetX;var y=e.offsetY;var input={locX:x,locY:y};this.mouseInput=input;},_initTouchInput:function(e){e=e.originalEvent||e;var touches=e.touches,touch,rect=e.target.getBoundingClientRect(),input=[],i,x,y;for(i=0;i<touches.length;i++){touch=touches[i];x=touch.clientX-rect.left;y=touch.clientY-rect.top;input.push({locX:x,locY:y});}
this.touchInput=input;},_resize:function(){var domElement=this.getDOMElement();var w=jFunc.width(domElement);var h=jFunc.height(domElement);if(w===this._width&&h===this._height){return;}
if(this.partialDelayedUpdate){this.partialDelayedUpdate();}
else{this._setOptions(this.options);}},_clearRenderers:function(){if(this._oldTShapes){this._oldTShapes=null;this.triggerEvent('dataHighlighting',null);}
this._oldShape=null;this.hideTooltip();},_processMouseMove:function(e){this._processTooltips(this.mouseInput);},_processMouseEvents:function(){var input=this.mouseInput;if(!input){return;}
var newShape=this.hitTest(input.locX,input.locY);if(this._oldShape!=null&&this._oldShape==newShape){this._triggerShapeEvent('MouseMove',this._oldShape);}
else{if(this._oldShape!=null){this._triggerShapeEvent('MouseLeave',this._oldShape);}
if(newShape!=null){this._triggerShapeEvent('MouseEnter',newShape);}
this._oldShape=newShape;}},_processTouchEvents:function(){var touch=this.touchInput[0];if(!touch){return;}
var newShape=this.hitTest(touch.locX,touch.locY);if(this._oldShape!=null&&this._oldShape==newShape){this._triggerShapeEvent('TouchMove',this._oldShape);}
else{if(this._oldShape!=null){this._triggerShapeEvent('TouchEnd',this._oldShape);}
if(newShape!=null){this._triggerShapeEvent('TouchStart',newShape);}
this._oldShape=newShape;}},_processTooltips:function(input){var hasTooltips=this.hasTooltips;if(!hasTooltips){return;}
var area=this.options.tooltips.snapArea;var newShapes=this._getTooltipShapes(input.locX,input.locY,area,input);var different=true;if(this._oldTShapes==null||!jMath.compareArrays(this._oldTShapes,newShapes)){if(newShapes){different=this._initTooltip(newShapes);this._highlightShapes(newShapes);}
if(newShapes){this._oldTShapes=newShapes;}}
else{different=false;}
if(newShapes&&hasTooltips&&different){this._setTooltipPos(newShapes,input);}},_setTooltipPos:function(shapes,input){var w=jFunc.outerWidth(this.tooltip,true);var h=jFunc.outerHeight(this.tooltip,true);var chW=this._width;var chH=this._height;var pt=shapes[0]._getTooltipPosition(input,w,h,chW,chH);var y=pt.y;var len=shapes.length;var that=this;if(len>1){y=0;jFunc.each(shapes,function(){y+=this._getTooltipPosition(input,w,h,chW,chH).y;});y/=len;}
y=jMath.fitInRange(y,0,chH-h);pt.x=jMath.fitInRange(pt.x,0,chW-w);pt.x=Math.max(0,pt.x);jFunc.animate(this.tooltip,{left:pt.x,top:y},100);},_processTouchStart:function(e){this._processTooltips(this.touchInput[0]);},_processTouchMove:function(e){this._processTooltips(this.touchInput[0]);},_initTooltip:function(shapes){if(!this.hasTooltips||!shapes||!shapes.length){return false;}
var len=shapes.length;var text='';var context;if(len===1){context=shapes[0].context;}
else{context=[];jFunc.each(shapes,function(){context.push(this.context);});}
if(!context){return false;}
var event={name:'tooltipFormat'};this.triggerEvent(event,[context]);if(event.result===false){this.hideTooltip();return false;}
if(event.result){text=event.result;}
else{text=this._getTooltipText(shapes);}
if(!text){return false;}
this.tooltip.innerHTML=text;var tooltips=this.options.tooltips;if(len===1){if(tooltips.borderColor){if(tooltips.borderColor==='auto'){this.tooltip.style.borderColor=shapes[0].getTooltipColor();}
this.tooltip.style.borderColor=tooltips.borderColor;}}
if(tooltips.background){this.tooltip.style.background=tooltips.background;}
this.showTooltip();return true;},_highlightShapes:function(shapes){if(!shapes||!shapes.length){return;}
var op=this.options.tooltips;var newShapes=[];jFunc.each(shapes,function(index,shape){if(shape.isHighlightShape){newShapes.push(shape);}});var context;if(newShapes.length===1){context=newShapes[0].context;context.shape=newShapes[0];}
else{context=[];jFunc.each(newShapes,function(){context.push(this.context);context.shape=this;});}
var event={name:'dataHighlighting'};this.triggerEvent(event,[context]);if(event.result!==false){newShapes.forEach(function(item){item.renderToSvg(this.shapeRenderer.svg);}.bind(this));}},_getClosestShape:function(shapes,area,input){var result=shapes[0];for(var i=1;i<shapes.length;i++){var shape=shapes[i];if(!Shape.compare(result,shape,input,area)){result=shape;}}
return result;},_getTooltip:function(shape){return "Tooltip";},_getTooltipText:function(shapes){var text='';var that=this;jFunc.each(shapes,function(){var itemText=that._getTooltip(this);if(itemText){text+=itemText;}});return text;},_getTooltipShapes:function(x,y,area,input){return this._findClosestShape(this.shapes,x,y,area,input);},_findClosestShape:function(inputShapes,x,y,area,input){var shapes=[],shape,result,sh,i;if(!area){area=0;}
for(i=inputShapes.length-1;i>=0;i--){shape=inputShapes[i];if(!shape.context||shape.isLegendItem||shape.isAxisLabel){continue;}
result=shape.hitTest(input.locX,input.locY,area);if(typeof shape.hitTestNonHV==='function'){result=shape.hitTestNonHV(input.locX,input.locY,area);}
if(result===true){shapes.push(shape);}
else if(result){shapes.push(result);}}
sh=this._getClosestShape(shapes,area,input);if(!sh){return null;}
return[sh];},_triggerShapeEvent:function(name,shape){shape.context.shape=shape;this.triggerEvent('dataPoint'+name,shape.context);},_exportToImage:function(config,defaults){config=config||{};var exportConfig=jFunc.extend({},defaults,config);exportConfig.type=config.type||'image/png';if(config.fileName){exportConfig.fileName=jMath.replaceTextForExport(config.fileName);}
else{switch(exportConfig.type){case 'image/jpeg':exportConfig.fileName='Chart.jpg';break;case 'image/png':default:exportConfig.fileName='Chart.png';break;}}
var json=this.toJSON(exportConfig);this._doRequest(exportConfig.server,json,exportConfig.method);},_exportToPdf:function(config,defaults){config=config||{};var exportConfig=jFunc.extend({},defaults,config);exportConfig.type='application/pdf';exportConfig.fileName=jMath.replaceTextForExport(config.fileName)||'chart.pdf';var json=this.toJSON(exportConfig);this._doRequest(exportConfig.server,json,exportConfig.method);},_toJSON:function(shapes,config){var me=this;var result="{type:'"+config.type+"',fileName:'"+config.fileName+"'";result+=',width:'+me._width+',height:'+me._height+',shapes:[';for(var i=0;i<shapes.length;i++){var shJson=shapes[i].toJSON();if(shJson){result+='{'+shJson+'}';if(i!==shapes.length-1){result+=',';}}}
return result+']}';},_doRequest:function(url,data,method){if(url&&data){var inputs='<input type="hidden" name="canvas" value="'+data+'" />';var formText='<form action="'+url+'" method="'+(method||'post')+'">'+inputs+'</form>';document.body.insertAdjacentHTML('beforeend',formText);var form=document.body.lastChild;form.submit();form.outerHTML='';}},getSvgContainer:function(){return this.svgContainer||this.elem;},getCurrentTool:function(){return this.currentTool;},getDOMElement:function(){return this.elem;},triggerEvent:function(event,data){var domElement=this.getDOMElement();jFunc.trigger(domElement,event,data);if(jFunc.isArray(data)&&data.length===1){data=data[0];}
this.fireEvent(event,data);},setCurrentTool:function(tool){if(this.currentTool===tool){return;}
if(this.currentTool){this.currentTool.stop();}
if(!tool){this.currentTool=this.defaultTool;}
else{this.currentTool=tool;}
if(this.currentTool){this.currentTool.start();}},contains:function(x,y){return x>=0&&x<=this._width&&y>=0&&y<=this._height;},hitTest:function(x,y,area){if(!area){area=0;}
for(var i=this.shapes.length-1;i>=0;i--){var shape=this.shapes[i];if(!shape.context){continue;}
if(shape.hitTest(x,y,area)){return shape;}}},showTooltip:function(){jFunc.show(this.tooltip);},hideTooltip:function(){jFunc.hide(this.tooltip);},stringFormat:function(val,format){if(!format){return String(val);}
return ChartSprintf(format,val);},clear:function(){this._clearRenderers();this.shapeRenderer._clear();},render:function(){},destroy:function(){var domElement=this.getDOMElement(),that=this;domElement.innerHTML='';jFunc.unbind(window,'resize',jFunc.proxy(that._resize,that));jFunc.unbind(window.document,'keydown',jFunc.proxy(that._keyDown,that));if(jFunc.hasClass(domElement,this.pluginClass)){jFunc.removeClass(domElement,this.pluginClass);}},getShapesPerData:function(items){var shapes=[];var chartShapes=this.shapes;jFunc.each(items,function(){var item=this;jFunc.each(chartShapes,function(){if(this.context){var ctxPoints=this.context.points;if(ctxPoints){for(var j=0;j<ctxPoints.length;j++){if(ctxPoints[j].dataItem===item){var newShape=jFunc.extend({},this);newShape.context=ctxPoints[j];newShape.context.series=this.context.series;newShape.context.chart=this.context.chart;var center={x:this.pts[2*j],y:this.pts[2*j+1]};newShape.tooltipOrigin=center;newShape.getCenter=function(){return center;};shapes.push(newShape);break;}}}
else{if(this.context.dataItem===item){shapes.push(this);}}}});});return shapes;},highlightData:function(items){if(!items){this._clearRenderers();return null;}
var shapes=this.getShapesPerData(items);if(!shapes.length){return null;}
this._highlightShapes(shapes);this._initTooltip(shapes);var pt=shapes[0].getCenter();this._setTooltipPos(shapes,{locX:pt.x,locY:pt.y});return shapes;},fireEvent:function(event,data){var eventName=typeof event==='string'?event:event.name,events=this._events,eventListeners=events[eventName],eventListener,length,i;if(!jFunc.isArray(eventListeners)){return this;}
length=eventListeners.length;for(i=0;i<length;i++){eventListener=eventListeners[i];if(jFunc.isFunction(eventListener.listener)){eventListener.listener(event,data);}}
return this;},addEventListener:function(eventName,listener){var events=this._events,eventListeners=events[eventName];if(!jFunc.isArray(eventListeners)){eventListeners=events[eventName]=[];}
eventListeners.push({listener:listener});return this;},removeEventListener:function(eventName,listener){var events=this._events,eventListeners=events[eventName],eventListener,length,i;if(!jFunc.isArray(eventListeners)){return this;}
length=eventListeners.length;for(i=0;i<length;i++){eventListener=eventListeners[i];if(!listener||eventListener.listener===listener){eventListeners.splice(i,1);}}
if(!eventListeners.length){delete eventListeners[eventName];}
return this;},getState:function(){return this._state;},setState:function(state){this._state=state||{};this._setOptions(state);},write:function(element){jFunc.ready(function(){if(typeof element==="string"){element=document.getElementById(element);}
if(!element){return;}
var pClass=this.pluginClass;element.insertAdjacentHTML('beforeend','<div class="'+pClass+'"></div>');this.elem=element.lastChild;this._createElements();this.setState(this.getState());}.bind(this));}};function AxisBase(options){this._initDefs(options);this.setOptions(options);}
AxisBase.prototype={_initDefs:function(){jFunc.extend(this,{maxInter200Px:8,lblMargin:4,crossOffsetX:0,crossOffsetY:0,origin:0,length:300,x:0,y:0});},_calculateActualInterval:function(min,max){if(this.interval){return this.interval;}
var mult=1;if(!this.getOrientation||this.getOrientation()==='x'){mult=0.8;}
var adjMaxInter=mult*this.maxInter200Px;var maxInterCount=Math.max(this.length*adjMaxInter/200.0,1.0);var range=max-min;var bestInterval=range/maxInterCount;var minIdealInter=Math.pow(10,Math.floor(jMath.log10(bestInterval)));var idMults=[10,5,2,1];for(var i=0;i<idMults.length;i++){var idealMultiplier=idMults[i];var curIdealInter=minIdealInter*idealMultiplier;if(maxInterCount<(range/curIdealInter)){break;}
bestInterval=curIdealInter;}
if(this.minimumInterval&&this.minimumInterval>bestInterval){bestInterval=this.minimumInterval;}
return bestInterval;},_setVisibleRanges:function(){this.actualVisibleMinimum=jMath.isNull(this.visibleMinimum)?this.actualMinimum:this.visibleMinimum;this.actualVisibleMaximum=jMath.isNull(this.visibleMaximum)?this.actualMaximum:this.visibleMaximum;if(jFunc.type(this.actualVisibleMinimum)==='date'){this.actualVisibleMinimum=this.actualVisibleMinimum.getTime();}
if(jFunc.type(this.actualVisibleMaximum)==='date'){this.actualVisibleMaximum=this.actualVisibleMaximum.getTime();}
if(this.options){this.options.visibleMinimum=this.visibleMinimum;this.options.visibleMaximum=this.visibleMaximum;}},_setMinMax:function(min,max){if(this.logarithmic){this.actualMinimum=jMath.isNull(this.minimum)?min:jMath.log(this.minimum,this.logBase);this.actualMaximum=jMath.isNull(this.maximum)?max:jMath.log(this.maximum,this.logBase);}
else{this.actualMinimum=jMath.isNull(this.minimum)?min:this.minimum;this.actualMaximum=jMath.isNull(this.maximum)?max:this.maximum;}},_getNextPosition:function(current,interval){return jMath.round(current+interval);},_getMarkInterval:function(mark,major){var intr;if(mark.interval){intr=mark.interval;}
else{if(major){intr=this.actualInterval;}
else{intr=this.actualInterval/2;}}
return intr;},_getIntervals:function(interval,mark){var offset=0;if(mark&&mark.intervalOffset){offset=mark.intervalOffset;}
var intrs=[];var intrStart=this._getIntervalStart(this._getActualVisibleMinimum(),interval);for(var i=intrStart+offset;i<=this._getActualVisibleMaximum();i=this._getNextPosition(i,interval)){intrs.push(i);}
return intrs;},_getIntervalStart:function(min,interval){var crossValue=min-this.getCrossing();var intrStart=this._alignToInterval(crossValue,interval);if(intrStart<min){intrStart=this._alignToInterval(crossValue+interval,interval);}
return intrStart;},_alignToInterval:function(value,interval){return jMath.round(jMath.round(Math.floor(value/interval))*interval)+this.getCrossing();},_createLabel:function(text,settings){var tBlock=new TextBlock(text);tBlock.addClass('dvx-chart-axis-label');tBlock.isAxisLabel=true;tBlock.context={chart:this.chart,axis:this,text:text};jFunc.extend(tBlock,settings);this.chart.triggerEvent('axisLabelCreating',tBlock);tBlock.measure();return tBlock;},_getLabelIntervals:function(interval,mark){return this._getIntervals(interval,mark);},_measureRotatedLabels:function(labels){var isVertical=this.isAxisVertical;var w=0;var h=0;for(var i=0;i<labels.length;i++){var lbl=labels[i];var hypotenuse=Math.sqrt(lbl.width*lbl.width+lbl.height*lbl.height);var rotAngle=lbl.rotationAngle;if(isVertical){var width=Math.abs(Math.cos(rotAngle)*hypotenuse);w=Math.max(w,width);}
else{var height=Math.abs(Math.sin(rotAngle)*hypotenuse);h=Math.max(h,height);}}
if(this.labels.position==='inside'){this.lblsW=w;this.lblsH=h;return{w:0,h:0};}
return{w:w,h:h};},_correctLabelsPositions:function(labels){var w=0;var h=0;var x;var y;var reversed=this.reversed===true;var inside=this.labels.position==='inside';var isVertical=this.isAxisVertical;var margin=this.lblMargin;var i,j,spot,lbl,spots,success;if(isVertical){spots=[];for(i=0;i<labels.length;i++){lbl=labels[i];success=false;y=lbl.y;switch(lbl.textBaseline){case 'middle':y-=lbl.height/2;break;case 'bottom':y-=lbl.height;break;}
j=0;for(j=0;j<spots.length;j++){spot=spots[j];if(reversed){success=y>spot.y+spot.h;}
else{success=spot.y>y+lbl.height;}
if(success){spot.y=y;spot.h=lbl.height;spot.w=Math.max(spot.w,lbl.width+margin);spot.labels.push(lbl);break;}}
if(!success){spots[j]={y:y,h:lbl.height,w:lbl.width+margin,labels:[lbl]};}}
var isRight=this.location==='right';isRight=inside?!isRight:isRight;w=0;for(i=0;i<spots.length;i++){spot=spots[i];for(j=0;j<spot.labels.length;j++){lbl=spot.labels[j];if(isRight){lbl.x+=w;}
else{lbl.x-=w;}}
w+=spot.w;}}
else{spots=[];for(i=0;i<labels.length;i++){lbl=labels[i];x=lbl.x;switch(lbl.textAlign){case 'center':x-=lbl.width/2;break;case 'right':x-=lbl.width;break;}
success=false;j=0;for(j=0;j<spots.length;j++){spot=spots[j];if(reversed){success=spot.x>x+lbl.width+margin;}
else{success=x>spot.x+spot.w+margin;}
if(success){spot.x=x;spot.w=lbl.width;spot.h=Math.max(spot.h,lbl.height+margin);spot.labels.push(lbl);success=true;break;}}
if(!success){spots[j]={x:x,w:lbl.width,h:lbl.height+margin,labels:[lbl]};}}
var isBottom=this.location==='bottom';isBottom=inside?!isBottom:isBottom;h=0;for(i=0;i<spots.length;i++){spot=spots[i];for(j=0;j<spot.labels.length;j++){lbl=spot.labels[j];if(isBottom){lbl.y+=h;}
else{lbl.y-=h;}}
h+=spot.h;}}
if(this.labels.position==='inside'){this.lblsW=w;this.lblsH=h;return{w:0,h:0};}
return{w:w,h:h};},_removeOverlappedLabels:function(labels){var w=0;var h=0;var left=0;var right=0;var lastRight=0;var top=0;var bottom=0;var lastTop=maxVl;var x;var y;var i;var index;var lbl;var reversed=this.reversed===true;var inside=this.labels.position==='inside';var isVertical=this.isAxisVertical;var margin=this.lblMargin;var removeMargin=2*margin;if(isVertical){for(i=0;i<labels.length;i++){index=i;if(this.reversed){index=labels.length-i-1;}
lbl=labels[index];y=lbl.y;switch(lbl.textBaseline){case 'middle':y-=lbl.height/2;break;case 'bottom':y-=lbl.height;break;}
top=lbl.y;bottom=top+lbl.height+removeMargin;if(bottom<lastTop){lastTop=top;}
else{lbl.visible=false;continue;}
w=Math.max(w,lbl.width+margin);}}
else{for(i=0;i<labels.length;i++){index=i;if(this.reversed){index=labels.length-i-1;}
lbl=labels[index];switch(lbl.textAlign){case 'center':x-=lbl.width/2;break;case 'right':x-=lbl.width;break;}
left=lbl.x;right=left+lbl.width+removeMargin;if(left>lastRight){lastRight=right;}
else{lbl.visible=false;continue;}
h=Math.max(h,lbl.height+margin);}}
if(this.labels.position==='inside'){this.lblsW=w;this.lblsH=h;return{w:0,h:0};}
return{w:w,h:h};},_measure:function(){var rangeSliderBreadth=0;if(this.zoomEnabled){rangeSliderBreadth=this.rangeSlider.breadth;}
var size={w:0,h:0};if(this.labels){if(this.labels.angle){size=this._measureRotatedLabels(this._getLabels());}
else{switch(this.labels.resolveOverlappingMode){case 'hide':size=this._removeOverlappedLabels(this._getLabels());break;case 'multipleRows':default:size=this._correctLabelsPositions(this._getLabels());break;}}}
this.title._measure();var offset=this.title.height+rangeSliderBreadth+this.lineWidth/2;if(this.isAxisVertical){size.w+=offset;}
else{size.h+=offset;}
var mrg=this.margin+this._getMaxOutsideTickMarksLength();if(this.isAxisVertical){if(!this.isCustomWidth){var w=size.w+mrg;if(this.width!==w){this.width=w;return true;}}}
else{if(!this.isCustomHeight){var h=size.h+mrg;if(this.height!==h){this.height=h;return true;}}}
return false;},_arrange:function(){var x1=this.x;var y1=this.y;var x2=this.x+this.width;var y2=this.y+this.height;switch(this.location){case 'left':x2=x1=this.x+this.width;break;case 'right':x2=x1=this.x;break;case 'top':y2=y1=this.y+this.height;break;case 'bottom':y2=y1=this.y;break;}
if(this.title.text){switch(this.location){case 'left':this.title.x=this.title.rotX=this.x;this.title.y=this.title.rotY=this.y+(this.height+this.title.width)/2;this.title.rotationAngle=jMath.radians(-90);break;case 'right':this.title.x=this.title.rotX=this.x+this.width;this.title.y=this.title.rotY=this.y+(this.height-this.title.width)/2;this.title.rotationAngle=jMath.radians(90);break;case 'top':this.title.x=this.x+(this.width-this.title.width)/2;this.title.y=this.y;break;case 'bottom':this.title.x=this.x+(this.width-this.title.width)/2;this.title.y=this.y+this.height-this.title.height;break;}}
this.x1=x1;this.y1=y1;this.x2=x2;this.y2=y2;this.offset=this.lineWidth/2;},_updateOrigin:function(){if(this.isAxisVertical){this.origin=this.y;this.length=this.height;}
else{this.origin=this.x;this.length=this.width;}},_render:function(renderContext){var groupShape=new GroupShape();this._setAxesClasses(groupShape);var minorShapes=this._getTickMarks(this.minorTickMarks,false);if(minorShapes.length){var minorTickmarksGroup=new GroupShape();minorTickmarksGroup.addClass('dvx-chart-axis-minor-tick-mark');minorTickmarksGroup.addShapes(minorShapes);groupShape.addShape(minorTickmarksGroup);}
var majorShapes=this._getTickMarks(this.majorTickMarks,true);if(majorShapes.length){var majorTickmarksGroup=new GroupShape();majorTickmarksGroup.addClass('dvx-chart-axis-major-tick-mark');majorTickmarksGroup.addShapes(majorShapes);groupShape.addShape(majorTickmarksGroup);}
var line=this._getMainLine();groupShape.addShape(line);var labels=this._getLabels();if(this.labels&&!this.labels.angle){switch(this.labels.resolveOverlappingMode){case 'hide':this._removeOverlappedLabels(labels);break;case 'multipleRows':default:this._correctLabelsPositions(labels);break;}}
this._filterLabels(labels);if(labels.length){var labelsGroup=new GroupShape();labelsGroup.addShapes(labels);labelsGroup.addClass('dvx-chart-axis-label-group');groupShape.addShape(labelsGroup);}
var titleShapes=[];this.title._render(titleShapes);if(titleShapes.length){var titleGroup=new GroupShape();titleGroup.addClass('dvx-chart-axis-title-group');titleGroup.addShapes(titleShapes);groupShape.addShape(titleGroup);}
jFunc.merge(renderContext.contextShapes,labels);return groupShape;},_setAxesClasses:function(shape){shape.addClass("dvx-chart-axis");if(this.options&&this.options.class){shape.addClass(this.options.class);}},_getMainLine:function(){var crossOffsetX=this.crossOffsetX,crossOffsetY=this.crossOffsetY;var line=new Line(this.x1+crossOffsetX,this.y1+crossOffsetY,this.x2+crossOffsetX,this.y2+crossOffsetY);line.addClass('dvx-chart-axis-main-line');return line;},_getMaxInsideTickMarksLength:function(){var length=0;if(this.minorTickMarks&&this.minorTickMarks.visible&&this.minorTickMarks.isInside()){length=Math.max(length,this.minorTickMarks.length);}
if(this.majorTickMarks&&this.majorTickMarks.visible&&this.majorTickMarks.isInside()){length=Math.max(length,this.majorTickMarks.length);}
return length;},_getMaxOutsideTickMarksLength:function(){var length=0;if(this.minorTickMarks&&this.minorTickMarks.visible&&!this.minorTickMarks.isInside()){length=Math.max(length,this.minorTickMarks.length);}
if(this.majorTickMarks&&this.majorTickMarks.visible&&!this.majorTickMarks.isInside()){length=Math.max(length,this.majorTickMarks.length);}
return length;},_getLabels:function(){var label=this.labels;if(!label||label.visible===false){return[];}
var inside=label.position==='inside';var offset=this.lblMargin;var lblOffset=this.offset;var angle;var rotAngle;var i;var hypotenuse;var crossOffsetX=this.crossOffsetX,crossOffsetY=this.crossOffsetY;var vertical=this.isAxisVertical;if((vertical&&label.vAlign==='center')||(!vertical&&label.hAlign==='center')){offset+=inside?this._getMaxInsideTickMarksLength()+this.lineWidth/2:this._getMaxOutsideTickMarksLength();}
var shapes=[];var intr=this._getMarkInterval(label,true);if(!intr){return[];}
var intrs=this._getLabelIntervals(intr,label);var len=intrs.length;var showFirst=label.showFirstLabel;var showLast=label.showLastLabel;for(i=0;i<len;i++){if((!showFirst&&i===0)||(!showLast&&i===len-1)){continue;}
var val=intrs[i];var lblText=this.getLabel(val);var tBlock=this._createLabel(lblText,label);var pos=this.getPosition(val);switch(this.location){case 'left':if(inside){tBlock.x=this.x+this.width+offset+crossOffsetX;}
else{tBlock.x=this.x+this.width-offset-lblOffset+crossOffsetX;tBlock.textAlign='right';}
tBlock.y=pos;switch(label.vAlign){case 'bottom':tBlock.textBaseline='top';break;case 'top':tBlock.textBaseline='bottom';break;}
if(this.labels.angle){angle=Math.min(90,Math.max(-90,this.labels.angle));rotAngle=jMath.radians(angle);tBlock.rotX=tBlock.x;tBlock.rotY=tBlock.y;tBlock.rotationAngle=rotAngle;}
break;case 'right':if(inside){tBlock.x=this.x-offset+crossOffsetX;tBlock.textAlign='right';}
else{tBlock.x=this.x+offset+lblOffset+crossOffsetX;}
tBlock.y=pos;switch(label.vAlign){case 'bottom':tBlock.textBaseline='top';break;case 'top':tBlock.textBaseline='bottom';break;}
if(this.labels.angle){angle=Math.min(90,Math.max(-90,this.labels.angle));rotAngle=jMath.radians(angle);tBlock.rotX=tBlock.x;tBlock.rotY=tBlock.y;tBlock.rotationAngle=rotAngle;}
break;case 'top':tBlock.x=pos;if(inside){tBlock.y=this.y+this.height+offset+tBlock.height/2+crossOffsetY;}
else{tBlock.y=this.y+this.height-offset-tBlock.height/2-lblOffset+crossOffsetY;}
tBlock.textBaseline='middle';switch(label.hAlign){case 'center':tBlock.textAlign='center';break;case 'left':tBlock.textAlign='right';break;case 'right':tBlock.textAlign='left';break;}
if(this.labels.angle){angle=Math.min(90,Math.max(-90,this.labels.angle));tBlock.flip=angle>0;if(angle>0){angle=-180+angle;}
rotAngle=jMath.radians(angle);hypotenuse=Math.sqrt(tBlock.width*tBlock.width+tBlock.height*tBlock.height);tBlock.rotX=tBlock.x+0.5*Math.cos(rotAngle)*hypotenuse;tBlock.rotY=tBlock.y+0.5*Math.sin(rotAngle)*hypotenuse;tBlock.rotationAngle=rotAngle;}
break;case 'bottom':tBlock.x=pos;if(inside){tBlock.y=this.y-offset-tBlock.height/2+crossOffsetY;}
else{tBlock.y=this.y+offset+tBlock.height/2+lblOffset+crossOffsetY;}
tBlock.textBaseline='middle';switch(label.hAlign){case 'center':tBlock.textAlign='center';break;case 'left':tBlock.textAlign='right';break;case 'right':tBlock.textAlign='left';break;}
if(this.labels.angle){angle=Math.min(90,Math.max(-90,this.labels.angle));tBlock.flip=angle<0;if(angle<0){angle=180+angle;}
rotAngle=jMath.radians(angle);hypotenuse=Math.sqrt(tBlock.width*tBlock.width+tBlock.height*tBlock.height);tBlock.rotX=tBlock.x+0.5*Math.cos(rotAngle)*hypotenuse;tBlock.rotY=tBlock.y+0.5*Math.sin(rotAngle)*hypotenuse;tBlock.rotationAngle=rotAngle;}
break;}
shapes.push(tBlock);}
return shapes;},_filterLabels:function(labels){if(!this.labels||this.labels.position!=='inside'){return;}
var gArea=this.chart.gridArea;var rX=gArea.x;var rY=gArea.y;var rW=gArea.width;var rH=gArea.height;for(var i=labels.length-1;i>=0;i--){var lbl=labels[i];if(!lbl.isInRect(rX,rY,rW,rH)){var index=jFunc.inArray(lbl,labels);labels.splice(index,1);}}},_getTickMarks:function(mark,major){if(!mark||!mark.visible){return[];}
var shapes=[];var crossOffsetX=this.crossOffsetX,crossOffsetY=this.crossOffsetY;var offset=this.offset;var inside=mark.position==='inside';var intr=this._getMarkInterval(mark,major);var lng=mark.length;var intrs=this._getIntervals(intr,mark,major);var x1,y1,x2,y2;for(var i=0;i<intrs.length;i++){var pos=this.getPosition(intrs[i]);switch(this.location){case 'left':y1=y2=pos;if(inside){x2=this.x+this.width+lng+this.lineWidth/2+crossOffsetX;}
else{x2=this.x+this.width-offset+crossOffsetX;}
x1=x2-lng;break;case 'right':y1=y2=pos;if(inside){x1=this.x-lng-this.lineWidth/2+crossOffsetX;}
else{x1=this.x+offset+crossOffsetX;}
x2=x1+lng;break;case 'top':x1=x2=pos;if(inside){y2=this.y+this.height+lng+this.lineWidth/2+crossOffsetY;}
else{y2=this.y+this.height-offset+crossOffsetY;}
y1=y2-lng;break;case 'bottom':x1=x2=pos;if(inside){y2=this.y-lng-this.lineWidth/2+crossOffsetY;}
else{y2=this.y+offset+crossOffsetY;}
y1=y2+lng;break;}
var line=new Line(x1,y1,x2,y2);shapes.push(line);}
return shapes;},_setChart:function(chart){this.chart=chart;this.title.chart=chart;},_getValue:function(value){return value;},getCrossing:function(){return this.crossing||0;},_initRadialMeasures:function(){var diameter;if(this.chart.options.halfPolar){diameter=Math.min(2*this.width-10,this.height);this.cx=this.x+10;}
else{diameter=Math.min(this.width,this.height);this.cx=this.x+this.width/2;}
this.cy=this.y+this.height/2;this.radius=diameter/2;},_getActualVisibleMinimum:function(){return this.actualVisibleMinimum;},_getActualVisibleMaximum:function(){return this.actualVisibleMaximum;},_getActualMinimum:function(){return this.actualMinimum;},_getActualMaximum:function(){return this.actualMaximum;},_addEmptyDaysOffset:function(date){return date;},getZoom:function(){if(!this.actualMaximum){return 1;}
var range=this._getActualMaximum()-this._getActualMinimum();var visibleRange=this._getActualVisibleMaximum()-this._getActualVisibleMinimum();var zoom=visibleRange/range;return zoom;},setOptions:function(options){if(options&&(typeof options.title==='string')){options.title={text:options.title};jFunc.extend(options.title,this.defaults.title);}
var settings=jFunc.extend(true,{},this.defaults,options||{});jFunc.extend(this,settings);this.options=options;if(options){this.isCustomWidth=!!options.width;this.isCustomHeight=!!options.height;}
this.majorTickMarks=new TickMark(settings.majorTickMarks);if(settings.minorTickMarks){this.minorTickMarks=new TickMark(settings.minorTickMarks);this.minorTickMarks.major=this.majorTickMarks;}
if(settings.majorGridLines){this.majorGridLines=new GridLine(settings.majorGridLines);}
if(settings.minorGridLines){this.minorGridLines=new GridLine(settings.minorGridLines);this.minorGridLines.major=this.majorGridLines;}
this.isAxisVertical=this.isVertical();this.title=new Title(settings.title);this.title.chart=this.chart;},getPosition:function(val){var maximum=this._getActualVisibleMaximum();var minimum=this._getActualVisibleMinimum();var position=this.length/(maximum-minimum)*(val-minimum);var reversed=this.reversed===true;var vertical=this.isAxisVertical;if((vertical&&reversed===false)||(vertical===false&&reversed)){position=this.origin+this.length-position;}
else{position+=this.origin;}
return position;},getValue:function(position){var maximum=this._getActualVisibleMaximum();var minimum=this._getActualVisibleMinimum();var value=(position-this.origin)*(maximum-minimum)/this.length+minimum;var reversed=this.reversed===true;var vertical=this.isAxisVertical;if((vertical&&reversed===false)||(vertical===false&&reversed)){value=minimum+maximum-value;}
value=this._addEmptyDaysOffset(value);return value;},getLabel:function(value){var stringFormat=null;if(this.labels){stringFormat=this.labels.stringFormat;}
var formatterFunction=this.chart.getLabelFormatter();var label=formatterFunction(stringFormat,value);return label;},isVertical:function(){if(this.location==='left'||this.location==='right'){return true;}
return false;},isValueVisible:function(val){if(this.logarithmic){val=jMath.log(val,this.logBase);}
return val>=this.actualVisibleMinimum&&val<=this.actualVisibleMaximum;},isInVisibleRange:function(val){var min=this.visibleMinimum;var max=this.visibleMaximum;if(jMath.isNull(min)||jMath.isNull(max)){return true;}
if(this.logarithmic){min=jMath.log(min,this.logBase);max=jMath.log(max,this.logBase);}
return val>=min&&val<=max;},defaults:{location:'left',labels:{visible:true,position:'outside',showLastLabel:true,showFirstLabel:true,hAlign:'center',vAlign:'center'},title:{class:'dvx-chart-axis-title',text:undefined,margin:2},margin:5,visible:true,reversed:false,zoomEnabled:false}};var minVl=-Number.MAX_VALUE;var maxVl=Number.MAX_VALUE;function jMath(){}
jMath.isNull=function(value){if(value===null||value===undefined){return true;}
if(!isNaN(value)){return false;}
var type=jFunc.type(value);return type!=='date'&&type!=='array';};jMath.roundH=function(value){return Math.round(value)-0.5;};jMath.round=function(value){var rec=1.0/value;if(Math.abs(rec)>10000){var sigDigits=jMath.log10(Math.abs(rec));if(sigDigits>13){return value;}}
var roundVl=value.toPrecision(14);var result=parseFloat(roundVl);return result;};jMath.log10=function(x){return Math.log(x)/Math.LN10;};jMath.log=function(x,base){return Math.log(x)/Math.log(base);};jMath.radians=function(angle){return angle*(Math.PI/180);};jMath.degrees=function(angle){return 180*angle/Math.PI;};jMath.normalizeAngle=function(angle){var result=angle%(2*Math.PI);if(result<0){result+=2*Math.PI;}
return result;};jMath.fitInRange=function(val,min,max){if(val<min){val=min;}
else if(val>max){val=max;}
return val;};jMath.sum=function(arr){var sum=0;for(var i=0;i<arr.length;i++){sum+=arr[i];}
return sum;};jMath.compareArrays=function(arr1,arr2){if(!arr1&&!arr2){return true;}
if(!arr1||!arr2){return false;}
if(arr1.length!==arr2.length){return false;}
for(var i=0;i<arr1.length;i++){if(arr1[i]!==arr2[i]){return false;}}
return true;};jMath.rotatePointAt=function(x,y,angle,originX,originY){var sin=Math.sin(angle);var cos=Math.cos(angle);var dx=x-originX;var dy=y-originY;var resX=originX+dx*cos-dy*sin;var resY=originY+dx*sin+dy*cos;return{x:resX,y:resY};};jMath.rotatePointsAt=function(pts,angle,originX,originY){var result=[];for(var i=0;i<pts.length;i+=2){var pt=jMath.rotatePointAt(pts[i],pts[i+1],angle,originX,originY);result.push(pt.x);result.push(pt.y);}
return result;};jMath.polarToCartesian=function(cX,cY,radius,angle){return{x:Math.round(cX+radius*Math.cos(angle)),y:Math.round(cY+radius*Math.sin(angle))};};jMath.reversePoints=function(pts){var newPts=[];for(var i=pts.length-2;i>=0;i-=2){newPts.push(pts[i]);newPts.push(pts[i+1]);}
return newPts;};jMath.trimPoints=function(pts){var newPts=pts.slice(0);var len=newPts.length;while((len>1)&&(jMath.isNull(newPts[0])||jMath.isNull(newPts[1]))){newPts.splice(0,2);len=newPts.length;}
while((len>1)&&(jMath.isNull(newPts[len-2])||jMath.isNull(newPts[len-1]))){newPts.splice(len-2,2);len=newPts.length;}
return newPts;};jMath.intersection=function(a1,a2,b1,b2){var result,ua_t=(b2.x-b1.x)*(a1.y-b1.y)-(b2.y-b1.y)*(a1.x-b1.x),ub_t=(a2.x-a1.x)*(a1.y-b1.y)-(a2.y-a1.y)*(a1.x-b1.x),u_b=(b2.y-b1.y)*(a2.x-a1.x)-(b2.x-b1.x)*(a2.y-a1.y);if(u_b!==0){var ua=ua_t/u_b;var ub=ub_t/u_b;result={x:a1.x+ua*(a2.x-a1.x),y:a1.y+ua*(a2.y-a1.y)};}
return result;};jMath.processDataValue=function(value,type){switch(type){case 'numeric':if(typeof value==='string'){value=parseFloat(value);}
break;case 'dateTime':if(typeof value==='string'){value=new Date(value);}
break;case 'string':if(typeof value!=='string'){value=value.toString();}
break;}
return value;};jMath.processDataField=function(dataSource,valuesField){if(!valuesField){return null;}
var name,type,convert,format;var isPlain=jFunc.isPlainObject(valuesField);if(isPlain){name=valuesField.name;type=valuesField.type;convert=valuesField.convert;}
else{name=valuesField;}
var item,vl;var arr=[];for(var i=0;i<dataSource.length;i++){item=dataSource[i];vl=item[name];if(convert){vl=convert(vl);}
else if(type){switch(type){case 'numeric':if(typeof vl==='string'){vl=parseFloat(vl);}
break;case 'dateTime':if(typeof vl==='string'){vl=new Date(vl);}
break;}}
arr.push(vl);}
return arr;};jMath.mergeArraysXY=function(xValues,yValues){if(!xValues||xValues.length===0){return yValues;}
var result=[],i,elem;for(i=0;i<xValues.length;i++){elem=[];elem.push(xValues[i]);result.push(elem);}
var len=result.length,item;for(i=0;i<yValues.length;i++){item=yValues[i];if(i<len){elem=result[i];elem.push(item);}
else{elem=[null,item];result.Add(elem);}}
return result;};jMath.mergeArrays=function(lists){var listCount=lists.length;var result=[],i,j,elem,list,item;for(i=0;i<listCount;i++){list=lists[i];if(!list){continue;}
var count=result.length;for(j=0;j<list.length;j++){item=list[j];if(j<count){elem=result[j];elem[i]=item;}
else{elem=[];elem[i]=item;result.push(elem);}}}
return result;};jMath.cloneArray=function(arr){return arr.slice(0);};jMath.calcNullValue=function(arrData,i,type,dataType){var leftVl,rightVl,vl,nullVl;for(var left=i-1;left>=0;left--){vl=arrData[left];if(jMath.isNull(vl)){continue;}
switch(type){case 'x':vl=vl[0];break;case 'y':vl=vl[1];break;}
if(!jMath.isNull(vl)){leftVl=vl;break;}}
for(var right=i+1;right<arrData.length;right++){vl=arrData[right];if(jMath.isNull(vl)){continue;}
switch(type){case 'x':vl=vl[0];break;case 'y':vl=vl[1];break;}
if(!jMath.isNull(vl)){rightVl=vl;break;}}
var isLeftVlNull=jMath.isNull(leftVl);var isRightVlNull=jMath.isNull(rightVl);if(isLeftVlNull&&isRightVlNull){return null;}
if(isLeftVlNull){leftVl=rightVl;}
else if(isRightVlNull){rightVl=leftVl;}
var result;if(dataType==='DateTimeAxis'){var leftTime=leftVl.getTime();var rightTime=rightVl.getTime();result=leftTime+(rightTime-leftTime)/(right-left);result=new Date(result);}
else{result=leftVl+(rightVl-leftVl)/(right-left);}
return result;};jMath.getDistances=function(shapes){var distances=[];var distance,sh1,sh2;for(var i=0;i<shpaes.length-1;i++){sh1=shapes[i];sh2=shapes[i+1];distance=sh2.y-sh1.y-sh1.height;distances.push(distance);}
return distances;};jMath.replaceAll=function(str,find,replace){return str.replace(new RegExp(find,'g'),replace);};jMath.replaceTextForExport=function(str){if(!str){return str;}
if(typeof str!=='string'){str=str.toString();}
var text=jMath.replaceAll(str,"'",";#39;");return jMath.replaceAll(text,'"',";#34;");};jMath.replaceTextForTooltip=function(str){if(!str){return str;}
if(typeof str!=='string'){str=str.toString();}
var text=jMath.replaceAll(str,"&",'&amp;');text=jMath.replaceAll(text,'"','&quot;');text=jMath.replaceAll(text,"'",'&#39;');text=jMath.replaceAll(text,"<",'&lt;');return jMath.replaceAll(text,">",'&gt;');};jMath.sortSeries=function(series){var sortedSeries=series.slice(0);sortedSeries.sort(function(a,b){var isANull=a.zIndex===undefined||a.zIndex===null;var isBNull=b.zIndex===undefined||b.zIndex===null;if(isANull&&isBNull){return 0;}
if(isANull&&!isBNull){return-1;}
if(!isANull&&isBNull){return 1;}
return a.zIndex-b.zIndex;});return sortedSeries;};function jDate(){}
jDate.ticksInDay=24*60*60*1000;jDate.getDaysInMonth=function(year,month){if(month==1){return new Date(year,1,29).getDate()==29?29:28;}
return[31,undefined,31,30,31,30,31,31,30,31,30,31][month];};jDate.addSeconds=function(date,value){var newDate=new Date(date.getTime()+value*1000);return newDate;}
jDate.addDays=function(date,value){value=Math.max(value,1);var newDate=new Date(date.getTime());newDate.setDate(date.getDate()+value);return newDate;}
jDate.addYears=function(date,value){var newDate=new Date(date.getTime());newDate.setFullYear(date.getFullYear()+value);return newDate;}
jDate.addMonths=function(date,value){var result=new Date(date.getTime());var n=result.getDate();result.setDate(1);result.setMonth(result.getMonth()+value);result.setDate(Math.min(n,jDate.getDaysInMonth(result.getFullYear(),result.getMonth())));return result;};jDate.getDayOfWeek=function(date){var dow=date.getDay();return dow===0?7:dow;};jDate.fromDays=function(days){return days*jDate.ticksInDay;}
jDate.fromHours=function(hours){return hours*60*60*1000;}
jDate.fromMinutes=function(minutes){return minutes*60*1000;}
jDate.fromSeconds=function(seconds){return seconds*1000;}
jDate.roundToDay=function(date){var newDate=new Date(date.getFullYear(),date.getMonth(),date.getDate());return newDate;}
function Shape(){this.visible=true;this.decorationType="fill";this.classes=[];}
Shape.compare=function(sh1,sh2,input,area){if(!sh1.useHitTestArea&&!sh2.useHitTestArea){return true;}
if(sh1.useHitTestArea&&!sh2.useHitTestArea){return sh1.hitTest(input.locX,input.locY,area/3);}
if(sh1.hitTest(input.locX,input.locY,0)){return true;}
var origin1=sh1.getCenter(input);var origin2=sh2.getCenter(input);var dx=input.locX-origin1.x;var dy=input.locY-origin1.y;var dist1=Math.sqrt(dx*dx+dy*dy);dx=input.locX-origin2.x;dy=input.locY-origin2.y;var dist2=Math.sqrt(dx*dx+dy*dy);return dist1<=dist2;};Shape.prototype.addClass=function(newClass){this.addClasses(newClass.split(' '));};Shape.prototype.addClasses=function(classes){var that=this;classes.forEach(function(item){if(that.classes.indexOf(item)===-1){that.classes.push(item);if(that.svgShape){that.svgShape.classList.add(item);}}});};Shape.prototype.removeClass=function(newClass){this.removeClasses(newClass.split(' '));};Shape.prototype.removeClasses=function(classes){var that=this;classes.forEach(function(item){var indexOf=that.classes.indexOf(item);if(indexOf>0){that.classes.splice(indexOf,1);if(that.svgShape){that.svgShape.classList.remove(item);}}});};Shape.prototype.renderClasses=function(svgShape){if(this.classes.length){svgShape.setAttribute('class',this.classes.join(' '));}};Shape.prototype.hitTest=function(x,y,area){return false;};Shape.prototype.boundsHitTest=function(x,y,area){if(!this.useHitTestArea){area=0;}
return x>=this.x-area&&x<=this.x+this.width+area&&y>=this.y-area&&y<=this.y+this.height+area;};Shape.prototype.isInRect=function(rX,rY,rW,rH){var x=this.x;var y=this.y;var w=this.width;var h=this.height;return x>=rX&&y>=rY&&x+w<=rX+rW&&y+h<=rY+rH;};Shape.prototype.renderRectPath=function(svg,x,y,width,height){var rect=document.createElementNS("http://www.w3.org/2000/svg",'rect');rect.setAttribute('x',x);rect.setAttribute('y',y);rect.setAttribute('width',width);rect.setAttribute('height',height);this.renderClasses(rect);svg.appendChild(rect);return rect;};Shape.prototype.calculateBounds=function(pts){if(!pts){return;}
var x0=maxVl;var y0=maxVl;var x1=minVl;var y1=minVl;var x,y;for(var i=0;i<pts.length;i+=2){x=pts[i];y=pts[i+1];if(jMath.isNull(x)){continue;}
x0=Math.min(x0,x);y0=Math.min(y0,y);x1=Math.max(x1,x);y1=Math.max(y1,y);}
this.x=x0;this.y=y0;this.width=x1-x0;this.height=y1-y0;this.center=this.getCenter();};Shape.prototype.getCenter=function(){if(this.center){return this.center;}
return{x:this.x+this.width/2,y:this.y+this.height/2};};Shape.prototype._getTooltipPosition=function(input,w,h,chartW,chartH){var pt=this._getTooltipOrigin(input);return this._getTooltipPositionFromOrigin(pt.x,pt.y,w,h,chartW,chartH);};Shape.prototype._getTooltipOrigin=function(input){if(this.tooltipOrigin){return this.tooltipOrigin;}
return{x:this.x+this.width/2,y:this.y};};Shape.prototype._getTooltipPositionFromOrigin=function(ptx,pty,w,h,chartW,chartH){var offset=15;var x=ptx-w-offset;var y=pty-h+10;if(x<0){x=Math.max(0,ptx+offset);}
if(y<0){y=Math.max(0,pty-offset);}
return{x:x,y:y};};Shape.prototype._getAnimationPoints=function(pts,length){if(pts.length===length){return pts;}
var diff=length%2;length-=diff;var newPts=pts.slice(0,length);diff/=2;var prevX=pts[length-2];var prevY=pts[length-1];var x=pts[length];var y=pts[length+1];if(!jMath.isNull(prevY)&&!jMath.isNull(y)){x=prevX+(x-prevX)*diff;y=prevY+(y-prevY)*diff;newPts.push(x);newPts.push(y);}
return newPts;};Shape.prototype.getTooltipColor=function(){if(!this.svgShape){return null;}
return window.getComputedStyle(this.svgShape)[this.decorationType];};Shape.prototype.remove=function(){var svgShape=this.svgShape;if(!svgShape||!svgShape.parentNode){return;}
svgShape.parentNode.removeChild(svgShape);this.svgShape=null;};function Line(x1,y1,x2,y2){Shape.call(this);this.decorationType="stroke";this.x1=x1;this.y1=y1;this.x2=x2;this.y2=y2;this.useHitTestArea=true;}
Line.prototype=new Shape();Line.constructor=new Line;Line.hitTest=function(x1,y1,x2,y2,x,y,area){var rx,ry,rw,rh;if(x1<x2){rx=x1;rw=x2-x1;}
else{rx=x2;rw=x1-x2;}
if(y1<y2){ry=y1;rh=y2-y1;}
else{ry=y2;rh=y1-y2;}
if(x<rx-area||x>rx+rw+area||y<ry-area||y>ry+rh+area){return false;}
var dx=x2-x1;var dy=y2-y1;var a,b,c;if(dx===0){a=1.0;b=0.0;c=-x1;}
else if(dy===0){a=0.0;b=-1.0;c=-y1;}
else if(Math.abs(dx)<Math.abs(dy)){a=1.0;b=(dx/dy);c=-((x1*y2-y1*x2)/dy);}
else{a=-(dy/dx);b=-1.0;c=-((y1*x2-x1*y2)/dx);}
var nrDistance=Math.sqrt(a*a+b*b);var normalDistance=(a*x-b*y+c)/nrDistance;var diff=Math.max(area,3);return Math.abs(normalDistance)<diff;}
Line.prototype.hitTest=function(x,y,area){var x1=this.x1;var y1=this.y1;var x2=this.x2;var y2=this.y2;var dif=Math.max(area,Math.max(3,this.lineWidth/2));if(x1===x2){var dx=x+1;if(dx>x1-dif&&dx<x2+dif&&y>=y1-dif&&y<=y2+dif){return true;}
return false;}
if(y1===y2){var dy=y+0.5;if(x>=x1-dif&&x<=x2+dif&&dy>y1-dif&&dy<y2+dif){return true;}
return false;}
return false;}
Line.prototype.hitTestNonHV=function(x,y,area){var x1=this.x1;var y1=this.y1;var x2=this.x2;var y2=this.y2;if(x1<x2){this.x=x1;this.width=x2-x1;}
else{this.x=x2;this.width=x1-x2;}
if(y1<y2){this.y=y1;this.width=y2-y1;}
else{this.y=y2;this.width=y1-y2;}
var dx=x2-x1;var dy=y2-y1;var a,b,c;if(dx===0){a=1.0;b=0.0;c=-x1;}
else if(dy===0){a=0.0;b=-1.0;c=-y1;}
else if(Math.abs(dx)<Math.abs(dy)){a=1.0;b=(dx/dy);c=-((x1*y2-y1*x2)/dy);}
else{a=-(dy/dx);b=-1.0;c=-((y1*x2-x1*y2)/dx);}
var nrDistance=Math.sqrt(a*a+b*b);var normalDistance=(a*x-b*y+c)/nrDistance;var diff=Math.max(area,3);if(Math.abs(normalDistance)<diff){return true;}
return false;}
Line.prototype.renderToSvg=function(svg){if(!this.visible){return;}
var fn=Math.round;var x1=fn(this.x1);var y1=fn(this.y1);var x2=fn(this.x2);var y2=fn(this.y2);if(this.rotationAngle&&!jMath.isNull(this.rotX)&&!jMath.isNull(this.rotY)){var newPts=jMath.rotatePointsAt([x1,y1,x2,y2],this.rotationAngle,this.rotX,this.rotY);x1=newPts[0];y1=newPts[1];x2=newPts[2];y2=newPts[3];}
var line=document.createElementNS("http://www.w3.org/2000/svg",'line');line.setAttribute('x1',x1);line.setAttribute('y1',y1);line.setAttribute('x2',x2);line.setAttribute('y2',y2);this.renderClasses(line);svg.appendChild(line);this.svgShape=line;}
function Rectangle(x,y,width,height){Shape.call(this);this.x=x;this.y=y;this.width=width;this.height=height;this.cornerRadius=0;}
Rectangle.prototype=new Shape();Rectangle.constructor=new Rectangle;Rectangle.prototype.hitTest=function(x,y,area){return this.boundsHitTest(x,y,area);};Rectangle.prototype.renderToSvg=function(svg){if(!this.visible){return;}
var fn=Math.round;var x=fn(this.x);var y=fn(this.y);var width=fn(this.width);var height=fn(this.height);if(this.xDecrease){width-=this.xDecrease;if(this.isAnimReversed){x+=this.xDecrease;}}
if(this.yDecrease){height-=this.yDecrease;if(this.isAnimReversed){y+=this.yDecrease;}}
if(this.xOffset){x+=this.xOffset;}
if(this.yOffset){y+=this.yOffset;}
if(width<=0||height<=0){return;}
this.svgShape=this.renderRectPath(svg,x,y,width,height);};function Ellipse(x,y,width,height){Shape.call(this);this.x=x;this.y=y;this.width=width;this.height=height;}
Ellipse.prototype=new Shape();Ellipse.constructor=new Ellipse;Ellipse.prototype.hitTest=function(x,y,area){if(this.boundsHitTest(x,y,area)==false){return false;}
var w2=(this.width+area)/2;var h2=(this.height+area)/2;var cX=this.x-area/2+w2;var cY=this.y-area/2+h2;var dx=x-cX;var dy=y-cY;var a=(dx*dx)/(w2*w2);var b=(dy*dy)/(h2*h2);return(a+b<=1);}
Ellipse.prototype.renderToSvg=function(svg){if(!this.visible){return;}
var rx=this.width/2;var ry=this.height/2;var cx=Math.round(this.x+rx);var cy=Math.round(this.y+ry);var ellipse=document.createElementNS("http://www.w3.org/2000/svg",'ellipse');ellipse.setAttribute('cx',cx);ellipse.setAttribute('cy',cy);ellipse.setAttribute('rx',Math.round(rx));ellipse.setAttribute('ry',Math.round(ry));this.renderClasses(ellipse);svg.appendChild(ellipse);this.svgShape=ellipse;}
function Circle(x,y,radius){Shape.call(this);this.x=x;this.y=y;this.radius=radius;this.width=this.height=2*radius;}
Circle.prototype=new Shape();Circle.constructor=new Circle;Circle.prototype.hitTest=function(x,y,area){if(!this.useHitTestArea){area=0;}
var cX=this.x+this.width/2;var cY=this.y+this.height/2;var expr=Math.pow(x-cX,2)+Math.pow(y-cY,2);if(expr>Math.pow(this.radius+area,2)){return false;}
return true;}
Circle.prototype.renderToSvg=function(svg){if(!this.visible){return;}
var r=Math.max(0,this.radius);var circle=document.createElementNS("http://www.w3.org/2000/svg",'circle');circle.setAttribute('cx',Math.round(this.x+r));circle.setAttribute('cy',Math.round(this.y+r));circle.setAttribute('r',Math.round(r));this.renderClasses(circle);svg.appendChild(circle);this.svgShape=circle;}
function Arc(x,y,radius,startAngle,endAngle){Shape.call(this);this.x=x;this.y=y;this.radius=radius;this.startAngle=startAngle;this.endAngle=endAngle;this.width=this.height=2*radius;}
Arc.prototype=new Shape();Arc.constructor=new Arc;function PolyShape(){Shape.call(this);}
PolyShape.prototype=new Shape();PolyShape.constructor=new PolyShape;PolyShape.prototype.hitTest=function(x,y,area){var context=this.context;if(!context||!context.points){return this.boundsHitTest(x,y,area);}
var pts=this.pts;var maxExpr=Math.pow(area,2);var resIndex=-1;var minExpr=maxVl;var ptX,ptY,expr;var step=this.isStepLine?4:2;for(var i=0;i<pts.length;i+=step){ptX=pts[i];ptY=pts[i+1];expr=Math.pow(x-ptX,2)+Math.pow(y-ptY,2);if(expr>minExpr||expr>maxExpr){continue;}
minExpr=expr;resIndex=i;}
if(resIndex===-1){return false;}
return this.createHighlightMark(resIndex);}
PolyShape.prototype.createHighlightMark=function(index){if(index===-1){return null;}
var context=this.context;var pts=this.pts;var idx=index/2;if(this.isStepLine){idx/=2;}
var cPt=context.points[idx];var r=5;var circle=new Circle(pts[index]-r,pts[index+1]-r,r);circle.addClasses(['dvx-chart-highlight-shape','dvx-chart-fill-color-'+this.seriesIndex]);circle.useHitTestArea=true;circle.isHighlightShape=true;circle.context={series:context.series,chart:context.chart};jFunc.extend(circle.context,cPt);return circle;};PolyShape.prototype.getCenter=function(input){if(this.center){return this.center;}
var context=this.context;if(!context||!context.points){return{x:this.x+this.width/2,y:this.y+this.height/2};}
var pts=this.pts;var result=0;var dx=maxVl;var x=input.locX;var diff;var step=this.isStepLine?4:2;for(var i=0;i<pts.length;i+=step){diff=Math.abs(pts[i]-x);if(dx>diff){dx=diff;result=i;}}
return{x:pts[result],y:pts[result+1],mark:this.createHighlightMark(result)};}
PolyShape.prototype.getLength=function(){return this.pts.length;}
PolyShape.prototype.createPolylinePath=function(pts){var n=pts.length,fn=Math.round,path='L',i;for(i=0;i<n;i+=2){path+=fn(pts[i])+' '+fn(pts[i+1])+' ';}
return path;}
PolyShape.prototype.createCurvePath=function(pts){var n=pts.length,fn=Math.round,path='',cp=[],t=0.4,i;if(n===4){path+='L'+fn(pts[2])+','+fn(pts[3]);return path;}
if(this.closed){pts.push(pts[0],pts[1],pts[2],pts[3]);pts.unshift(pts[n-1]);pts.unshift(pts[n-1]);for(i=0;i<n;i+=2){cp=cp.concat(this.getControlBezierPoints(pts[i],pts[i+1],pts[i+2],pts[i+3],pts[i+4],pts[i+5],t));}
cp=cp.concat(cp[0],cp[1]);for(i=2;i<n+2;i+=2){path+='C'+fn(cp[2*i-2])+','+fn(cp[2*i-1])+' '+fn(cp[2*i])+','+fn(cp[2*i+1])+' '+fn(pts[i+2])+','+fn(pts[i+3]);}}
else{for(i=0;i<n-4;i+=2){cp=cp.concat(this.getControlBezierPoints(pts[i],pts[i+1],pts[i+2],pts[i+3],pts[i+4],pts[i+5],t));}
path+='Q'+fn(cp[0])+','+fn(cp[1])+' '+fn(pts[2])+','+fn(pts[3]);for(i=2;i<n-5;i+=2){path+='C'+fn(cp[2*i-2])+','+fn(cp[2*i-1])+' '+fn(cp[2*i])+','+fn(cp[2*i+1])+' '+fn(pts[i+2])+','+fn(pts[i+3]);}
path+='Q'+fn(cp[2*n-10])+','+fn(cp[2*n-9])+' '+fn(pts[n-2])+','+fn(pts[n-1]);}
return path;};PolyShape.prototype.getControlBezierPoints=function(x0,y0,x1,y1,x2,y2,t){var d01=Math.sqrt(Math.pow(x1-x0,2)+Math.pow(y1-y0,2));var d12=Math.sqrt(Math.pow(x2-x1,2)+Math.pow(y2-y1,2));var fa=t*d01/(d01+d12);var fb=t-fa;var p1x=x1+fa*(x0-x2);var p1y=y1+fa*(y0-y2);var p2x=x1-fb*(x0-x2);var p2y=y1-fb*(y0-y2);return[p1x,p1y,p2x,p2y];};function Polyline(pts,isBoundsHitTest,closed){PolyShape.call(this);this.decorationType="stroke";this.pts=pts;this.closed=closed;if(isBoundsHitTest){this.isBoundsHitTest=isBoundsHitTest;this.calculateBounds(pts);}}
Polyline.prototype=new PolyShape();Polyline.constructor=new Polyline;Polyline.prototype.renderPoints=function(svg,pts,noSplit){var length=pts.length;if(length<=2){return;}
var notConnect=this.nullHandling!=='connect';var started=true;var fn=Math.round;var polyline=document.createElementNS("http://www.w3.org/2000/svg",'polyline');this.renderClasses(polyline);var polylinePoints=[];for(var i=0;i<length;i+=2){var x=pts[i];if(x===null||x===undefined){if(notConnect&&started){polyline.setAttribute('points',polylinePoints);svg.appendChild(polyline);started=false;}
continue;}
var y=pts[i+1];x=fn(x);y=fn(y);if(!started){polyline=document.createElementNS("http://www.w3.org/2000/svg",'polyline');this.renderClasses(polyline);polylinePoints=[x,y];started=true;continue;}
polylinePoints.push(x);polylinePoints.push(y);}
polyline.setAttribute('points',polylinePoints);svg.appendChild(polyline);this.svgShape=polyline;}
Polyline.prototype.renderToSvg=function(svg){if(!this.visible){return;}
var pts=jMath.trimPoints(this.pts);if(this.closed){pts.push(pts[0]);pts.push(pts[1]);}
if(!jMath.isNull(this.length)){var len=this.closed?this.length+2:this.length;pts=this._getAnimationPoints(pts,len);}
var length=pts.length;if(length<=2){return;}
this.renderPoints(svg,pts);}
function Polygon(pts){PolyShape.call(this);this.pts=pts;this.calculateBounds(pts);}
Polygon.prototype=new PolyShape();Polygon.constructor=new Polygon;Polygon.prototype.hitTest=function(x,y,area){var context=this.context;if(context&&context.points){return PolyShape.prototype.hitTest.call(this,x,y,area);}
if(!this.boundsHitTest(x,y,area)){return false;}
if(this.isBoundsHitTest&&area){return true;}
var pts=this.pts;var oddNodes=false;var count=pts.length;var x1,y1,x2,y2;var j=0;for(var i=0;i<count;i+=2){j+=2;if(j===count){j=0;}
x1=pts[i];y1=pts[i+1];x2=pts[j];y2=pts[j+1];if(y1<y&&y2>=y||y2<y&&y1>=y){if(x1+(y-y1)/(y2-y1)*(x2-x1)<x){oddNodes=!oddNodes;}}}
return oddNodes;};Polygon.prototype.renderToSvg=function(svg){if(!this.visible){return;}
var pts=this.pts,length=pts.length,fn=Math.round;if(length<4){return;}
if(this.rotationAngle&&!jMath.isNull(this.rotX)&&!jMath.isNull(this.rotY)){pts=jMath.rotatePointsAt(pts,this.rotationAngle,this.rotX,this.rotY);}
var polygon=document.createElementNS("http://www.w3.org/2000/svg",'polygon');var polygonPoints=[fn(pts[0]),fn(pts[1])];for(var i=2;i<length;i+=1){polygonPoints.push(fn(pts[i]));}
this.renderClasses(polygon);polygon.setAttribute('points',polygonPoints);svg.appendChild(polygon);this.svgShape=polygon;};function Curve(pts,closed){PolyShape.call(this);this.decorationType="stroke";if(!pts){return;}
this.closed=closed;this.pts=pts;this.calculateBounds(pts);}
Curve.prototype=new PolyShape();Curve.constructor=new Curve;Curve.prototype.renderPoints=function(points){var pts=[],fn=Math.round;jFunc.merge(pts,points);var n=pts.length;if(n<=2){return;}
var path='M'+fn(pts[0])+','+fn(pts[1])+" ";path+=this.createCurvePath(pts);var svgPath=document.createElementNS("http://www.w3.org/2000/svg",'path');svgPath.setAttribute('d',path);return svgPath;};Curve.prototype.renderToSvg=function(svg){if(!this.visible){return;}
var pts=jMath.trimPoints(this.pts);if(!jMath.isNull(this.length)){pts=this._getAnimationPoints(pts,this.length);}
var length=pts.length;if(length<4){return;}
var svgPath=this.renderPoints(pts);if(svgPath){this.renderClasses(svgPath);svg.appendChild(svgPath);}
this.svgShape=svgPath;};function Area(pts,crossPos,vertical,isCurve){PolyShape.call(this);this.pts=pts;this.crossPos=crossPos;this.vertical=vertical||false;this.isCurve=isCurve||false;if(pts&&pts.length>=2){var areaPts=[];jFunc.merge(areaPts,pts);if(vertical){jFunc.merge(areaPts,[crossPos,pts[pts.length-1],crossPos,pts[1]]);}
else{jFunc.merge(areaPts,[pts[pts.length-2],crossPos,pts[0],crossPos]);}
this.calculateBounds(areaPts);}}
Area.prototype=new PolyShape();Area.constructor=new Area;Area.prototype.renderToSvg=function(svg){if(!this.visible){return;}
var pts=jMath.trimPoints(this.pts);if(!jMath.isNull(this.length)){pts=this._getAnimationPoints(pts,this.length);}
var length=pts.length;if(length<=2){return;}
var x1,y1,x2,y2,i,polygonePts=[],fn=Math.round;if(this.vertical){x1=x2=fn(this.crossPos);y1=fn(pts[length-1]);y2=fn(pts[1]);}else{x1=fn(pts[length-2]);y1=y2=fn(this.crossPos);x2=fn(pts[0]);}
if(this.isCurve){var path='M'+fn(pts[0])+','+fn(pts[1])+' ';path+=this.createCurvePath(pts);path+='L'+x1+','+y1+' '+x2+','+y2+'Z';var svgPath=document.createElementNS("http://www.w3.org/2000/svg",'path');svgPath.setAttribute('d',path);svg.appendChild(svgPath);this.renderClasses(svgPath);this.svgShape=svgPath;}
else{for(i=0;i<length;i+=1){polygonePts.push(fn(pts[i]));}
polygonePts.push(x1);polygonePts.push(y1);polygonePts.push(x2);polygonePts.push(y2);var polygon=document.createElementNS("http://www.w3.org/2000/svg",'polygon');polygon.setAttribute('points',polygonePts);this.renderClasses(polygon);svg.appendChild(polygon);this.svgShape=polygon;}}
function PieSlice(x,y,innerRadius,outerRadius,startAngle,endAngle){Shape.call(this);this.x=x;this.y=y;this.innerRadius=innerRadius;this.outerRadius=outerRadius;this.startAngle=startAngle;this.endAngle=endAngle;this.width=this.height=2*outerRadius;var angle=(startAngle+endAngle)/2;var orX=x+outerRadius*Math.cos(angle);var orY=y+outerRadius*Math.sin(angle);this.center=this.tooltipOrigin={x:orX,y:orY};}
PieSlice.prototype=new Shape();PieSlice.constructor=new PieSlice;PieSlice.prototype.hitTest=function(x,y,area){var cX=this.x;var cY=this.y;var expr=Math.pow(x-cX,2)+Math.pow(y-cY,2);if(expr>Math.pow(this.outerRadius,2)||expr<Math.pow(this.innerRadius,2)){return false;}
var dx=cX-x;var dy=cY-y;var angle=Math.atan2(dy,dx)+Math.PI;angle=jMath.normalizeAngle(angle);var startAngle=jMath.normalizeAngle(this.startAngle);var endAngle=jMath.normalizeAngle(this.endAngle);if(startAngle===endAngle&&this.startAngle!==this.endAngle){return true;}
if(startAngle>endAngle){if((angle>=startAngle&&angle<=2*Math.PI)||(angle<endAngle&&angle>=0)){return true;}}
else{if(angle>=startAngle&&angle<endAngle){return true;}}
return false;};PieSlice.prototype.renderToSvg=function(svg){if(!this.visible){return;}
var x=Math.round(this.x),y=Math.round(this.y),startAngle=this.startAngle,endAngle=this.endAngle,arcSweep=endAngle-startAngle<=Math.PI?"0":"1",startPt,endPt,pathD;if(endAngle-startAngle===2*Math.PI){endAngle-=0.0125;}
if(startAngle===endAngle){return;}
if(this.innerRadius){startPt=jMath.polarToCartesian(x,y,this.innerRadius,startAngle);endPt=jMath.polarToCartesian(x,y,this.innerRadius,endAngle);pathD=["M",startPt.x,startPt.y,"A",this.innerRadius,this.innerRadius,0,arcSweep,1,endPt.x,endPt.y].join(" ");}
else{pathD=["M",x,y].join(" ");}
startPt=jMath.polarToCartesian(x,y,this.outerRadius,endAngle);endPt=jMath.polarToCartesian(x,y,this.outerRadius,startAngle);pathD+=[" ","L",startPt.x,startPt.y,"A",this.outerRadius,this.outerRadius,0,arcSweep,0,endPt.x,endPt.y,'Z'].join(" ");var path=document.createElementNS("http://www.w3.org/2000/svg",'path');path.setAttribute('d',pathD);this.renderClasses(path);svg.appendChild(path);this.svgShape=path;};function RangeShape(pts1,pts2,isCurve,hasHalfTootlips){PolyShape.call(this);if(!pts1){return;}
this.pts1=pts1;this.pts2=pts2;this.pts=[];jFunc.merge(this.pts,pts1);if(!hasHalfTootlips){jFunc.merge(this.pts,jMath.reversePoints(pts2));}
this.calculateBounds(this.pts);this.center=null;this.isCurve=isCurve||false;}
RangeShape.prototype=new PolyShape();RangeShape.constructor=new RangeShape;RangeShape.prototype.getLength=function(){return this.pts1.length;}
RangeShape.prototype.renderToSvg=function(svg){if(!this.visible){return;}
var pts1=this.pts1,pts2=this.pts2,fn=Math.round;if(!jMath.isNull(this.length)){pts1=this._getAnimationPoints(pts1,this.length);pts2=this._getAnimationPoints(pts2,this.length);}
pts2=jMath.reversePoints(pts2);var length=pts1.length;if(length<2){return;}
var path='M'+fn(pts1[0])+','+fn(pts1[1])+' ';var polyline;if(this.isCurve){path+=this.createCurvePath(pts1);}
else{path+=this.createPolylinePath(pts1);}
path+='L'+fn(pts2[0])+','+fn(pts2[1])+' ';if(this.isCurve){path+=this.createCurvePath(pts2);}
else{path+=this.createPolylinePath(pts2);}
path+='Z';var svgPath=document.createElementNS("http://www.w3.org/2000/svg",'path');svgPath.setAttribute('d',path);this.renderClasses(svgPath);svg.appendChild(svgPath);this.svgShape=svgPath;}
function Clip(id,x,y,width,height){Shape.call(this);this.id=id;this.x=x;this.y=y;this.width=width;this.height=height;}
Clip.prototype=new Shape();Clip.constructor=new Clip;Clip.prototype.renderToSvg=function(svg){if(!this.visible){return;}
var svgDefs=document.createElementNS("http://www.w3.org/2000/svg",'defs');var clipPath=document.createElementNS("http://www.w3.org/2000/svg",'clipPath');clipPath.setAttribute('id',this.id);var rect=new Rectangle(this.x,this.y,this.width,this.height);rect.renderToSvg(clipPath);svgDefs.appendChild(clipPath);svg.appendChild(svgDefs);this.svgShape=svgDefs;};function ResetClip(){}
function Shadows(renderShadows){this.renderShadows=renderShadows;}
function TextBlock(text,x,y){Shape.call(this);this.text=text;this.x=x;this.y=y;this.width=0;this.height=0;this.textBaseline='middle';this.textAlign='left';}
TextBlock.prototype=new Shape();TextBlock.constructor=TextBlock;TextBlock.numbers=['1','2','3','4','5','6','7','8','9'];TextBlock.separator="\n";TextBlock.getMeasuringSvg=function(svgControl){var svg=TextBlock.MeasuringSvg;svgControl=svgControl||document.body;if(!svg){svg=document.createElementNS("http://www.w3.org/2000/svg",'svg');svg.setAttribute('class','dvx-chart-measuring-svg');svgControl.appendChild(svg);TextBlock.MeasuringSvg=svg;}
return svg;};TextBlock.prototype.measure=function(){var svg=TextBlock.getMeasuringSvg(),svgText=this.renderToSvg(svg,true),bBox=svgText.getBBox();svg.removeChild(svgText);this.width=bBox.width;this.height=bBox.height;this.dy=bBox.y;return{width:bBox.width,height:bBox.height};};TextBlock.prototype.renderToSvg=function(svg,measuring){if(!this.visible||this.text===undefined){return;}
var x,y;if(measuring){x=0;y=0;}else{x=Math.round(this.x);y=Math.round(this.y-(this.dy||0));var pt=this._correctXY(x,y,this.width,this.height);x=pt.x;y=pt.y;}
return this.renderText(svg,x,y);};TextBlock.prototype.renderText=function(svg,x,y){var text=''+this.text,dx,dy,svgText=document.createElementNS("http://www.w3.org/2000/svg",'text');svgText.setAttribute('x',x);svgText.setAttribute('y',y);svgText.textContent=text;if(this.rotationAngle){svgText.setAttribute('transform','rotate('+jMath.degrees(this.rotationAngle)+')');dx=this.rotX;dy=this.rotY;svgText.setAttribute('transform-origin',dx+' '+dy);}
svg.appendChild(svgText);this.renderClasses(svgText);this.svgShape=svgText;return svgText;};TextBlock.prototype.renderBg=function(ctx){};TextBlock.prototype._correctXY=function(x,y,w,h){switch(this.textAlign){case 'center':x-=w/2;break;case 'right':x-=w;break;}
switch(this.textBaseline){case 'middle':y-=h/2;break;case 'bottom':y-=h;break;}
return{x:x,y:y};};TextBlock.prototype.isInRect=function(rX,rY,rW,rH){var x=this.x;var y=this.y;var w=this.width;var h=this.height;switch(this.textAlign){case 'center':x-=w/2;break;case 'right':x-=w;break;}
switch(this.textBaseline){case 'middle':y-=h/2;break;case 'bottom':y-=h;break;}
return x>=rX&&y>=rY&&x+w<=rX+rW&&y+h<=rY+rH;};TextBlock.prototype.intersectWith=function(rX,rY,rW,rH){var x=this.x;var y=this.y;var w=this.width;var h=this.height;var xy=this._correctXY(x,y,w,h);x=xy.x;y=xy.y;return((rX<(x+w))&&(x<(rX+rW))&&(rY<(y+h)))&&(y<(rY+rH));};TextBlock.prototype.hitTest=function(x,y,area){if(!this.isLegendItem&&!this.isAxisLabel){return false;}
var w=this.width;var h=this.height;switch(this.textAlign){case 'center':x+=w/2;break;case 'right':x+=w;break;}
switch(this.textBaseline){case 'middle':y+=h/2;break;case 'bottom':y+=h;break;}
return this.boundsHitTest(x,y,area);};function ImageShape(x,y,src){Shape.call(this);this.x=x;this.y=y;this.src=src;}
ImageShape.prototype=new Shape();ImageShape.constructor=ImageShape;ImageShape.prototype.hitTest=function(x,y,area){return this.boundsHitTest(x,y,area);};function GroupShape(shapes){Shape.call(this);this.shapes=shapes||[];}
GroupShape.prototype=new Shape();GroupShape.constructor=new GroupShape;GroupShape.prototype.hitTest=function(x,y,area){var shapes=this.shapes,i,sh;for(i=0;i<shapes.length;i++){sh=shapes[i];if(sh.hitTest(x,y,area)){return true;}}
return false;};GroupShape.prototype.addShape=function(shape){this.shapes.push(shape);};GroupShape.prototype.addShapes=function(shapes){jFunc.merge(this.shapes,shapes);};GroupShape.prototype.clearShapes=function(){this.shapes=[];};GroupShape.prototype.hasShapes=function(){return this.shapes.length;};GroupShape.prototype._getTooltipOrigin=function(input){return{x:input.locX,y:input.locY};};GroupShape.prototype.renderToSvg=function(svg){if(!this.visible){return;}
var svgGroup=document.createElementNS("http://www.w3.org/2000/svg",'g');if(this.clipId){svgGroup.setAttribute('clip-path',"url(#"+this.clipId+")");}
this.shapes.forEach(function(item){item.renderToSvg(svgGroup);});this.renderClasses(svgGroup);svg.appendChild(svgGroup);this.svgShape=svgGroup;};function ShapeRenderer(svg,chart){this.svg=svg;this.chart=chart;}
ShapeRenderer.prototype._getContext=function(canvas){if(canvas.getContext){return canvas.getContext("2d");}
return null;}
ShapeRenderer.emptyColor='rgba(0, 0, 0, 0)';ShapeRenderer.prototype._render=function(shapes){for(var i=0;i<shapes.length;i++){var sh=shapes[i];if(sh.renderToSvg){sh.renderToSvg(this.svg);}}
return;var hasTransform=this.offsetX||this.offsetY;var options=this.chart.options;var ctx=this.ctx;if(!jMath.isNull(options.globalAlpha)){ctx.globalAlpha=options.globalAlpha;}
if(hasTransform){ctx.save();ctx.translate(this.offsetX,this.offsetY);}
for(var i=0;i<shapes.length;i++){var sh=shapes[i];if(sh){if(sh.context&&sh.context.series&&!sh.isLegendItem&&!(sh instanceof TextBlock)){this.chart.triggerEvent('shapeRendering',sh);}
var shadowColor=sh.shadowColor;sh.shadowColor=ShapeRenderer.emptyColor;sh.render(ctx);sh.shadowColor=shadowColor;}}
if(hasTransform){ctx.restore();}}
ShapeRenderer.prototype._renderShadows=function(shapes){return;var hasTransform=this.offsetX&&this.offsetY;var options=this.chart.options;if(!options.shadows||!options.shadows.enabled){return;}
var ctx=this.ctx;if(!jMath.isNull(options.globalAlpha)){ctx.globalAlpha=options.globalAlpha;}
if(hasTransform){ctx.save();ctx.translate(this.offsetX,this.offsetY);}
for(var i=0;i<shapes.length;i++){var sh=shapes[i];if(sh&&sh.shadowColor&&sh.shadowColor!='rgba(0, 0, 0, 0)'){sh.render(ctx);}}
if(hasTransform){ctx.restore();}}
ShapeRenderer.prototype._clear=function(){var svg=this.svg;while(svg.lastChild){svg.removeChild(svg.lastChild);}}
function Title(options){this.defaults={text:'',margin:6};this.x=0;this.y=0;this.setOptions(options);}
Title.prototype._render=function(shapes){if(!this.text){return;}
this.textBlock.x=this.x+this.margin;this.textBlock.y=this.y+this.margin;this.textBlock.rotX=this.rotX;this.textBlock.rotY=this.rotY;this.textBlock.rotationAngle=this.rotationAngle;shapes.push(this.textBlock);}
Title.prototype._measure=function(){var size;if(!this.text){this.width=0;this.height=0;return;}
size=this.textBlock.measure();var l=2*this.margin;this.width=size.width+l;this.height=size.height+l;}
Title.prototype.setOptions=function(options){var settings=jFunc.extend({},this.defaults,options||{});jFunc.extend(this,settings);this.textBlock=new TextBlock(this.text);this.textBlock.textBaseline='top';if(settings.svgClass){this.textBlock.addClass(settings.svgClass);}
if(settings.class){this.textBlock.addClass(settings.class);}}
function Watermark(chart){var defs=jFunc.extend(false,{},this.defaults,{hAlign:'left',vAlign:'top'});this.defaults=defs;this.chart=chart;}
Watermark.prototype=new Title();Watermark.constructor=Watermark;Watermark.prototype._render=function(shapes){var chart=this.chart;if(this.text==null||!chart){return;}
var w=chart._width;var h=chart._height;var x=this.margin+this.textBlock.width/2;var y=this.margin;switch(this.hAlign){case 'center':x+=(w-this.width)/2;break;case 'right':x+=w-this.width;default:break;}
switch(this.vAlign){case 'center':y+=(h-this.height)/2;break;case 'bottom':y+=h-this.height;default:break;}
this.textBlock.textAlign='center';this.textBlock.x=x;this.textBlock.y=y;this.textBlock.rotX=x;this.textBlock.rotY=y;this.textBlock.rotationAngle=this.angle;shapes.push(this.textBlock);}
function Border(options){this.defaults={visible:true,lineWidth:1,lineCap:'butt',lineJoin:'miter',miterLimit:10,cornerRadius:10,padding:4,ignoreOffset:false};this.x=0;this.y=0;this.setOptions(options);}
Border.prototype._setShapeSettings=function(shape){shape.cornerRadius=this.cornerRadius;}
Border.prototype._render=function(shapes){var offset=this.visible?this.lineWidth/2:0;var x=this.x+offset;var y=this.y+offset;var w=this.width-2*offset;var h=this.height-2*offset;var rect=new Rectangle(x,y,w,h);this._setShapeSettings(rect);if(this.svgClass){rect.addClass(this.svgClass);}
shapes.push(rect);}
Border.prototype.setOptions=function(options){var settings=jFunc.extend({},this.defaults,options||{});jFunc.extend(this,settings);}
Border.prototype.getPaddings=function(){var paddings={left:0,right:0,top:0,bottom:0};if(!this.visible){return paddings;}
var offset=this.lineWidth+this.cornerRadius/2;if(this.ignoreOffset===true)
{offset=this.lineWidth;}
var left,top,right,bottom;var padding=this.padding;if(jFunc.isPlainObject(padding)){left=padding.left||0;top=padding.top||0;right=padding.right||0;bottom=padding.bottom||0;}
else{left=top=right=bottom=padding||0;}
paddings.left=left+offset;paddings.top=top+offset;paddings.right=right+offset;paddings.bottom=bottom+offset;return paddings;}
function TickMark(options){this.defaults={lineWidth:1,length:6,position:'outside',visible:true,zIndex:2,offset:0.4};this.setOptions(options);}
TickMark.prototype.isInside=function(){return this.position==='inside';}
TickMark.prototype.setOptions=function(options){var settings=jFunc.extend({},this.defaults,options||{});jFunc.extend(this,settings);}
function RangeSlider(options){this.isTouchDevice=!!('ontouchstart'in window);this.timer=new Timer(jFunc.proxy(this._arrangeElements,this));if(jFunc.isPlainObject(options)){this.setState(options);return;}
if(options){this.elem=options;jFunc.addClass(this.elem,'dvx-rangeslider ui-widget');}}
RangeSlider.defaults={orientation:'horizontal',mode:'normal',minimum:0,maximum:100,minRange:0,range:{minimum:null,maximum:null},smallChange:10,largeChange:20,reversed:false};RangeSlider.prototype={_getCorrectEvent:function(e,isTouch){if(isTouch){if(e.originalEvent&&e.originalEvent.touches){e=e.originalEvent.touches[0];}
else if(e.targetTouches){e=e.targetTouches[0];}}
return e;},_preventDefault:function(e){e.preventDefault();if(e.stopImmediatePropagation){e.stopImmediatePropagation();}},css:function(rules){var ruleName,value;for(ruleName in rules){value=rules[ruleName]+'px';jFunc.css(this.elem,ruleName,value);}
return this;},setState:function(options){var needsCreateElements=!this.hasElements||(options.orientation&&this.options.orientation!==options.orientation)||(options.mode&&this.options.mode!==options.mode);var settings=jFunc.extend(true,{},RangeSlider.defaults,options||{});settings.range=settings.range||{};var range=settings.range;range.minimum=range.minimum===null||range.minimum===undefined?settings.minimum:range.minimum;range.maximum=range.maximum===null||range.maximum===undefined?settings.maximum:range.maximum;this.options=settings;this.lastRange=jFunc.extend({},settings.range);if(!this.elem){return;}
if(settings.width!==undefined){jFunc.css(this.elem,'width',settings.width);}
if(settings.height!==undefined){jFunc.css(this.elem,'height',settings.height);}
if(needsCreateElements){this._createElements();}
this._arrange();},getState:function(){return this.options;},_createElements:function(){var elem=this.elem;this.empty();if(this.options.orientation==='horizontal'){this._createHorElements(elem);}
else{this._createVerElements(elem);}
this.hasElements=true;},_createHorElements:function(elem){var that=this;elem.insertAdjacentHTML('beforeend',"<div class='dvx-rangeslider-background-horizontal'></div>");this.bgHor=elem.lastChild;elem.insertAdjacentHTML('beforeend',"<div class='dvx-rangeslider-background-horizontal-left'></div>");this.bgHorLeft=elem.lastChild;elem.insertAdjacentHTML('beforeend',"<div class='dvx-rangeslider-background-horizontal-right'></div>");this.bgHorRight=elem.lastChild;elem.insertAdjacentHTML('beforeend',"<div class='dvx-rangeslider-arrow-left ui-corner-left ui-widget-header'></div>");this.arrowLeft=elem.lastChild;this.arrowLeft.insertAdjacentHTML('beforeend',"<span class='dvx-rangeslider-arrow-icon-left ui-icon ui-icon-circle-triangle-w'></span>");elem.insertAdjacentHTML('beforeend',"<div class='dvx-rangeslider-arrow-right ui-corner-right ui-widget-header'></div>");this.arrowRight=elem.lastChild;this.arrowRight.insertAdjacentHTML('beforeend',"<span class='dvx-rangeslider-arrow-icon-right ui-icon ui-icon-circle-triangle-e'></span>");elem.insertAdjacentHTML('beforeend',"<div class='dvx-rangeslider-slider-horizontal'></div>");this.sliderHor=elem.lastChild;elem.insertAdjacentHTML('beforeend',"<div class='dvx-rangeslider-handle-left ui-widget-header ui-state-default'></div>");this.handleLeft=elem.lastChild;this.handleLeft.insertAdjacentHTML('beforeend',"<span class='dvx-rangeslider-handle-icon-left ui-icon ui-icon-grip-solid-vertical'></span>");elem.insertAdjacentHTML('beforeend',"<div class='dvx-rangeslider-handle-right ui-widget-header ui-state-default'></div>");this.handleRight=elem.lastChild;this.handleRight.insertAdjacentHTML('beforeend',"<span class='dvx-rangeslider-handle-icon-right ui-icon ui-icon-grip-solid-vertical'></span>");if(this.options.mode!=='preview'){jFunc.addClass(this.bgHorLeft,'ui-widget-content');jFunc.addClass(this.bgHorRight,'ui-widget-content');jFunc.addClass(this.sliderHor,'ui-widget-header');}
this._attachHorEvents();},_attachHorEvents:function(){var that=this;this._addHover(this.arrowLeft);this._addHover(this.arrowRight);this._addHover(this.handleLeft);this._addHover(this.handleRight);jFunc.mouseCapture(this.bgHorLeft,{down:function(e){that._largeScrollStart(e);that.scrolling=true;that.scrollingCount=0;that._scrollLeft();},up:jFunc.proxy(that._stopScroll,this)});jFunc.mouseCapture(this.bgHorRight,{down:function(e){that._largeScrollStart(e);that.scrolling=true;that.scrollingCount=0;that._scrollRight();},up:jFunc.proxy(that._stopScroll,this)});jFunc.mouseCapture(this.arrowLeft,{down:function(e){that.scrolling=true;that.scrollingCount=0;that._scrollLeft();},up:jFunc.proxy(that._stopScroll,this)});jFunc.mouseCapture(this.arrowRight,{down:function(e){that.scrolling=true;that.scrollingCount=0;that._scrollRight();},up:jFunc.proxy(that._stopScroll,this)});jFunc.mouseCapture(this.sliderHor,{down:jFunc.proxy(that._startDragHor,this),move:jFunc.proxy(that._draggingHor,this),up:jFunc.proxy(that._stopDragHor,this)});jFunc.mouseCapture(this.handleLeft,{down:jFunc.proxy(that._startResizeLeft,this),move:jFunc.proxy(that._resizeLeft,this),up:jFunc.proxy(that._stopResizeLeft,this)});jFunc.mouseCapture(this.handleRight,{down:jFunc.proxy(that._startResizeRight,this),move:jFunc.proxy(that._resizeRight,this),up:jFunc.proxy(that._stopResizeRight,this)});if(this.isTouchDevice){jFunc.bind(this.bgHorLeft,'touchstart',function(e){that._preventDefault(e);that._largeScrollStart(e,true);that.scrolling=true;that.scrollingCount=0;that._scrollLeft();});jFunc.bind(this.bgHorLeft,'touchend',function(e){that._stopScroll();});jFunc.bind(this.bgHorRight,'touchstart',function(e){that._preventDefault(e);that._largeScrollStart(e,true);that.scrolling=true;that.scrollingCount=0;that._scrollRight();});jFunc.bind(this.bgHorRight,'touchend',function(e){that._stopScroll();});jFunc.bind(this.arrowLeft,'touchstart',function(e){that._preventDefault(e);that.scrolling=true;that.scrollingCount=0;that._scrollLeft();});jFunc.bind(this.arrowLeft,'touchend',function(e){that._stopScroll();});jFunc.bind(this.arrowRight,'touchstart',function(e){that._preventDefault(e);that.scrolling=true;that.scrollingCount=0;that._scrollRight();});jFunc.bind(this.arrowRight,'touchend',function(e){that._stopScroll();});jFunc.bind(this.sliderHor,'touchstart',function(e){that._startDragHor(e,true);});jFunc.bind(this.sliderHor,'touchmove',function(e){that._draggingHor(e,true);});jFunc.bind(this.sliderHor,'touchend',function(e){that._stopDragHor(e);});jFunc.bind(this.handleLeft,'touchstart',function(e){that._startResizeLeft(e,true);});jFunc.bind(this.handleLeft,'touchmove',function(e){that._resizeLeft(e,true);});jFunc.bind(this.handleLeft,'touchend',function(e){that._stopResizeLeft(e);});jFunc.bind(this.handleRight,'touchstart',function(e){that._startResizeRight(e,true);});jFunc.bind(this.handleRight,'touchmove',function(e){that._resizeRight(e,true);});jFunc.bind(this.handleRight,'touchend',function(e){that._stopResizeRight(e);});}},_createVerElements:function(elem){var that=this;elem.insertAdjacentHTML('beforeend',"<div class='dvx-rangeslider-background-vertical'></div>");this.bgVer=elem.lastChild;elem.insertAdjacentHTML('beforeend',"<div class='dvx-rangeslider-background-vertical-bottom'></div>");this.bgVerBottom=elem.lastChild;elem.insertAdjacentHTML('beforeend',"<div class='dvx-rangeslider-background-vertical-top'></div>");this.bgVerTop=elem.lastChild;elem.insertAdjacentHTML('beforeend',"<div class='ui-corner-bottom dvx-rangeslider-arrow-bottom ui-corner-bottom ui-widget-header'></div>");this.arrowBottom=elem.lastChild;this.arrowBottom.insertAdjacentHTML('beforeend',"<span class='dvx-rangeslider-arrow-icon-bottom ui-icon ui-icon-circle-triangle-s'></span>");elem.insertAdjacentHTML('beforeend',"<div class='dvx-rangeslider-arrow-top ui-corner-top ui-widget-header'></div>");this.arrowTop=elem.lastChild;this.arrowTop.insertAdjacentHTML('beforeend',"<span class='dvx-rangeslider-arrow-icon-top ui-icon ui-icon-circle-triangle-n'></span>");elem.insertAdjacentHTML('beforeend',"<div class='dvx-rangeslider-slider-vertical'></div>");this.sliderVer=elem.lastChild;elem.insertAdjacentHTML('beforeend',"<div class='dvx-rangeslider-handle-bottom ui-widget-header ui-state-default'></div>");this.handleBottom=elem.lastChild;this.handleBottom.insertAdjacentHTML('beforeend',"<span class='dvx-rangeslider-handle-icon-bottom ui-icon ui-icon-grip-solid-horizontal'></span>");elem.insertAdjacentHTML('beforeend',"<div class='dvx-rangeslider-handle-top ui-widget-header ui-state-default'></div>");this.handleTop=elem.lastChild;this.handleTop.insertAdjacentHTML('beforeend',"<span class='dvx-rangeslider-handle-icon-top ui-icon ui-icon-grip-solid-horizontal'></span>");if(this.options.mode!=='preview'){jFunc.addClass(this.bgVerBottom,'ui-widget-content');jFunc.addClass(this.bgVerTop,'ui-widget-content');jFunc.addClass(this.sliderVer,'ui-widget-header');}
this._attachVerEvents();},_attachVerEvents:function(){var that=this;this._addHover(this.arrowBottom);this._addHover(this.arrowTop);this._addHover(this.handleBottom);this._addHover(this.handleTop);jFunc.mouseCapture(this.bgVerBottom,{down:function(e){that._largeScrollStart(e);that.scrolling=true;that.scrollingCount=0;that._scrollLeft();},up:jFunc.proxy(that._stopScroll,this)});jFunc.mouseCapture(this.bgVerTop,{down:function(e){that._largeScrollStart(e);that.scrolling=true;that.scrollingCount=0;that._scrollRight();},up:jFunc.proxy(that._stopScroll,this)});jFunc.mouseCapture(this.arrowBottom,{down:function(e){that.scrolling=true;that.scrollingCount=0;that._scrollLeft();},up:jFunc.proxy(that._stopScroll,this)});jFunc.mouseCapture(this.arrowTop,{down:function(e){that.scrolling=true;that.scrollingCount=0;that._scrollRight();},up:jFunc.proxy(that._stopScroll,this)});jFunc.mouseCapture(this.sliderVer,{down:jFunc.proxy(that._startDragVer,this),move:jFunc.proxy(that._draggingVer,this),up:jFunc.proxy(that._stopDragVer,this)});jFunc.mouseCapture(this.handleBottom,{down:jFunc.proxy(that._startResizeBottom,this),move:jFunc.proxy(that._resizeBottom,this),up:jFunc.proxy(that._stopResizeBottom,this)});jFunc.mouseCapture(this.handleTop,{down:jFunc.proxy(that._startResizeTop,this),move:jFunc.proxy(that._resizeTop,this),up:jFunc.proxy(that._stopResizeTop,this)});if(this.isTouchDevice){jFunc.bind(this.bgVerBottom,'touchstart',function(e){that._preventDefault(e);that._largeScrollStart(e,true);that.scrolling=true;that.scrollingCount=0;that._scrollLeft();});jFunc.bind(this.bgVerBottom,'touchend',function(e){that._stopScroll();});jFunc.bind(this.bgVerTop,'touchstart',function(e){that._preventDefault(e);that._largeScrollStart(e,true);that.scrolling=true;that.scrollingCount=0;that._scrollRight();});jFunc.bind(this.bgVerTop,'touchend',function(e){that._stopScroll();});jFunc.bind(this.arrowBottom,'touchstart',function(e){that._preventDefault(e);that.scrolling=true;that.scrollingCount=0;that._scrollLeft();});jFunc.bind(this.arrowBottom,'touchend',function(e){that._stopScroll();});jFunc.bind(this.arrowTop,'touchstart',function(e){that._preventDefault(e);that.scrolling=true;that.scrollingCount=0;that._scrollRight();});jFunc.bind(this.arrowTop,'touchend',function(e){that._stopScroll();});jFunc.bind(this.sliderVer,'touchstart',function(e){that._startDragVer(e,true);});jFunc.bind(this.sliderVer,'touchmove',function(e){that._draggingVer(e,true);});jFunc.bind(this.sliderVer,'touchend',function(e){that._stopDragVer(e);});jFunc.bind(this.handleBottom,'touchstart',function(e){that._startResizeBottom(e,true);});jFunc.bind(this.handleBottom,'touchmove',function(e){that._resizeBottom(e,true);});jFunc.bind(this.handleBottom,'touchend',function(e){that._stopResizeBottom(e);});jFunc.bind(this.handleTop,'touchstart',function(e){that._startResizeTop(e,true);});jFunc.bind(this.handleTop,'touchmove',function(e){that._resizeTop(e,true);});jFunc.bind(this.handleTop,'touchend',function(e){that._stopResizeTop(e);});}},_arrange:function(){this.timer.kick();},_arrangeElements:function(){if(this.options.orientation==='horizontal'){this._arrangeHor();}
else{this._arrangeVer();}},_arrangeHor:function(){var options=this.options;var range=options.range;var elem=this.elem;var w=jFunc.outerWidth(elem);var h=jFunc.outerHeight(elem);var arrowLeftWidth=jFunc.outerWidth(this.arrowLeft);var arrowRightWidth=jFunc.outerWidth(this.arrowRight);var handleLeftWidth=jFunc.outerWidth(this.handleLeft);var handleRightWidth=jFunc.outerWidth(this.handleRight);this._outerH(this.arrowLeft,h);this._outerH(this.arrowRight,h);this.arrowRight.style.left=(w-arrowRightWidth)+'px';var x=arrowLeftWidth;var innerW=w-x-arrowRightWidth-handleLeftWidth-handleRightWidth;this.innerW=innerW;this._outerH(this.bgHor,h);this.bgHor.style.left=(x+handleLeftWidth)+'px';this._outerW(this.bgHor,innerW);var leftOffset=Math.round(this._map(range.minimum,innerW));var rightOffset=Math.round(innerW-this._map(range.maximum,innerW));if(options.reversed){var temp=leftOffset;leftOffset=rightOffset;rightOffset=temp;}
x+=leftOffset;innerW-=leftOffset+rightOffset;this._outerH(this.handleLeft,h);this.handleLeft.style.left=x+'px';this._outerH(this.handleRight,h);this.handleRight.style.left=(x+innerW+handleLeftWidth)+'px';this._outerH(this.sliderHor,h);this.sliderHor.style.left=(x+handleLeftWidth)+'px';this._outerW(this.sliderHor,innerW);this._outerH(this.bgHorLeft,h);this.bgHorLeft.style.left=arrowLeftWidth+'px';this._outerW(this.bgHorLeft,x-arrowLeftWidth);x+=innerW+handleLeftWidth+handleRightWidth;this._outerH(this.bgHorRight,h);this.bgHorRight.style.left=x+'px';this._outerW(this.bgHorRight,w-x-arrowRightWidth);},_arrangeVer:function(){var options=this.options;var range=options.range;var elem=this.elem;var w=jFunc.outerWidth(elem);var h=jFunc.outerHeight(elem);var arrowBottomHeight=jFunc.outerHeight(this.arrowBottom);var arrowTopHeight=jFunc.outerHeight(this.arrowTop);var handleBottomHeight=jFunc.outerHeight(this.handleBottom);var handleTopHeight=jFunc.outerHeight(this.handleTop);this._outerW(this.arrowBottom,w);this.arrowBottom.style.top=(h-arrowBottomHeight)+'px';this._outerW(this.arrowTop,w);var y=arrowTopHeight;var innerH=h-y-arrowBottomHeight-handleBottomHeight-handleTopHeight;this.innerH=innerH;this._outerW(this.bgVer,w);this.bgVer.style.top=(y+handleTopHeight)+'px';this._outerH(this.bgVer,innerH);var bottomOffset=Math.round(this._map(range.minimum,innerH));var topOffset=Math.round(innerH-this._map(range.maximum,innerH));if(options.reversed){var temp=bottomOffset;bottomOffset=topOffset;topOffset=temp;}
y+=topOffset;innerH-=bottomOffset+topOffset;this._outerW(this.handleTop,w);this.handleTop.style.top=y+'px';this._outerW(this.handleBottom,w);this.handleBottom.style.top=(y+innerH+handleTopHeight)+'px';this._outerW(this.sliderVer,w);this.sliderVer.style.top=(y+handleTopHeight)+'px';this._outerH(this.sliderVer,innerH);this._outerW(this.bgVerTop,w);this.bgVerTop.style.top=arrowTopHeight+'px';this._outerH(this.bgVerTop,y-arrowTopHeight);y+=innerH+handleBottomHeight+handleTopHeight;this._outerW(this.bgVerBottom,w);this.bgVerBottom.style.top=y+'px';this._outerH(this.bgVerBottom,h-y-arrowBottomHeight);},_map:function(value,w){var options=this.options;var fullRange=options.maximum-options.minimum;var dRange=value-options.minimum;var result=w*dRange/fullRange;result=Math.min(result,w);result=Math.max(result,0);return result;},_trigger:function(eventName,force){var range=this.options.range;var lastRange=this.lastRange;if(this.startMin===range.minimum&&this.startMax===range.maximum){return;}
if(!force&&lastRange.minimum===range.minimum&&lastRange.maximum===range.maximum){return;}
this.startMin=null;this.startMax=null;jFunc.trigger(this.elem,eventName,{minimum:range.minimum,maximum:range.maximum});jFunc.extend(lastRange,range);},_startChange:function(){this.valueMin=this.startMin=this.options.range.minimum;this.valueMax=this.startMax=this.options.range.maximum;},_largeScrollStart:function(e,isTouch){e=this._getCorrectEvent(e,isTouch);var x=e.pageX;var y=e.pageY;var offset=jFunc.offset(this.elem);var locX=x-offset.left;var locY=y-offset.top;var options=this.options;var fullRange=options.maximum-options.minimum;var endValue;if(this.options.orientation==='horizontal'){locX-=parseFloat(jFunc.css(this.bgHor,'left'));endValue=options.minimum+fullRange*locX/this.innerW;}
else{locY-=parseFloat(jFunc.css(this.bgVer,'top'));endValue=options.maximum-fullRange*locY/this.innerH;}
if(options.reversed){endValue=options.minimum+options.maximum-endValue;}
this.endScrollValue=endValue;},_moveLeft:function(){var options=this.options;var range=options.range.maximum-options.range.minimum;var min=options.range.minimum-options.smallChange;min=Math.max(options.minimum,min);var max=min+range;options.range.minimum=min;options.range.maximum=max;this._arrange();this._trigger('rangeChanged');if(this.endScrollValue){if((min+max)/2<this.endScrollValue){return true;}}
return false;},_moveRight:function(){var options=this.options;var range=options.range.maximum-options.range.minimum;var max=options.range.maximum+options.smallChange;max=Math.min(options.maximum,max);var min=max-range;options.range.minimum=min;options.range.maximum=max;this._arrange();this._trigger('rangeChanged');if(this.endScrollValue){if((min+max)/2>this.endScrollValue){return true;}}
return false;},_scrollLeft:function(){if(!this.scrolling){return;}
var end;if(!this.options.reversed){end=this._moveLeft();}
else{end=this._moveRight();}
if(end){this.endScrollValue=null;return;}
var msec=this.scrollingCount?100:200;this.scrollingCount++;setTimeout(jFunc.proxy(this._scrollLeft,this),msec);},_scrollRight:function(){if(!this.scrolling){return;}
var end;if(!this.options.reversed){end=this._moveRight();}
else{end=this._moveLeft();}
if(end){this.endScrollValue=null;return;}
var msec=this.scrollingCount?100:200;this.scrollingCount++;setTimeout(jFunc.proxy(this._scrollRight,this),msec);},_stopScroll:function(){this.scrolling=false;},_startDragHor:function(e,isTouch){this._preventDefault(e);e=this._getCorrectEvent(e,isTouch);this.dragging=true;this.pos=e.pageX;this._startChange();jFunc.addClass(this.sliderHor,'dvx-rangeslider-slider-horizontal-dragging');},_draggingHor:function(e,isTouch){if(!this.dragging){return;}
this._preventDefault(e);e=this._getCorrectEvent(e,isTouch);var diff=e.pageX-this.pos;var options=this.options;var range=options.maximum-options.minimum;var valueDiff=range*diff/this.innerW;if(options.reversed){valueDiff=-valueDiff;}
valueDiff=Math.max(valueDiff,options.minimum-this.valueMin);valueDiff=Math.min(valueDiff,options.maximum-this.valueMax);options.range.minimum=this.valueMin+valueDiff;options.range.maximum=this.valueMax+valueDiff;this._arrange();this._trigger('rangeChanging');},_stopDragHor:function(e){this._preventDefault(e);this.dragging=false;jFunc.removeClass(this.sliderHor,'dvx-rangeslider-slider-horizontal-dragging');this._trigger('rangeChanged',true);this.valueMin=null;this.valueMax=null;},_startDragVer:function(e,isTouch){this._preventDefault(e);e=this._getCorrectEvent(e,isTouch);this.dragging=true;this.pos=e.pageY;this._startChange();jFunc.addClass(this.sliderVer,'dvx-rangeslider-slider-vertical-dragging');},_draggingVer:function(e,isTouch){if(!this.dragging){return;}
this._preventDefault(e);e=this._getCorrectEvent(e,isTouch);var diff=this.pos-e.pageY;var options=this.options;var range=options.maximum-options.minimum;var valueDiff=range*diff/this.innerH;if(options.reversed){valueDiff=-valueDiff;}
valueDiff=Math.max(valueDiff,options.minimum-this.valueMin);valueDiff=Math.min(valueDiff,options.maximum-this.valueMax);options.range.minimum=this.valueMin+valueDiff;options.range.maximum=this.valueMax+valueDiff;this._arrange();this._trigger('rangeChanging');},_stopDragVer:function(e,isTouch){this._preventDefault(e);this.dragging=false;jFunc.removeClass(this.sliderVer,'dvx-rangeslider-slider-vertical-dragging');this._trigger('rangeChanged',true);this.valueMin=null;this.valueMax=null;},_startResizeLeft:function(e,isTouch){this._preventDefault(e);e=this._getCorrectEvent(e,isTouch);this.resize=true;this.pos=e.pageX;this._startChange();},_resizeLeft:function(e,isTouch){if(!this.resize){return;}
this._preventDefault(e);e=this._getCorrectEvent(e,isTouch);var diff=e.pageX-this.pos;var options=this.options;var range=options.maximum-options.minimum;var valueDiff=range*diff/this.innerW;var minRange=this.options.minRange;if(!options.reversed){valueDiff=Math.max(valueDiff,options.minimum-this.valueMin);valueDiff=Math.min(valueDiff,options.range.maximum-this.valueMin-minRange);options.range.minimum=this.valueMin+valueDiff;}
else{valueDiff=-valueDiff;valueDiff=Math.min(valueDiff,options.maximum-this.valueMax);valueDiff=Math.max(valueDiff,options.range.minimum-this.valueMax+minRange);options.range.maximum=this.valueMax+valueDiff;}
this._arrange();this._trigger('rangeChanging');},_stopResizeLeft:function(e){this._preventDefault(e);this.resize=false;this._trigger('rangeChanged',true);this.valueMin=null;this.valueMax=null;},_startResizeBottom:function(e,isTouch){this._preventDefault(e);e=this._getCorrectEvent(e,isTouch);this.resize=true;this.pos=e.pageY;this._startChange();},_resizeBottom:function(e,isTouch){if(!this.resize){return;}
this._preventDefault(e);e=this._getCorrectEvent(e,isTouch);var diff=this.pos-e.pageY;var options=this.options;var minRange=this.options.minRange;var range=options.maximum-options.minimum;var valueDiff=range*diff/this.innerH;if(!options.reversed){valueDiff=Math.max(valueDiff,options.minimum-this.valueMin);valueDiff=Math.min(valueDiff,options.range.maximum-this.valueMin-minRange);options.range.minimum=this.valueMin+valueDiff;}
else{valueDiff=-valueDiff;valueDiff=Math.min(valueDiff,options.maximum-this.valueMax);valueDiff=Math.max(valueDiff,options.range.minimum-this.valueMax+minRange);options.range.maximum=this.valueMax+valueDiff;}
this._arrange();this._trigger('rangeChanging');},_stopResizeBottom:function(e){this._preventDefault(e);this.resize=false;this._trigger('rangeChanged',true);this.valueMin=null;this.valueMax=null;},_startResizeRight:function(e,isTouch){this._preventDefault(e);e=this._getCorrectEvent(e,isTouch);this.resize=true;this.pos=e.pageX;this._startChange();},_resizeRight:function(e,isTouch){if(!this.resize){return;}
this._preventDefault(e);e=this._getCorrectEvent(e,isTouch);var diff=e.pageX-this.pos;var options=this.options;var minRange=this.options.minRange;var range=options.maximum-options.minimum;var valueDiff=range*diff/this.innerW;if(!options.reversed){valueDiff=Math.min(valueDiff,options.maximum-this.valueMax);valueDiff=Math.max(valueDiff,options.range.minimum-this.valueMax+minRange);options.range.maximum=this.valueMax+valueDiff;}
else{valueDiff=-valueDiff;valueDiff=Math.max(valueDiff,options.minimum-this.valueMin);valueDiff=Math.min(valueDiff,options.range.maximum-this.valueMin-minRange);options.range.minimum=this.valueMin+valueDiff;}
this._arrange();this._trigger('rangeChanging');},_stopResizeRight:function(e){this._preventDefault(e);this.resize=false;this._trigger('rangeChanged',true);this.valueMin=null;this.valueMax=null;},_startResizeTop:function(e,isTouch){this._preventDefault(e);e=this._getCorrectEvent(e,isTouch);this.resize=true;this.pos=e.pageY;this._startChange();},_resizeTop:function(e,isTouch){if(!this.resize){return;}
this._preventDefault(e);e=this._getCorrectEvent(e,isTouch);var diff=this.pos-e.pageY;var options=this.options;var minRange=this.options.minRange;var range=options.maximum-options.minimum;var valueDiff=range*diff/this.innerH;if(!options.reversed){valueDiff=Math.min(valueDiff,options.maximum-this.valueMax);valueDiff=Math.max(valueDiff,options.range.minimum-this.valueMax+minRange);options.range.maximum=this.valueMax+valueDiff;}
else{valueDiff=-valueDiff;valueDiff=Math.max(valueDiff,options.minimum-this.valueMin);valueDiff=Math.min(valueDiff,options.range.maximum-this.valueMin-minRange);options.range.minimum=this.valueMin+valueDiff;}
this._arrange();this._trigger('rangeChanging');},_stopResizeTop:function(e){this._preventDefault(e);this.resize=false;this._trigger('rangeChanged',true);this.valueMin=null;this.valueMax=null;},_outerH:function(elem,h){var side=["Top","Bottom"];jFunc.each(side,function(){h-=parseFloat(jFunc.css(elem,"border"+this+"Height"))||0;});h=Math.max(0,h);elem.style['height']=h+'px';return elem;},_outerW:function(elem,w){var side=["Left","Right"];jFunc.each(side,function(){w-=parseFloat(jFunc.css(elem,"border"+this+"Width"))||0;});w=Math.max(0,w);elem.style['width']=w+'px';return elem;},_addHover:function(elem){jFunc.bind(elem,'mouseenter',function(event){jFunc.addClass(this,"ui-state-hover");});jFunc.bind(elem,'mouseleave',function(event){jFunc.removeClass(this,"ui-state-hover");});},destroy:function(){var parentNode=this.elem.parentNode;if(parentNode){parentNode.removeChild(this.elem);}},empty:function(){this.elem.innerHTML='';},write:function(element){jFunc.ready(function(){if(typeof element==="string"){element=document.getElementById(element);}
if(!element){return;}
element.insertAdjacentHTML('beforeend',"<div class='dvx-rangeslider dvx-rangeslider-stretch ui-widget'></div>");this.elem=element.lastChild;this.setState(this.getState());}.bind(this));}};function DefaultChartTool(view){DefaultTool.call(this,view);}
DefaultChartTool.prototype=new DefaultTool();DefaultChartTool.constructor=DefaultChartTool;DefaultChartTool.prototype.mouseWheel=function(e){e=e.originalEvent||e;var deltaY=e.wheelDelta||-e.detail;if(!deltaY){return;}
var delta=deltaY>0?1:-1;var mode=this.view.options.mouseWheelInteractionMode;if(mode!='scrolling'&&mode!='zooming'){return;}
var axes=this.view.axes.getZoomableAxes();if(axes.length>0){e.preventDefault();}
for(var i=0;i<axes.length;i++){if(mode=='scrolling'){axes[i]._mouseWheelScroll(delta);}
else{axes[i]._mouseWheelZoom(delta);}}
this.view.partialDelayedUpdate();}
function ZoomingTool(view){Tool.call(this,view);}
ZoomingTool.prototype=new Tool();ZoomingTool.constructor=ZoomingTool;ZoomingTool.prototype.canStart=function(e){if(this.view.options.mouseInteractionMode!=='zooming'){return false;}
if(!this.view.gridArea.isMouseOver){return false;}
if(this.view.canZoom){e.preventDefault();return true;}
return false;}
ZoomingTool.prototype.start=function(){this.view._clearRenderers();this.zoomableAxes=this.view.axes.getZoomableAxes();this.mouseInput1=this.view.mouseInput;}
ZoomingTool.prototype.mouseMove=function(e){var mouseInput2=this.view.mouseInput;this.view._renderSelectionRect(this.mouseInput1,mouseInput2);}
ZoomingTool.prototype.mouseUp=function(e){var mouseInput1=this.mouseInput1;var mouseInput2=this.view.mouseInput;var dx=Math.abs(mouseInput1.locX-mouseInput2.locX);var dy=Math.abs(mouseInput1.locY-mouseInput2.locY);if(dx>1||dy>1){var axes=this.zoomableAxes;for(var i=0;i<axes.length;i++){axes[i]._scaleToRegion(mouseInput1,mouseInput2);}
this.view.partialDelayedUpdate();}
this.stopTool();}
ZoomingTool.prototype.keyDown=function(e){if(e.which===27){e.preventDefault();this.stopTool();}}
ZoomingTool.prototype.stop=function(){this.zoomableAxes=null;this.view._clearSelectionRect();Tool.prototype.stop.call(this);}
function PanningTool(view){Tool.call(this,view);}
PanningTool.prototype=new Tool();PanningTool.constructor=PanningTool;PanningTool.prototype.canStart=function(e){if(this.view.options.mouseInteractionMode!=='panning'){return false;}
if(!this.view.gridArea.isMouseOver){return false;}
if(this.view.canZoom){e.preventDefault();return true;}
return false;}
PanningTool.prototype.start=function(){this.zoomableAxes=this.view.axes.getZoomableAxes();this.oldMouseInput=this.view.mouseInput;}
PanningTool.prototype.mouseMove=function(e){var zoomableAxes=this.zoomableAxes;var mouseInput=this.view.mouseInput;var axes=this.zoomableAxes;var dx=this.oldMouseInput.locX-mouseInput.locX;var dy=this.oldMouseInput.locY-mouseInput.locY;for(var i=0;i<axes.length;i++){axes[i]._moveVisibleRange(dx,dy);}
this.oldMouseInput=mouseInput;this.view.partialDelayedUpdate();}
PanningTool.prototype.mouseUp=function(e){this.stopTool();}
PanningTool.prototype.stop=function(){this.zoomableAxes=null;Tool.prototype.stop.call(this);}
function TouchTool(view){Tool.call(this,view);}
TouchTool.prototype=new Tool();TouchTool.constructor=TouchTool;TouchTool.prototype.canStart=function(e){if(!this.view.canZoom){return false;}
var touches=this.view.touchInput;for(var i=0;i<touches.length;i++){var touch=touches[i];if(!this.view.gridArea._contains(touch.locX,touch.locY)){return false;}}
e.preventDefault();return true;};TouchTool.prototype.start=function(){this.zoomableAxes=this.view.axes.getZoomableAxes();this.oldTouchInput=this.view.touchInput;};TouchTool.prototype.touchMove=function(e){e.preventDefault();if(!this.oldTouchInput){this.oldTouchInput=this.view.touchInput;return;}
var len=this.view.touchInput.length;if(len>2){return;}
var isScaling=false;if(len===2){isScaling=true;}
if(this.isScaling!==isScaling){this.oldTouchInput=this.view.touchInput;this.isScaling=isScaling;}
if(isScaling){this.doScale(e);}
else{this.doPan(e);}};TouchTool.prototype.touchEnd=function(e){if(this.view.touchInput.length===0){this.stopTool();}
else{this.oldTouchInput=null;}};TouchTool.prototype.stop=function(){this.zoomableAxes=null;this.oldTouchInput=null;Tool.prototype.stop.call(this);};TouchTool.prototype.doPan=function(e){var axes=this.zoomableAxes;var touches=this.view.touchInput;var touch=touches[0];var oldTouch=this.oldTouchInput[0];var dx=oldTouch.locX-touch.locX;var dy=oldTouch.locY-touch.locY;for(var i=0;i<axes.length;i++){axes[i]._moveVisibleRange(dx,dy);}
this.oldTouchInput=touches;this.view.partialDelayedUpdate();};TouchTool.prototype.doScale=function(e){var touches=this.view.touchInput;if(!this.oldTouchInput||this.oldTouchInput.length!==2){this.oldTouchInput=touches;return;}
var oldTouchInput=this.getTwoTouchPointData(this.oldTouchInput);var touchInput=this.getTwoTouchPointData(touches);var axes=this.zoomableAxes;for(var i=0;i<axes.length;i++){axes[i]._scaleVisibleRange(oldTouchInput,touchInput);}
this.oldTouchInput=touches;this.view.partialDelayedUpdate();};TouchTool.prototype.getTwoTouchPointData=function(touches){var input={x1:touches[0].locX,y1:touches[0].locY,x2:touches[1].locX,y2:touches[1].locY};input.centerX=(input.x1+input.x2)/2;input.centerY=(input.y1+input.y2)/2;input.dx=Math.abs(input.x2-input.x1);input.dy=Math.abs(input.y2-input.y1);return input;};function Chart(options){this.pluginClass='dvx-chart';this.tooltipClass='dvx-chart-tooltip';SvgControl.call(this,options);this.timer=new Timer(jFunc.proxy(this.partialUpdate,this));this.storyboard=new Storyboard(jFunc.proxy(this._renderShapes,this));this.defaultTool=new DefaultChartTool(this);this.currentTool=this.defaultTool;this.mouseDownTools.push(new PanningTool(this));this.mouseDownTools.push(new ZoomingTool(this));this.touchMoveTools.push(new TouchTool(this));if(jFunc.isPlainObject(options)){this.setState(options);}
return this;}
Chart.prototype=new SvgControl();Chart.constructor=Chart;Chart.defaults={title:{margin:8,svgClass:'dvx-chart-title'},defaultWidth:'400px',defaultHeight:'250px',tooltips:{disabled:false,type:'normal',borderColor:'auto',snapArea:25},crosshairs:{enable:false,snapToDataPoints:true,hLine:{visible:true},vLine:{visible:true}},globalAlpha:1,mouseInteractionMode:'panning',mouseWheelInteractionMode:'zooming',shadows:{enabled:false,shadowColor:'#cccccc',shadowBlur:8,shadowOffsetX:2,shadowOffsetY:2},watermark:{hAlign:'right',vAlign:'bottom',svgClass:'dvx-chart-watermark'},noDataMessage:{text:'No data available',svgClass:'dvx-chart-no-data-text'},exportConfig:{server:'http://www.dvxcharts.com/export/default.aspx',method:'post'}};Chart.labelFormatter=function(format,val){if(!format){return String(val);}
return ChartSprintf(format,val);};Chart.prototype.getLabelFormatter=function(){return Chart.labelFormatter;}
Chart.prototype._createElements=function(elem){SvgControl.prototype._createElements.call(this,elem);this.gridArea=new GridArea(this);this.border=new Border();this.border.svgClass='dvx-chart-area';this.title=new Title();this.title.chart=this;this.legend=new Legend();this.legend.chart=this;this.watermark=new Watermark(this);this.toolbar=new ChartToolbar(this);this.noDataMessage=new Title();this.noDataMessage.chart=this;this.series=new SeriesArray(this);this.axes=new AxesArray(this);}
Chart.prototype._processOptions=function(options){var me=this;options=options||{};me.arrDataSource=null;var dataSource=options.dataSource;if(dataSource&&jFunc.isArray(dataSource)){me.arrDataSource=dataSource;me._setOptions(options);return;}
if(jFunc.isPlainObject(dataSource)&&dataSource.ajax){var ajax=dataSource.ajax;var config={};jFunc.extend(config,ajax);config.success=function(msg){me.arrDataSource=msg.hasOwnProperty("d")?msg.d:msg;}
var ajaxComplete=config.complete;config.complete=function(){if(ajaxComplete){ajaxComplete();}
me._setOptions(options);}
jFunc.ajax(config);return;}
me._setOptions(options);}
Chart.prototype.setState=function(state){this._state=state;this._processOptions(state);}
Chart.prototype._setOptions=function(options){var settings=options||{};if(typeof settings.title==='string'){settings.title={text:settings.title};}
settings.title=settings.title||{};settings.title=jFunc.extend({},Chart.defaults.title,settings.title);settings.crosshairs=jFunc.extend(true,{},Chart.defaults.crosshairs,settings.crosshairs);settings.tooltips=jFunc.extend(true,{},Chart.defaults.tooltips,settings.tooltips);settings.shadows=jFunc.extend(true,{},Chart.defaults.shadows,settings.shadows);settings.watermark=jFunc.extend(true,{},Chart.defaults.watermark,settings.watermark);if(typeof settings.noDataMessage==='string'){settings.noDataMessage={text:settings.noDataMessage};}
settings.noDataMessage=jFunc.extend(true,{},Chart.defaults.noDataMessage,settings.noDataMessage);settings.globalAlpha=jMath.isNull(settings.globalAlpha)?Chart.defaults.globalAlpha:settings.globalAlpha;settings.mouseInteractionMode=settings.mouseInteractionMode||Chart.defaults.mouseInteractionMode;settings.mouseWheelInteractionMode=settings.mouseWheelInteractionMode||Chart.defaults.mouseWheelInteractionMode;this.hasCrosshairs=settings.crosshairs&&settings.crosshairs.enable;this.hasTooltips=settings.tooltips&&!settings.tooltips.disabled;this.options=settings;if(!this.getDOMElement()){return;}
SvgControl.prototype._setOptions.call(this,settings);this.border.setOptions(settings.border);this.title.setOptions(settings.title);this.legend.setOptions(settings.legend);this.watermark.setOptions(settings.watermark);this.toolbar.setOptions(settings.toolbar);this.noDataMessage.setOptions(settings.noDataMessage);this.series.setOptions(settings.series);this.axes.setOptions(settings.axes);this.update();};Chart.prototype._updateChartSizes=function(){var domElement=this.getDOMElement();this._setSizes(domElement);this._width=Math.floor(jFunc.width(domElement));this._height=Math.floor(jFunc.height(domElement));};Chart.prototype.isServerFiltering=function(){var dataSource=this.options.dataSource;if(!dataSource){return false;}
if(dataSource.serverFiltering===true&&jFunc.isPlainObject(dataSource)&&dataSource.ajax){return true;}
return false;}
Chart.prototype._processAsyncData=function(){if(!this.isServerFiltering()){return;}
var that=this;var dataSource=that.options.dataSource;that.arrDataSource=null;var ajax=dataSource.ajax;var config={};jFunc.extend(config,ajax);config.url+='?';var axes=this.axes.getZoomableAxes();for(var i=0;i<axes.length;i++){var axis=axes[i];axis.minimum=axis.actualMinimum;axis.maximum=axis.actualMaximum;if(i>0){config.url+='&';}
if(axis.name){config.url+='name='+axis.name+'&';}
var timeZoneOffset=0;if(axis.DataType=='DateTimeAxis'){timeZoneOffset=new Date().getTimezoneOffset()*60*1000;}
config.url+='start='+(axis.visibleMinimum-timeZoneOffset)+'&end='+(axis.visibleMaximum-timeZoneOffset);}
config.success=function(msg){that.arrDataSource=msg.hasOwnProperty("d")?msg.d:msg;}
var ajaxComplete=config.complete;config.complete=function(){if(ajaxComplete){ajaxComplete();}
that.series._processData();that.update();}
jFunc.ajax(config);}
Chart.prototype._mouseEnter=function(e){SvgControl.prototype._mouseEnter.call(this,e);this.toolbar.show();}
Chart.prototype._mouseLeave=function(e){SvgControl.prototype._mouseLeave.call(this,e);this.toolbar.hide();}
Chart.prototype._measure=function(){this.title._measure();this.legend._measure();this.watermark._measure();this.noDataMessage._measure();return this.axes._measure();};Chart.prototype._arrange=function(){var w=this._width-1;var h=this._height-1;this.border.width=w;this.border.height=h;var paddings=this.border.getPaddings();w-=paddings.left+paddings.right;h-=paddings.top+paddings.bottom;var x=paddings.left;var y=paddings.top+this.title.height;var axesW=this.axes._getTotalWidth();var axesH=this.axes._getTotalHeight();if(this.legend._isHorizontal()){this.gridArea.width=Math.round(w-axesW);this.gridArea.height=Math.round(h-(axesH+this.title.height+this.legend.height));}
else{this.gridArea.width=Math.round(w-(axesW+this.legend.width));this.gridArea.height=Math.round(h-(axesH+this.title.height));}
switch(this.legend.location){case 'left':x+=this.legend.width;break;case 'top':y+=this.legend.height;break;}
var verCrossingAxis=this.axes.verCrossingAxis;var horCrossingAxis=this.axes.horCrossingAxis;var lAxes=this.axes._getAxesInLoc('left');for(var i=lAxes.length-1;i>=0;i--){var axis=lAxes[i];axis.x=x;axis.height=this.gridArea.height;if(!horCrossingAxis){x=Math.ceil(x+axis.width);}}
this.gridArea.x=x;x+=this.gridArea.width;var rAxes=this.axes._getAxesInLoc('right');for(var i=0;i<rAxes.length;i++){var axis=rAxes[i];axis.x=x;axis.height=this.gridArea.height;if(!horCrossingAxis){x=Math.ceil(x+axis.width);}}
var tAxes=this.axes._getAxesInLoc('top');for(var i=tAxes.length-1;i>=0;i--){var axis=tAxes[i];axis.x=this.gridArea.x;axis.y=y;axis.width=this.gridArea.width;if(!verCrossingAxis){y=Math.ceil(y+axis.height);}}
this.gridArea.y=y;y+=this.gridArea.height;var bAxes=this.axes._getAxesInLoc('bottom');for(var i=0;i<bAxes.length;i++){var axis=bAxes[i];axis.x=this.gridArea.x;axis.y=y;axis.width=this.gridArea.width;if(!verCrossingAxis){y=Math.ceil(y+axis.height);}}
var vertAxes=lAxes.concat(rAxes);for(var i=0;i<vertAxes.length;i++){var axis=vertAxes[i];axis.y=this.gridArea.y;}
var bAxes=this.axes._getAxesInLoc('radial');for(var i=0;i<bAxes.length;i++){var axis=bAxes[i];axis.x=this.gridArea.x;axis.y=this.gridArea.y;axis.width=this.gridArea.width;axis.height=this.gridArea.height;}
this.title.x=paddings.left+(w-this.title.width)/2;this.title.y=paddings.top;switch(this.legend.location){case 'bottom':this.legend.x=paddings.left+(w-this.legend.width)/2;this.legend.y=paddings.top+h-this.legend.height;break;case 'left':this.legend.x=paddings.left;this.legend.y=paddings.top+this.gridArea.y+(this.gridArea.height-this.legend.height)/2.0;break;case 'top':this.legend.x=paddings.left+(w-this.legend.width)/2;this.legend.y=paddings.top+this.title.height;break;case 'right':default:this.legend.x=paddings.left+w-this.legend.width;this.legend.y=this.gridArea.y+(this.gridArea.height-this.legend.height)/2.0;break;}
this.gridArea._arrange();this.axes._arrange();this.legend._arrange();this.noDataMessage.x=paddings.left+(w-this.noDataMessage.width)/2;this.noDataMessage.y=paddings.top+(h-this.noDataMessage.height)/2;};Chart.prototype.setPointerAt=function(input){if(!input){this._clearRenderers();return;}
var e={locX:input.locX,locY:input.locY};this.mouseInput=e;this._processMouseMove(e);}
Chart.prototype._processMouseMove=function(e){var input=this.mouseInput;if(this.gridArea){var contains=this.gridArea._contains(input.locX,input.locY);if(this.gridArea.isMouseOver!=contains){if(!contains){this._clearRenderers();}
this.gridArea.isMouseOver=contains;}}
this._processMouseEvents();if(this.gridArea.isMouseOver){this._processTooltips(input);this._initCrosshairs(input);}
else{if(this.hasCrosshairs){this.triggerEvent('crosshairsMove',null);}}}
Chart.prototype._initTouchInput=function(e){SvgControl.prototype._initTouchInput.call(this,e);var touch=this.touchInput[0];if(!this.gridArea||!touch){return;}
var contains=this.gridArea._contains(touch.locX,touch.locY);if(this.gridArea.isTouchOver!=contains){if(!contains){this._clearRenderers();}
this.gridArea.isTouchOver=contains;}}
Chart.prototype._processTouchStart=function(e){if(!this.gridArea.isTouchOver){return;}
var touch=this.touchInput[0];this._processTooltips(touch);this._initCrosshairs(touch);}
Chart.prototype._processTouchMove=function(e){if(!this.gridArea.isTouchOver){return;}
var touch=this.touchInput[0];this._processTouchEvents();this._processTooltips(touch);this._initCrosshairs(touch);}
Chart.prototype._clearRenderers=function(){SvgControl.prototype._clearRenderers.call(this);this._clearCrosshairs();if(this._oldChShape){this._oldChShape=null;}};Chart.prototype._getClosestShapeAtX=function(shapes,input){var result=null;var dx=maxVl;var x=input.locX;for(var i=shapes.length-1;i>=0;i--){var shape=shapes[i];if(!shape.context||shape.isLegendItem||shape.isAxisLabel){continue;}
var series=shape.context.series;if(series.tooltips&&series.tooltips.disabled){continue;}
var center=shape.getCenter(input);var diff=Math.abs(center.x-x);if(dx>diff){dx=diff;result=shape;if(center.mark){result=center.mark;}}}
return result;};Chart.prototype._getClosestShapeAtY=function(shapes,input){var result=null;var dy=maxVl;var y=input.locY;for(var i=shapes.length-1;i>=0;i--){var shape=shapes[i];var centerY=shape.getCenter(input).y;var diff=Math.abs(centerY-y);if(dy>diff){dy=diff;result=shape;}}
return result;};Chart.prototype._getShapesAtX=function(x,shape,shapes,input){var result=[shape];var series=[shape.context.series];var diffs=[0];for(var i=0;i<shapes.length;i++){var sh=shapes[i];if(sh==shape||!sh.context||sh.isLegendItem||sh.isAxisLabel){continue;}
var ser=sh.context.series;var index=jFunc.inArray(ser,series);if(index==0){continue;}
var center=sh.getCenter(input);var diff=Math.abs(x-center.x);if(diff>=3){continue;}
if(index!=-1){var prevDiff=diffs[index];if(diff<prevDiff){if(center.mark){result[index]=center.mark;}
else{result[index]=sh;}
diffs[index]=diff;}
continue;}
if(center.mark){result.push(center.mark);}
else{result.push(sh);}
series.push(ser);diffs.push(diff);}
return result;};Chart.prototype._getTooltipShapes=function(x,y,area,input){var shapes=null,series;var tooltips=this.options.tooltips;if(tooltips.type==='shared'){var closestShape=this._getClosestShapeAtX(this.shapes,input);if(closestShape){shapes=this._getShapesAtX(closestShape.getCenter(input).x,closestShape,this.shapes,input);}}
else{shapes=SvgControl.prototype._getTooltipShapes.call(this,x,y,area,input);}
if(shapes){series=this.series.items;shapes.sort(function(a,b){var index1=jFunc.inArray(a.context.series,series);var index2=jFunc.inArray(b.context.series,series);return index1-index2;});}
return shapes;};Chart.prototype._getTooltip=function(shape){return shape.context.series._getTooltip(shape.context);};Chart.prototype._getTooltipText=function(shapes){var text='';var that=this;var axes=[];for(var i=0;i<shapes.length;i++){var sh=shapes[i];if(!sh.context.series){continue;}
var xAxis=sh.context.series.realXAxis;if(xAxis&&sh.context.x&&jFunc.inArray(xAxis,axes)==-1){var xText=xAxis._getTooltip(sh.context.x);text+=xText;axes.push(xAxis);}}
jFunc.each(shapes,function(){var tText=that._getTooltip(this);if(tText){text+=tText;}});return text;};Chart.prototype._initCrosshairs=function(input){if(!this.hasCrosshairs){return;}
var crosshairs=this.options.crosshairs;var context={};var x=input.locX;var y=input.locY;if(crosshairs.snapToDataPoints){var closestShape=this._getClosestShapeAtX(this.shapes,input);if(closestShape){var newShapes=this._getShapesAtX(closestShape.getCenter(input).x,closestShape,this.shapes,input);closestShape=this._getClosestShapeAtY(newShapes,input);if(closestShape){var pt=closestShape.getCenter(input);x=pt.x;y=pt.y;if(this._oldChShape!==closestShape){this._oldChShape=closestShape;jFunc.extend(context,closestShape.context);context.locX=x;context.locY=y;this.triggerEvent('crosshairsMove',context);}}}}
else{context.x=x;context.y=y;this.triggerEvent('crosshairsMove',context);}
this._renderCrosshairs(x,y);};Chart.prototype._renderCrosshairs=function(x,y){if(!this.hasCrosshairs){return;}
var gridArea=this.gridArea,vLine=this.vLine,hLine=this.hLine,crosshairs=this.options.crosshairs;if(!vLine){vLine=this.vLine=new Line();vLine.addClasses(['dvx-chart-crosshair','dvx-chart-crosshair-v']);}
if(!hLine){hLine=this.hLine=new Line();hLine.addClasses(['dvx-chart-crosshair','dvx-chart-crosshair-h']);}
hLine.remove();vLine.remove();if(!gridArea._contains(x,y)){return;}
if(crosshairs.hLine&&crosshairs.hLine.visible){hLine.x1=gridArea.x;hLine.y1=y;hLine.x2=gridArea.x+gridArea.width;hLine.y2=y;hLine.renderToSvg(this.shapeRenderer.svg);}
if(crosshairs.vLine&&crosshairs.vLine.visible){vLine.x1=x;vLine.y1=gridArea.y;vLine.x2=x;vLine.y2=gridArea.y+gridArea.height;vLine.renderToSvg(this.shapeRenderer.svg);}};Chart.prototype._clearCrosshairs=function(){if(this.vLine){this.vLine.remove();}
if(this.hLine){this.hLine.remove();}}
Chart.prototype._renderSelectionRect=function(input1,input2){var selectionRect=this.selectionRect;if(!selectionRect){selectionRect=this.selectionRect=new Rectangle();selectionRect.addClass('dvx-chart-selection-rect');}
var gridArea=this.gridArea;var x1=gridArea.fitHor(input1.locX);var y1=gridArea.fitVer(input1.locY);var x2=gridArea.fitHor(input2.locX);var y2=gridArea.fitVer(input2.locY);if(!this.canZoomVer){y1=gridArea.y;y2=gridArea.y+gridArea.height;}
else if(!this.canZoomHor){x1=gridArea.x;x2=gridArea.x+gridArea.width;}
var x=Math.min(x1,x2);var y=Math.min(y1,y2);var w=Math.abs(x1-x2);var h=Math.abs(y1-y2);selectionRect.x=x;selectionRect.y=y;selectionRect.width=w;selectionRect.height=h;selectionRect.remove();selectionRect.renderToSvg(this.shapeRenderer.svg);}
Chart.prototype._clearSelectionRect=function(){this.selectionRect.remove();}
Chart.prototype._initZooming=function(){var that=this;that.canZoomVer=false;that.canZoomHor=false;jFunc.each(this.axes.items,function(){if(this.zoomEnabled){if(this.location!=='radial'){if(this.isAxisVertical){that.canZoomVer=true;}
else{that.canZoomHor=true;}}}});this.canZoom=this.canZoomVer||this.canZoomHor;}
Chart.prototype._triggerShapeEvent=function(name,shape){if(shape.isLegendItem){this.legend._handleEvent(name,shape);}
else if(shape.context.series){shape.context.series._handleEvent(name,shape);}
var start=shape.isLegendItem?'legendItem':'dataPoint';if(shape.isAxisLabel){start='axisLabel';}
shape.context.shape=shape;this.triggerEvent(start+name,shape.context);}
Chart.prototype.setOptions=function(options){};Chart.prototype._createShapes=function(){var contextShapes=[];var gArea=this.gridArea;var shapes=[];var gridAreaShapes=[];var axesShapesRenderContext={shapes:[],postShapes:[],contextShapes:[]};var nonGridAreaSerShapesRenderContext={shapes:[],contextShapes:[]};var serShapesRenderContext={shapes:[],contextShapes:[]};var legendShapesRenderContext={shapes:[],contextShapes:[]};var gaZIndexShapes=[];this.border._render(shapes);if(this.hasData){this.title._render(shapes);this.legend._render(legendShapesRenderContext);gArea._render(gridAreaShapes);this.axes._render(axesShapesRenderContext);this.series._render(nonGridAreaSerShapesRenderContext);gArea._renderSeries(serShapesRenderContext);jFunc.merge(contextShapes,serShapesRenderContext.contextShapes);jFunc.merge(contextShapes,nonGridAreaSerShapesRenderContext.contextShapes);jFunc.merge(contextShapes,legendShapesRenderContext.contextShapes);jFunc.merge(contextShapes,axesShapesRenderContext.contextShapes);jFunc.merge(shapes,legendShapesRenderContext.shapes);}
else{this.noDataMessage._render(shapes);}
var ws=[];this.watermark._render(ws);this._addTrialWatermark(ws);this.shapes=contextShapes;var allShapes={shapes:shapes,ws:ws,gaShapes:gridAreaShapes,axesShapes:axesShapesRenderContext.shapes,postAxesShapes:axesShapesRenderContext.postShapes,nonGridAreaSerShapes:nonGridAreaSerShapesRenderContext.shapes,serShapes:serShapesRenderContext.shapes,gaZIndexShapes:gaZIndexShapes};this.allShapes=allShapes;};Chart.prototype._renderShapes=function(){var shapeRenderer=this.shapeRenderer,w=this._width,h=this._height;shapeRenderer._clear();var allShapes=this.allShapes;shapeRenderer._render(allShapes.shapes);if(this.hasData){var gaShapes=allShapes.gaShapes;shapeRenderer._render(gaShapes);var serShapes=allShapes.serShapes;if(serShapes.length>0){this.triggerEvent('seriesShapesRendering',[serShapes]);}
shapeRenderer._render(serShapes);shapeRenderer._render(allShapes.gaZIndexShapes);shapeRenderer._render(allShapes.axesShapes);var nonGridAreaSerShapes=allShapes.nonGridAreaSerShapes;if(nonGridAreaSerShapes.length>0){this.triggerEvent('seriesShapesRendering',[nonGridAreaSerShapes]);}
shapeRenderer._render(nonGridAreaSerShapes);shapeRenderer._render(allShapes.postAxesShapes);}
shapeRenderer._render(allShapes.ws);};Chart.prototype.stringFormat=function(val,format){var dateFormatter=jFunc.getDateFormatter();if(jFunc.type(val)==='date'){return dateFormatter(val,format);}
return ChartSprintf(format,val);}
Chart.prototype.render=function(){this._clearRenderers();this._createShapes();this._renderShapes();}
Chart.prototype.findAxis=function(name){if(this.axes){return this.axes.find(name);}};Chart.prototype.update=function(){this.storyboard.stop();this._updateChartSizes();this.hasData=this.series.hasData();this.series._initData();this.axes._initSeriesAxes();this.axes._initSeries();this._initZooming();this.axes._initRanges();this.series._initVisibleData();this.legend._init();this.axes._resetWH();var isSizeChanged=false;for(var i=0;i<10;i++){isSizeChanged=this._measure();this._arrange();this.axes._updateOrigins();this.axes._initRanges();this.axes._correctOrigins();if(!isSizeChanged){break;}}
this.toolbar._init();this.render();this.storyboard.begin();};Chart.prototype.partialDelayedUpdate=function(){if(this.isServerFiltering()){this._processAsyncData();}
else{this.storyboard.stop();this.timer.kick();}}
Chart.prototype.partialUpdate=function(){this._updateChartSizes();this.series._initVisibleData();this.axes._resetWH();var isSizeChanged=false;this.axes._initRanges();for(var i=0;i<10;i++){isSizeChanged=this._measure();this._arrange();this.axes._updateOrigins();this.axes._initRanges();this.axes._correctOrigins();if(!isSizeChanged){break;}}
this.render();};Chart.prototype.highlightData=function(items){var shapes=SvgControl.prototype.highlightData.call(this,items);if(shapes){var pt=shapes[0].getCenter();this._renderCrosshairs(pt.x,pt.y);}}
Chart.prototype.destroy=function(){this.axes.clear();SvgControl.prototype.destroy.call(this);}
Chart.prototype.exportToImage=function(config){this._exportToImage(config,Chart.defaults.exportConfig);}
Chart.prototype.exportToPdf=function(config){this._exportToPdf(config,Chart.defaults.exportConfig);}
Chart.prototype.toJSON=function(config){var gArea=this.gridArea;var shadows=this.options.shadows;var shadowsEnabled=shadows&&shadows.enabled;var clip=new Clip(gArea.x,gArea.y,gArea.width,gArea.height);var resetClip=new ResetClip();var shadows=new Shadows(true);var noShadows=new Shadows(false);var allShapes=this.allShapes;var shapes=[];jFunc.merge(shapes,allShapes.shapes);if(this.hasData){shapes.push(clip);if(shadowsEnabled){shapes.push(shadows);jFunc.merge(shapes,allShapes.gaShapes);shapes.push(noShadows);}
jFunc.merge(shapes,allShapes.gaShapes);shapes.push(resetClip);jFunc.merge(shapes,allShapes.axesShapes);shapes.push(clip);if(shadowsEnabled){shapes.push(shadows);jFunc.merge(shapes,allShapes.serShapes);shapes.push(noShadows);}
jFunc.merge(shapes,allShapes.serShapes);jFunc.merge(shapes,allShapes.gaZIndexShapes);shapes.push(resetClip);if(shadowsEnabled){shapes.push(shadows);jFunc.merge(shapes,allShapes.nonGridAreaSerShapes);shapes.push(noShadows);}
jFunc.merge(shapes,allShapes.nonGridAreaSerShapes);}
jFunc.merge(shapes,allShapes.ws);return this._toJSON(shapes,config);}
function ChartSprintf(){function pad(str,len,chr,leftJustify){var padding=(str.length>=len)?'':Array(1+len-str.length>>>0).join(chr);return leftJustify?str+padding:padding+str;}
function justify(value,prefix,leftJustify,minWidth,zeroPad){var diff=minWidth-value.length;if(diff>0){if(leftJustify||!zeroPad){value=pad(value,minWidth,' ',leftJustify);}else{value=value.slice(0,prefix.length)+pad('',diff,'0',true)+value.slice(prefix.length);}}
return value;}
function formatBaseX(value,base,prefix,leftJustify,minWidth,precision,zeroPad){var number=value>>>0;prefix=prefix&&number&&{'2':'0b','8':'0','16':'0x'}[base]||'';value=prefix+pad(number.toString(base),precision||0,'0',false);return justify(value,prefix,leftJustify,minWidth,zeroPad);}
function formatString(value,leftJustify,minWidth,precision,zeroPad){if(precision!=null){value=value.slice(0,precision);}
return justify(value,'',leftJustify,minWidth,zeroPad);}
var a=arguments,i=0,format=a[i++];return format.replace(ChartSprintf.regex,function(substring,valueIndex,flags,minWidth,_,precision,type){if(substring=='%%')return '%';var leftJustify=false,positivePrefix='',zeroPad=false,prefixBaseX=false;for(var j=0;flags&&j<flags.length;j++)switch(flags.charAt(j)){case ' ':positivePrefix=' ';break;case '+':positivePrefix='+';break;case '-':leftJustify=true;break;case '0':zeroPad=true;break;case '#':prefixBaseX=true;break;}
if(!minWidth){minWidth=0;}else if(minWidth=='*'){minWidth=+a[i++];}else if(minWidth.charAt(0)=='*'){minWidth=+a[minWidth.slice(1,-1)];}else{minWidth=+minWidth;}
if(minWidth<0){minWidth=-minWidth;leftJustify=true;}
if(!isFinite(minWidth)){throw new Error('sprintf: (minimum-)width must be finite');}
if(!precision){precision='fFeE'.indexOf(type)>-1?6:(type=='d')?0:void(0);}else if(precision=='*'){precision=+a[i++];}else if(precision.charAt(0)=='*'){precision=+a[precision.slice(1,-1)];}else{precision=+precision;}
var value=valueIndex?a[valueIndex.slice(0,-1)]:a[i++];switch(type){case 's':return formatString(String(value),leftJustify,minWidth,precision,zeroPad);case 'c':return formatString(String.fromCharCode(+value),leftJustify,minWidth,precision,zeroPad);case 'b':return formatBaseX(value,2,prefixBaseX,leftJustify,minWidth,precision,zeroPad);case 'o':return formatBaseX(value,8,prefixBaseX,leftJustify,minWidth,precision,zeroPad);case 'x':return formatBaseX(value,16,prefixBaseX,leftJustify,minWidth,precision,zeroPad);case 'X':return formatBaseX(value,16,prefixBaseX,leftJustify,minWidth,precision,zeroPad).toUpperCase();case 'u':return formatBaseX(value,10,prefixBaseX,leftJustify,minWidth,precision,zeroPad);case 'i':case 'd':{var number=parseInt(+value);var prefix=number<0?'-':positivePrefix;value=prefix+pad(String(Math.abs(number)),precision,'0',false);return justify(value,prefix,leftJustify,minWidth,zeroPad);}
case 'e':case 'E':case 'f':case 'F':case 'g':case 'G':{var number=+value;var prefix=number<0?'-':positivePrefix;var method=['toExponential','toFixed','toPrecision']['efg'.indexOf(type.toLowerCase())];var textTransform=['toString','toUpperCase']['eEfFgG'.indexOf(type)%2];value=prefix+Math.abs(number)[method](precision);return justify(value,prefix,leftJustify,minWidth,zeroPad)[textTransform]();}
default:return substring;}});}
ChartSprintf.regex=/%%|%(\d+\$)?([-+#0 ]*)(\*\d+\$|\*|\d+)?(\.(\*\d+\$|\*|\d+))?([scboxXuidfegEG])/g;dvxCharts.DateFormatter=function(){var token=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,timezone=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,timezoneClip=/[^-+\dA-Z]/g,pad=function(val,len){val=String(val);len=len||2;while(val.length<len)val="0"+val;return val;};return function(date,mask,utc){var dF=dvxCharts.DateFormatter.DateFormat;var amPm=dF.amPm;if(arguments.length==1&&Object.prototype.toString.call(date)=="[object String]"&&!/\d/.test(date)){mask=date;date=undefined;}
date=date?new Date(date):new Date;if(isNaN(date))throw SyntaxError("invalid date");mask=String(dF.masks[mask]||mask||"ddd mmm dd yyyy HH:MM:ss");if(mask.slice(0,4)=="UTC:"){mask=mask.slice(4);utc=true;}
var _=utc?"getUTC":"get",d=date[_+"Date"](),D=date[_+"Day"](),m=date[_+"Month"](),y=date[_+"FullYear"](),H=date[_+"Hours"](),M=date[_+"Minutes"](),s=date[_+"Seconds"](),L=date[_+"Milliseconds"](),o=utc?0:date.getTimezoneOffset(),flags={d:d,dd:pad(d),ddd:dF.dayNames[D],dddd:dF.dayNames[D+7],m:m+1,mm:pad(m+1),mmm:dF.monthNames[m],mmmm:dF.monthNames[m+12],yy:String(y).slice(2),yyyy:y,h:H%12||12,hh:pad(H%12||12),H:H,HH:pad(H),M:M,MM:pad(M),s:s,ss:pad(s),l:pad(L,3),L:pad(L>99?Math.round(L/10):L),t:H<12?amPm[0].charAt(0)||"":amPm[1].charAt(0)||"",tt:H<12?amPm[0]:amPm[1],T:H<12?amPm[2].charAt(0)||"":amPm[3].charAt(0)||"",TT:H<12?amPm[2]:amPm[3],Z:utc?"UTC":(String(date).match(timezone)||[""]).pop().replace(timezoneClip,""),o:(o>0?"-":"+")+pad(Math.floor(Math.abs(o)/60)*100+Math.abs(o)%60,4),S:dF.s(d)};return mask.replace(token,function($0){return $0 in flags?flags[$0]:$0.slice(1,$0.length-1);});};}();dvxCharts.DateFormatter.DateFormat={masks:{shortDate:"m/d/yyyy",shortTime:"h:MM TT",longTime:"h:MM:ss TT"},dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],amPm:["am","pm","AM","PM"],s:function(j){return j<11||j>13?['st','nd','rd','th'][Math.min((j-1)%10,3)]:'th'},monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]}
function StockShape(x,high,low,open,close,width){Shape.call(this);this.high=high;this.low=low;this.open=open;this.close=close;this.x=x-width/2;this.width=width;this.height=Math.abs(high-low);this.y=Math.min(high,low);this.isUp=close<open;this.tooltipOrigin={x:x,y:Math.min(high,low)};this.center={x:x,y:(open+close)/2};if(this.createElements){this.createElements(x,high,low,open,close,width);}}
StockShape.prototype=new Shape();StockShape.constructor=new StockShape;StockShape.prototype.createElements=function(x,high,low,open,close,width){var items=[];var w=width/2;var line=new Line(x,high,x,low);items.push(line);line=new Line(x-w,open,x,open);items.push(line);line=new Line(x,close,x+w,close);items.push(line);this.items=items;}
StockShape.prototype.hitTest=function(x,y,area){if(area){return this.boundsHitTest(x,y,area);}
for(var i=0;i<this.items.length;i++){var item=this.items[i];if(item.hitTest(x,y,area)){return true;}}
return false;}
StockShape.prototype.renderToSvg=function(svg){if(!this.visible){return;}
var groupShape=new GroupShape();groupShape.addClasses(this.classes);groupShape.addShapes(this.items);groupShape.renderToSvg(svg);}
function CandlestickShape(x,high,low,open,close,width){StockShape.call(this,x,high,low,open,close,width);}
CandlestickShape.prototype=new StockShape();CandlestickShape.constructor=new CandlestickShape;CandlestickShape.prototype.createElements=function(x,high,low,open,close,width){var items=[];var w=Math.floor(width/2);x=Math.round(x);var y1=Math.round(open);var y2=Math.round(close);var line;var rect;var tmp;if(y1>y2){tmp=y2;y2=y1;y1=tmp;}
if(high>low){tmp=low;low=high;high=tmp;}
if(y2-y1>=1){rect=new Rectangle(x-w,y1,2*w,y2-y1);rect.useHitTestArea=true;items.push(rect);}
else{line=new Line(x-w,y1,x+w,y1);items.push(line);}
line=new Line(x,high,x,y1);items.push(line);line=new Line(x,y2,x,low);items.push(line);this.items=items;}
function ChartToolbar(chart){this.chart=chart;this.defaults={visibility:'auto',resetZoomTooltipText:'Reset Zoom (100%)',zoomingTooltipText:'Zoom in to selection area',panningTooltipText:'Pan the chart',hAlign:'right',vAlign:'top',resetZoomButtonVisible:true,zoomingButtonVisible:true,panningButtonVisible:true};}
ChartToolbar.prototype={setOptions:function(options){var settings=jFunc.extend({},this.defaults,options||{});jFunc.extend(this,settings);},_init:function(){var toolbar=this.toolbar,chart=this.chart,chartDOMElement=chart.getDOMElement();if(this.visibility=='hidden'||(this.visibility=='auto'&&!chart.canZoom)){if(toolbar){toolbar.innerHTML='';this.toolbar=null;}
return;}
if(!toolbar){chartDOMElement.insertAdjacentHTML('beforeend','<ul onselectstart="return false;" class="dvx-chart-toolbar ui-widget ui-widget-content ui-corner-all"></ul>');this.toolbar=toolbar=chartDOMElement.lastChild;this._addButtons();jFunc.bind(toolbar,'mousedown',function(e){e.preventDefault();return false;});jFunc.bind(toolbar,'mouseenter',function(e){chart._clearRenderers();e.preventDefault();return false;});jFunc.bind(toolbar,'mousemove',function(e){e.preventDefault();return false;});}
jFunc.show(toolbar);var w=jFunc.outerWidth(toolbar),h=jFunc.outerHeight(toolbar),ga=chart.gridArea,x=ga.x,y=ga.y;switch(this.hAlign){case 'center':x+=(ga.width-w)/2;break;case 'right':x+=ga.width-w;break;}
switch(this.vAlign){case 'center':y+=(ga.height-h)/2;break;case 'bottom':y+=ga.height-h;break;}
toolbar.style.left=x+'px';toolbar.style.top=y+'px';if(this.visibility=='visible'||(this.visibility=='auto'&&chart.isMouseOver)){jFunc.show(toolbar);}else{jFunc.hide(toolbar);}},_addButtons:function(){var toolbar=this.toolbar,chart=this.chart;if(this.resetZoomButtonVisible){toolbar.insertAdjacentHTML('beforeend',"<li title='"+this.resetZoomTooltipText+"' class='ui-corner-all ui-widget-header'><span class='ui-icon ui-icon-arrow-4-diag'></span></li>");var resetZoom=toolbar.lastChild;this._addHover(resetZoom);jFunc.bind(resetZoom,'mousedown',function(e){e.preventDefault();var axes=chart.axes.items;for(var i=0;i<axes.length;i++){axes[i].resetZoom();}
chart.partialDelayedUpdate();return false;});}
if(this.resetZoomButtonVisible&&(this.zoomingButtonVisible||this.panningButtonVisible)){toolbar.insertAdjacentHTML('beforeend',"<li class='dvx-chart-toolbar-separator'></li>");}
if(this.panningButtonVisible){toolbar.insertAdjacentHTML('beforeend',"<li title='"+this.panningTooltipText+"' class='ui-corner-all ui-widget-header'><span class='ui-icon ui-icon-arrow-4'></span></li>");var pan=toolbar.lastChild;this._addHover(pan);jFunc.bind(pan,"mousedown",function(e){e.preventDefault();chart.options.mouseInteractionMode='panning';jFunc.addClass(pan,'ui-state-active');jFunc.removeClass(zoom,'ui-state-active');return false;});}
if(this.zoomingButtonVisible){toolbar.insertAdjacentHTML('beforeend',"<li title='"+this.zoomingTooltipText+"' class='ui-corner-all ui-widget-header'><span class='ui-icon ui-icon-zoomin'></span></li>");var zoom=toolbar.lastChild;this._addHover(zoom);jFunc.bind(zoom,'mousedown',function(e){e.preventDefault();chart.options.mouseInteractionMode='zooming';jFunc.removeClass(pan,'ui-state-active');jFunc.addClass(zoom,'ui-state-active');return false;});}
switch(chart.options.mouseInteractionMode){case 'zooming':if(zoom){jFunc.addClass(zoom,'ui-state-active');}
break;default:if(pan){jFunc.addClass(pan,'ui-state-active');}
break;}},_addHover:function(elem){jFunc.bind(elem,'mouseenter',function(event){jFunc.addClass(this,"ui-state-hover");});jFunc.bind(elem,'mouseleave',function(event){jFunc.removeClass(this,"ui-state-hover");});},show:function(){if(this.toolbar&&this.visibility=='auto'){jFunc.fadeIn(this.toolbar,'slow');}},hide:function(){if(this.toolbar&&this.visibility=='auto'){jFunc.fadeOut(this.toolbar,'slow');}}}
function Marker(options){this.defaults={size:8,offset:0,type:'circle'};this.setOptions(options);}
Marker.prototype.setOptions=function(options){var settings=jFunc.extend({},this.defaults,options||{});jFunc.extend(this,settings);}
Marker.prototype.getSize=function(){return{width:this.size,height:this.size};}
Marker.prototype.getShape=function(x,y,r,imagePath,type){if(this.visible===false){return null;}
var r2=2*r,shape=null,pts;type=type||this.type;switch(type){case 'circle':shape=new Circle(x-r,y-r,r);break;case 'rectangle':shape=new Rectangle(x-r,y-r,r2,r2);break;case 'diamond':pts=[];pts.push(x);pts.push(y-r);pts.push(x+r);pts.push(y);pts.push(x);pts.push(y+r);pts.push(x-r);pts.push(y);shape=new Polygon(pts);shape.isBoundsHitTest=true;break;case 'triangle':pts=[];pts.push(x);pts.push(y-r);pts.push(x+r);pts.push(y+r);pts.push(x-r);pts.push(y+r);shape=new Polygon(pts);shape.isBoundsHitTest=true;break;case 'line':shape=new Line(x-r,y,x+r,y);break;case 'plus':pts=[];pts.push(x-r);pts.push(y);pts.push(x+r);pts.push(y);pts.push(null);pts.push(null);pts.push(x);pts.push(y-r);pts.push(x);pts.push(y+r);shape=new Polyline(pts,true);break;case 'cross':pts=[];pts.push(x-r);pts.push(y-r);pts.push(x+r);pts.push(y+r);pts.push(null);pts.push(null);pts.push(x-r);pts.push(y+r);pts.push(x+r);pts.push(y-r);shape=new Polyline(pts,true);break;case 'image':var src=imagePath||this.src;if(!src){return null;}
shape=new ImageShape(x,y,src);break;}
if(shape){shape.useHitTestArea=true;shape.center={x:Math.round(x),y:Math.round(y)};}
return shape;}
Marker.prototype.isVisible=function(){return this.visible!==false&&this.type!=='none';}
function GridLine(options){this.defaults={visible:true};this.setOptions(options);}
GridLine.prototype.setOptions=function(options){var settings=jFunc.extend({},this.defaults,options||{});jFunc.extend(this,settings);}
function PlotLine(options){this.defaults={lineWidth:1,zIndex:0,title:{margin:2,hAlign:'left',vAlign:'top'}};this.setOptions(options);}
PlotLine.prototype={setOptions:function(options){if(options&&(typeof options.title==='string')){options.title={text:options.title};jFunc.extend(options.title,this.defaults.title);}
var settings=jFunc.extend(true,{},this.defaults,options||{});jFunc.extend(this,settings);}}
function PlotBand(options){this.defaults={zIndex:0,title:{margin:2,hAlign:'left',vAlign:'top'}};this.setOptions(options);}
PlotBand.prototype={setOptions:function(options){if(options&&(typeof options.title==='string')){options.title={text:options.title};jFunc.extend(options.title,this.defaults.title);}
var settings=jFunc.extend(true,{},this.defaults,options||{});jFunc.extend(this,settings);}};function Legend(options){this.defaults={location:'right',title:{text:undefined,svgClass:'dvx-chart-legend-title',margin:0},border:{padding:2,cornerRadius:6},margin:4,visible:true,itemsHorMargin:4,itemsVerMargin:0,allowHideSeries:true};this.setOptions(options);}
Legend.prototype._isHorizontal=function(){if(this.location==='top'||this.location==='bottom'){return true;}
return false;};Legend.prototype._init=function(){this.items=[];if(!this.visible){return;}
if(this.customItems){for(var i=0;i<this.customItems.length;i++){var opt=this.customItems[i];if(opt&&(typeof opt.text==='string')){opt.text={text:opt.text};}
var defOptions={marker:{type:'rectangle'}};opt=jFunc.extend(true,{},defOptions,opt||{});var marker=new Marker(opt.marker);opt.marker=marker;var newOpt={};jFunc.extend(newOpt,opt);newOpt.text=opt.text.text;newOpt.context={chart:this.chart,title:newOpt.text};var legendItem=new LegendItem(newOpt);legendItem.chart=this.chart;this.items.push(legendItem);}}
else{var itemOptions={};var series=this.chart.series.items;for(var i=0;i<series.length;i++){var ser=series[i];if(!ser.visible){continue;}
jFunc.merge(this.items,ser._getLegendItems(itemOptions));}}}
Legend.prototype._measure=function(){if(!this.visible){this.width=0;this.height=0;return;}
var paddings=this.paddings=this.border.getPaddings();this.title._measure();var w=this.title.width;var h=this.title.height;if(this.title.text){h+=paddings.top;}
var isHorizontal=this._isHorizontal();var itemsHorMargin=this.itemsHorMargin;var itemsVerMargin=this.itemsVerMargin;var itemsWidth=0;var itemsHeight=0;var maxItemWidth=0;for(var i=0;i<this.items.length;i++){var item=this.items[i];item._measure();if(isHorizontal){itemsWidth+=item.width;if(i>0){itemsWidth+=itemsHorMargin;}
itemsHeight=Math.max(itemsHeight,item.height);maxItemWidth=Math.max(maxItemWidth,item.width+itemsHorMargin);}
else{itemsWidth=Math.max(itemsWidth,item.width);itemsHeight+=item.height;if(i>0){itemsHeight+=itemsVerMargin;}}}
var offsetW=2*this.margin+paddings.left+paddings.right;var offsetH=2*this.margin+paddings.top+paddings.bottom;var chartPaddings=this.chart.border.getPaddings();var maxWidth=this.chart._width-chartPaddings.left-chartPaddings.right-offsetW;if(isHorizontal&&itemsWidth>maxWidth){var rows=Math.floor(maxWidth/maxItemWidth)||1;var columns=Math.ceil(this.items.length/rows);this.rows=rows;this.cellHeight=itemsHeight+itemsHorMargin;this.cellWidth=maxItemWidth;itemsWidth=rows*maxItemWidth;itemsHeight=columns*itemsHeight+(columns-1)*itemsHorMargin;}
else{this.rows=0;}
w=Math.max(w,itemsWidth);h+=itemsHeight;this.width=this.isCustomWidth||(w+offsetW);this.height=this.isCustomHeight||(h+offsetH);}
Legend.prototype._arrange=function(){if(!this.visible){return;}
var x=this.x+this.margin;var y=this.y+this.margin;var l=2*this.margin;this.border.x=x;this.border.y=y;var w=this.width-l;this.border.width=w;this.border.height=this.height-l;var paddings=this.paddings;w-=paddings.left+paddings.right;x+=paddings.left;y+=paddings.top;if(this.title.text){this.title.x=x+(w-this.title.width)/2;this.title.y=y;y+=this.title.height+paddings.top;}
var isHorizontal=this._isHorizontal();var rows=this.rows;for(var i=0;i<this.items.length;i++){var item=this.items[i];item.x=x;item.y=y;if(isHorizontal){if(rows){item.x+=(i%rows)*this.cellWidth;item.y+=Math.floor(i/rows)*this.cellHeight;}
else{x+=item.width+this.itemsHorMargin;}}
else{y+=item.height+this.itemsVerMargin;}
item._arrange();}};Legend.prototype._render=function(legendShapesRenderContext){if(!this.visible){return[];}
var legendGroup=new GroupShape();legendGroup.addClass('dvx-chart-legend-group');legendShapesRenderContext.shapes.push(legendGroup);var contextShapes=legendShapesRenderContext.contextShapes;var shapes=[],seriesGroup=new GroupShape(),markersGroup=new GroupShape();seriesGroup.addShape(markersGroup);this.border._render(shapes);this.title._render(shapes);for(var i=0;i<this.items.length;i++){var item=this.items[i];var contextItemShapes=item._render(shapes,seriesGroup,markersGroup);jFunc.merge(contextShapes,contextItemShapes);}
if(markersGroup.hasShapes()){shapes.push(seriesGroup);}
legendGroup.addShapes(shapes);};Legend.prototype._handleEvent=function(name,shape){if(!this.allowHideSeries){return;}
var context=shape.context;var series=context.series;var chart=context.chart;if(!series){return;}
switch(name){case "MouseDown":case "TouchEnd":series._hideFromLegend(context);chart.update();chart._processMouseEvents();break;}};Legend.prototype.setOptions=function(options){if(options&&(typeof options.title==='string')){options.title={text:options.title};jFunc.extend(options.title,this.defaults.title);}
var settings=jFunc.extend(true,{},this.defaults,options||{});jFunc.extend(this,settings);this.margin=settings.margin;if(options){this.isCustomWidth=options.width;this.isCustomHeight=options.height;}
this.border=new Border(settings.border);this.border.svgClass='dvx-chart-legend';this.title=new Title(settings.title);this.title.chart=this.chart;};function LegendItem(options){this.defaults={};this.lblMargin=4;this.setOptions(options);}
LegendItem.prototype._measure=function(){var size;if(this.text){size=this.textBlock.measure();}
else{size={width:0,height:0};}
this.width=size.width+this.marker.size+this.lblMargin;this.height=size.height;};LegendItem.prototype._arrange=function(){var r=this.marker.size/2;var x=this.x+r;var y=this.y+r+(this.height-this.marker.size)/2;this.markerShape=this.marker.getShape(x,y,r);this.markerShape.context=this.context;this.markerShape.isLegendItem=true;this.setMarkerClasses(this.markerShape);this.textBlock.x=this.x+this.marker.size+this.lblMargin;this.textBlock.y=this.y;};LegendItem.prototype._render=function(shapes,seriesGroup,markersGroup){var elems=[];markersGroup=this.individualFill?markersGroup:new GroupShape();markersGroup.addShape(this.markerShape);this.setMarkersGroupClasses(markersGroup);if(this.individualFill){this.series.setSeriesClasses(seriesGroup);}else{elems.push(markersGroup);}
elems.push(this.textBlock);var group=new GroupShape(elems);group.addClass('dvx-chart-legend-item');this.series.setSeriesClasses(group);shapes.push(group);return elems;};LegendItem.prototype.setOptions=function(options){var settings=jFunc.extend(false,{},this.defaults,options||{});jFunc.extend(this,settings);this.textBlock=new TextBlock(this.text);var cssClass=this.showInScene?'dvx-chart-legend-item-text':'dvx-chart-legend-item-text-inactive';this.textBlock.addClass(cssClass);this.textBlock.textBaseline='top';this.textBlock.context=this.context;this.textBlock.isLegendItem=true;};LegendItem.prototype.setMarkersGroupClasses=function(markersGroup){var series=this.series,isStrokeFill=this.markerShape.decorationType==='stroke',markerClass;if(isStrokeFill){markersGroup.addClass('dvx-chart-marker-stroke-width');}
if(this.showInScene){series.setDataGroupClasses(markersGroup);}else{if(isStrokeFill){markerClass='dvx-chart-legend-item-stroke-inactive';}else{markerClass='dvx-chart-legend-item-fill-inactive';}
markersGroup.addClass(markerClass);}};LegendItem.prototype.setMarkerClasses=function(markerShape){if(!markerShape||!this.showInScene||!this.individualFill){return;}
this.series.setItemClasses(markerShape,this.itemIndex);}
function GridArea(chart){this.chart=chart;this.border=new Border();this.border.svgClass='dvx-chart-grid-area';this.isMouseOver=false;}
GridArea.prototype._arrange=function(){var x=this.x;var y=this.y;this.border.x=x;this.border.y=y;this.border.width=this.width;this.border.height=this.height;}
GridArea.prototype._renderZIndex=function(shapes,zIndex){}
GridArea.prototype._render=function(shapes){this.border._render(shapes);var axesGroup=new GroupShape();shapes.push(axesGroup);this._renderGridLines(axesGroup);this._renderZIndex(shapes,1);}
GridArea.prototype._renderSeries=function(serShapesRenderContext){var clipId=this.chart.dvxId+'_gaClip';var seriesGroup=new GroupShape();seriesGroup.clipId=clipId;var series=jMath.sortSeries(this.chart.series.items);for(var i=0;i<series.length;i++){var ser=series[i];if(ser.notInGridArea){continue;}
ser._render(serShapesRenderContext);}
if(serShapesRenderContext.shapes.length){seriesGroup.addShapes(serShapesRenderContext.shapes);serShapesRenderContext.shapes=[seriesGroup];}
var clip=new Clip(clipId,this.x,this.y,this.width,this.height);serShapesRenderContext.shapes.push(clip);}
GridArea.prototype._renderStripes=function(shapes){var axes=this.chart.axes.items;for(var i=0;i<axes.length;i++){var axis=axes[i];var stripes=this._getStripes(axis);jFunc.merge(shapes,stripes);}}
GridArea.prototype._renderPlots=function(shapes,zIndex){var texts=[];var axes=this.chart.axes.items;for(var i=0;i<axes.length;i++){var axis=axes[i];var plotBands=this._getPlotBands(axis,zIndex);if(plotBands){jFunc.merge(shapes,plotBands.shapes);jFunc.merge(texts,plotBands.texts);}
var plotLines=this._getPlotLines(axis,zIndex);if(plotLines){jFunc.merge(shapes,plotLines.shapes);jFunc.merge(texts,plotLines.texts);}}
return texts;}
GridArea.prototype._renderGridLines=function(axesGroup){var axes=this.chart.axes.items;for(var i=0;i<axes.length;i++){var axis=axes[i];var axisGroupShape=new GroupShape();axis._setAxesClasses(axisGroupShape);var majorGridLines=axis.majorGridLines;if(!majorGridLines&&axis.getOrientation()==='y'){majorGridLines=new GridLine();if(axis.minorGridLines){axis.minorGridLines.major=majorGridLines;}}
var minorGridLinesGroup=this._getGridLines(axis,axis.minorGridLines,false);if(minorGridLinesGroup){axisGroupShape.addShape(minorGridLinesGroup);}
var majorGridLinesGroup=this._getGridLines(axis,majorGridLines,true);if(majorGridLinesGroup){axisGroupShape.addShape(majorGridLinesGroup);}
axesGroup.addShape(axisGroupShape);}}
GridArea.prototype._getStripes=function(axis){var stripes=axis.stripes;if(stripes==null||jFunc.isArray(stripes)!=true){return[];}
var gArea=this;var shapes=[];jFunc.each(stripes,function(){var stripe=new Stripe(this);var intr;if(stripe.interval){intr=stripe.interval;}
else{intr=2*axis.actualInterval;}
var width;if(stripe.width){width=stripe.width;}
else{width=axis.actualInterval;}
var lineWidth=stripe.lineWidth;var lw2=lineWidth/2;var intrs=axis._getIntervals(intr,stripe,true);for(var i=0;i<intrs.length;i++){var val=intrs[i];if(val>=axis.actualVisibleMaximum){continue;}
var pos1=axis.getPosition(val);var next=axis._getNextPosition(val,width);var pos2=axis.getPosition(next);var rect;if(axis.isAxisVertical){rect=new Rectangle(gArea.x+lw2,Math.min(pos1,pos2),gArea.width-lineWidth,Math.abs(pos2-pos1));}
else{rect=new Rectangle(Math.min(pos1,pos2),gArea.y+lw2,Math.abs(pos2-pos1),gArea.height-lineWidth);}
stripe._setSettings(rect);shapes.push(rect);}});return shapes;}
GridArea.prototype._getGridLines=function(axis,mark,major){if(axis.location==='radial'||!mark||mark.visible!==true){return;}
var intr=axis._getMarkInterval(mark,major);var intrs=axis._getIntervals(intr,mark,major);var x1,y1,x2,y2,svgClass=major?'dvx-chart-axis-major-grid-line':'dvx-chart-axis-minor-grid-line';var groupShape=new GroupShape();groupShape.addClass(svgClass);for(var i=0;i<intrs.length;i++){var pos=axis.getPosition(intrs[i]);if(axis.isAxisVertical){y1=y2=pos;x1=this.x;x2=x1+this.width;}
else{x1=x2=pos;y1=this.y;y2=y1+this.height;}
var line=new Line(x1,y1,x2,y2);groupShape.addShape(line);}
return groupShape;}
GridArea.prototype._getPlotLines=function(axis,zIndex){var plotLines=axis.plotLines;if(!plotLines||!jFunc.isArray(plotLines)){return null;}
var gArea=this;var shapes=[];var texts=[];var x1,y1,x2,y2;for(var i=0;i<plotLines.length;i++){var plotLine=new PlotLine();if(!axis.isAxisVertical){plotLine.defaults.title.hAlign='right';}
plotLine.setOptions(plotLines[i]);if(jMath.isNull(plotLine.value)){continue;}
if(jMath.fitInRange(plotLine.zIndex,0,2)!=zIndex){continue;}
var lineWidth=plotLine.lineWidth/2;var pos=axis.getPosition(plotLine.value);var title=new Title(plotLine.title);title.chart=this.chart;title._measure();if(axis.isAxisVertical){y1=y2=pos;x1=this.x;x2=x1+this.width;title.x=x1;title.y=y1;switch(title.hAlign){case 'center':title.x=gArea.x+(gArea.width-title.width)/2;break;case 'right':title.x=gArea.x+gArea.width-title.width;break;}
switch(title.vAlign){case 'bottom':title.y+=lineWidth;break;case 'center':title.y-=title.height/2;break;case 'top':title.y-=title.height+lineWidth;break;}}
else{x1=x2=pos;y1=this.y;y2=y1+this.height;title.x=x1;title.y=y1;switch(title.hAlign){case 'right':title.x+=lineWidth;break;case 'center':title.x-=title.height/2;break;case 'left':title.x-=title.height+lineWidth;break;}
switch(title.vAlign){case 'center':title.y+=(gArea.height-title.width)/2;break;case 'bottom':title.y+=gArea.height-title.width;break;}
title.rotX=title.x+title.height-title.margin;title.rotY=title.y+title.margin;title.rotationAngle=jMath.radians(90);}
var line=new Line(x1,y1,x2,y2);shapes.push(line);title._render(texts);};return{shapes:shapes,texts:texts};}
GridArea.prototype._getPlotBands=function(axis,zIndex){var plotBands=axis.plotBands;if(plotBands==null||jFunc.isArray(plotBands)!=true){return null;}
var gArea=this;var shapes=[];var texts=[];for(var i=0;i<plotBands.length;i++){var plotBand=new PlotBand();if(!axis.isAxisVertical){plotBand.defaults.title.hAlign='right';}
plotBand.setOptions(plotBands[i]);if(jMath.isNull(plotBand.from)||jMath.isNull(plotBand.to)){continue;}
if(jMath.fitInRange(plotBand.zIndex,0,2)!=zIndex){continue;}
var lineWidth=plotBand.lineWidth;var lw2=lineWidth/2;var pos1=axis.getPosition(plotBand.from);var pos2=axis.getPosition(plotBand.to);var x,y,w,h;if(axis.isAxisVertical){x=gArea.x+lw2;y=Math.min(pos1,pos2);w=gArea.width-lineWidth;h=Math.abs(pos2-pos1);}
else{x=Math.min(pos1,pos2);y=gArea.y+lw2;w=Math.abs(pos2-pos1);h=gArea.height-lineWidth;}
var rect=new Rectangle(x,y,w,h);shapes.push(rect);var title=new Title(plotBand.title);title.chart=this.chart;title._measure();if(axis.isAxisVertical){title.x=x;title.y=y;switch(title.hAlign){case 'center':title.x+=(w-title.width)/2;break;case 'right':title.x+=w-title.width;break;}
switch(title.vAlign){case 'center':title.y+=(h-title.height)/2;break;case 'bottom':title.y+=h-title.height;break;}}
else{title.x=x;title.y=y;switch(title.hAlign){case 'center':title.x+=(w-title.height)/2;break;case 'right':title.x+=w-title.height;break;}
switch(title.vAlign){case 'center':title.y+=(h-title.width)/2;break;case 'bottom':title.y+=h-title.width;break;}
title.rotX=title.x+title.height-title.margin;title.rotY=title.y+title.margin;title.rotationAngle=jMath.radians(90);}
title._render(texts);};return{shapes:shapes,texts:texts};}
GridArea.prototype._contains=function(x,y){return x>=this.x&&x<=this.x+this.width&&y>=this.y&&y<=this.y+this.height;}
GridArea.prototype.getRight=function(){return this.x+this.width;}
GridArea.prototype.fitHor=function(x){return jMath.fitInRange(x,this.x,this.getRight());}
GridArea.prototype.fitVer=function(y){return jMath.fitInRange(y,this.y,this.y+this.height);}
function SeriesArray(chart,options){this.chart=chart;if(options){this.setOptions(options);}}
SeriesArray.prototype.setOptions=function(options){this.items=[];if(jFunc.isArray(options)==false){return;}
for(var i=0;i<options.length;i++){var op=options[i];if(op==null){continue;}
var series;var cType=op.type||'column';cType=cType.toLowerCase();switch(cType){case 'area':series=new AreaSeries(op);break;case 'splinearea':series=new SplineAreaSeries(op);break;case 'bar':series=new BarSeries(op);break;case 'bubble':series=new BubbleSeries(op);break;case 'line':series=new LineSeries(op);break;case 'stepline':series=new StepLineSeries(op);break;case 'steparea':series=new StepAreaSeries(op);break;case 'spline':series=new SplineSeries(op);break;case 'pie':series=new PieSeries(op);break;case 'donut':case 'doughnut':series=new DoughnutSeries(op);break;case 'scatter':series=new ScatterSeries(op);break;case 'stackedcolumn':series=new StackedColumnSeries(op);break;case 'stackedbar':series=new StackedBarSeries(op);break;case 'stacked100column':series=new Stacked100ColumnSeries(op);break;case 'stacked100bar':series=new Stacked100BarSeries(op);break;case 'rangecolumn':series=new RangeColumnSeries(op);break;case 'rangebar':series=new RangeBarSeries(op);break;case 'gantt':series=new GanttSeries(op);break;case 'stock':series=new StockSeries(op);break;case 'candlestick':series=new CandlestickSeries(op);break;case 'radar':case 'radarline':series=new RadarLineSeries(op);break;case 'radararea':series=new RadarAreaSeries(op);break;case 'radarspline':series=new RadarSplineSeries(op);break;case 'radarsplinearea':series=new RadarSplineAreaSeries(op);break;case 'polar':case 'polarline':series=new PolarLineSeries(op);break;case 'polararea':series=new PolarAreaSeries(op);break;case 'polarspline':series=new PolarSplineSeries(op);break;case 'polarsplinearea':series=new PolarSplineAreaSeries(op);break;case 'polarscatter':series=new PolarScatterSeries(op);break;case 'trendline':series=new TrendlineSeries(op);break;case 'verticalline':series=new VertLineSeries(op);break;case 'verticalspline':series=new VertSplineSeries(op);break;case 'verticalarea':series=new VertAreaSeries(op);break;case 'verticalsplinearea':series=new VertSplineAreaSeries(op);break;case 'range':series=new RangeSeries(op);break;case 'splinerange':series=new SplineRangeSeries(op);break;case 'stackedline':series=new StackedLineSeries(op);break;case 'stackedspline':series=new StackedSplineSeries(op);break;case 'stacked100line':series=new Stacked100LineSeries(op);break;case 'stacked100spline':series=new Stacked100SplineSeries(op);break;case 'stackedarea':series=new StackedAreaSeries(op);break;case 'stackedsplinearea':series=new StackedSplineAreaSeries(op);break;case 'stacked100area':series=new Stacked100AreaSeries(op);break;case 'stacked100splinearea':series=new Stacked100SplineAreaSeries(op);break;case 'funnel':series=new FunnelSeries(op);break;case 'column':default:series=new ColumnSeries(op);}
series.type=cType;series.chart=this.chart;series.seriesIndex=i;this.items.push(series);}
this._processData();}
SeriesArray.prototype._processData=function(){var items=this.items;for(var i=0;i<items.length;i++){var ser=items[i];if(ser.visible){ser._processData();}}}
SeriesArray.prototype._initData=function(){var items=this.items;for(var i=0;i<items.length;i++){var ser=items[i];if(ser.isInScene()){ser._initData();}}}
SeriesArray.prototype._initVisibleData=function(){var items=this.items;for(var i=0;i<items.length;i++){var ser=items[i];if(ser.isInScene()){ser._initVisibleData();}}}
SeriesArray.prototype._initCategories=function(){var categories=[];var length=0;var j=0;var items=this.items;for(var i=0;i<items.length;i++){var ser=items[i];if(!ser.isInScene()||!ser.categories){continue;}
for(j=length;j<ser.categories.length;j++){var cat=ser.categories[j];categories.push(cat);}
length=j;}
this.categories=categories;}
SeriesArray.prototype._initRanges=function(){var min=maxVl;var max=minVl;var minX=maxVl;var maxX=minVl;var items=this.items;for(var i=0;i<items.length;i++){var ser=items[i];if(!ser.isInScene()){continue;}
if(min>ser.min){min=ser.min;}
if(max<ser.max){max=ser.max;}
if(minX>ser.minX){minX=ser.minX;}
if(maxX<ser.maxX){maxX=ser.maxX;}}
this.min=min;this.max=max;this.minX=minX;this.maxX=maxX;}
SeriesArray.prototype._findClusters=function(series,seriesType){var index=-1;var count=0;var items=this.items;for(var i=0;i<items.length;i++){var ser=items[i];if(!ser.isInScene()){continue;}
if(ser==series){index=count;}
if(ser.type==seriesType){count++;}}
return{index:index,count:count};}
SeriesArray.prototype._findStackedClusters=function(series,seriesType){var groupName=series.stackedGroupName;var groups=this._getStackedGroupsFromType(seriesType);var groupIndex=jFunc.inArray(groupName,groups);var groupCount=groups.length;var index=-1;var count=0;var items=this.items;for(var i=0;i<items.length;i++){var ser=items[i];if(!ser.isInScene()){continue;}
if(ser==series){index=count;}
if(ser.type==seriesType&&ser.stackedGroupName==groupName){count++;}}
return{index:index,count:count,groupIndex:groupIndex,groupCount:groupCount};}
SeriesArray.prototype._getSeriesFromType=function(seriesType){var newSeries=[];var items=this.items;for(var i=0;i<items.length;i++){var ser=items[i];if(!ser.isInScene()){continue;}
if(ser.type==seriesType){newSeries.push(ser);}}
return newSeries;}
SeriesArray.prototype._getStackedSeriesFromType=function(seriesType,groupName){var newSeries=[];var items=this.items;for(var i=0;i<items.length;i++){var ser=items[i];if(!ser.isInScene()){continue;}
if(ser.type==seriesType&&ser.stackedGroupName==groupName){newSeries.push(ser);}}
return newSeries;}
SeriesArray.prototype._getStackedGroupsFromType=function(seriesType){var groups=[];jFunc.each(this.items,function(){if(this.isInScene()&&this.type==seriesType){var index=jFunc.inArray(this.stackedGroupName,groups);if(index==-1){groups.push(this.stackedGroupName);}}});return groups;}
SeriesArray.prototype._getPixelMargins=function(axis){var maxLeft=0;var maxRight=0;var items=this.items;for(var i=0;i<items.length;i++){var ser=items[i];if(!ser.isInScene()){continue;}
var margin=ser._getPixelMargins(axis);maxLeft=Math.max(maxLeft,margin.left);maxRight=Math.max(maxRight,margin.right);}
return{left:maxLeft,right:maxRight};}
SeriesArray.prototype._isAnchoredToOrigin=function(){var items=this.items;for(var i=0;i<items.length;i++){var ser=items[i];if(!ser.isInScene()){continue;}
if(ser._isAnchoredToOrigin()){return true;}}
return false;}
SeriesArray.prototype._render=function(serShapesRenderContext){var seriesGroup=new GroupShape();var items=jMath.sortSeries(this.items);for(var i=0;i<items.length;i++){var ser=items[i];if(!ser.visible||!ser.notInGridArea){continue;}
ser._render(serShapesRenderContext);}
if(serShapesRenderContext.shapes.length){seriesGroup.addShapes(serShapesRenderContext.shapes);serShapesRenderContext.shapes=[seriesGroup];}}
SeriesArray.prototype.getSeries=function(index){return this.items[index];}
SeriesArray.prototype.hasData=function(){var items=this.items;for(var i=0;i<items.length;i++){var ser=items[i];if(!ser.visible){continue;}
if(ser.hasRealData){return true;}}
return false;};function Series(options){this.decorationType='stroke';this.setOptions(options);}
Series.prototype={_getMarker:function(x,y,r,vl,imagePath,index,context){if(!r){r=this.markers.size/2.0;}
var isEmptyData=this.hasNullValues&&jFunc.inArray(index,this.nullIndexes)!=-1;var emptyMarker=this.emptyPointStyleObj.marker;var markerType;if(isEmptyData){markerType=emptyMarker.visible?emptyMarker.type:'none';r=this.emptyPointStyleObj.marker.size/2;}
var marker=this.markers.getShape(x,y,r,imagePath,markerType);if(!marker){return null;}
marker.context=context;marker.addClass('dvx-chart-series-marker');if(isEmptyData){jFunc.extend(marker,this.emptyPointStyleObj.marker);context.isEmptyData=true;}
return marker;},_addMarker:function(x,y,r,vl,imagePath,index,context){var pt=this._correctMarkerPosition(x,y,vl);var marker=this._getMarker(pt.x,pt.y,r,vl,imagePath,index,context);var offset=this.markers.offset;var line=null;if(offset){line=new Line(x,y,pt.x,pt.y);}
return{marker:marker,line:line,offset:pt.offset};},_correctMarkerPosition:function(x,y,vl){var offset=this.markers.offset;if(offset){var isTop=vl>=this.realYAxis.getCrossing();y=isTop?y-offset:y+offset;}
return{x:x,y:y,offset:offset};},_addMarkerAndLabel:function(renderContext,x,y,i,length,vlX,vlY,lblOffset,context){if(jMath.isNull(vlX)&&!this.realXAxis.isValueVisible(i+0.5)){return;}
if(!jMath.isNull(vlX)&&!this.realXAxis.isValueVisible(vlX)){return;}
var mOffset=0;var dataX=!jMath.isNull(vlX)?vlX:i;if(!context){context={chart:this.chart,series:this,dataItem:this.arrData[i],index:i,x:this.realXAxis._getValue(dataX),y:vlY};}
if(this.markers&&this.markers.isVisible()&&this.realYAxis.isValueVisible(vlY)){var imagePath=context.dataItem[2];var marker=this._addMarker(x,y,null,vlY,imagePath,i,context);if(marker.marker){renderContext.markers.push(marker.marker);mOffset=this.markers.offset;this._addShapeAnimation(marker.marker,i,length);}}
if(this.labels&&this.labels.visible!==false){var labelValue=this._getLabelValue(vlY,i);if(this.labels.valueType==='percentage'){labelValue=context.percentage;}
var tBlock=this._getDataPointLabel(vlY,x,y,lblOffset+mOffset,labelValue,i);tBlock.context=context;this.chart.triggerEvent('dataPointLabelCreating',tBlock);renderContext.txtBlocks.push(tBlock);this._addShapeAnimation(tBlock,i,length);}},_getAnimation:function(){return this.animation||this.chart.options.animation;},_addShapeAnimation:function(shape,i,len){var anOptions=this._getAnimation();if(!anOptions||anOptions.enabled===false){return;}
var animation=new OptionAnimation(anOptions,shape,"visible",false,true);var duration=animation.duration/len;var delayTime=animation.delayTime+i*duration;animation.delayTime=delayTime;animation.duration=duration;this.chart.storyboard.addAnimation(animation);},_addLengthAnimation:function(polyline){var anOptions=this._getAnimation();if(!anOptions||anOptions.enabled===false){return;}
var animation=new Animation(anOptions,polyline,"length",0,polyline.getLength());this.chart.storyboard.addAnimation(animation);},_setShapeSettings:function(shape,index){shape.itemIndex=index;shape.seriesIndex=this.seriesIndex;this.setShadows(shape);shape.nullHandling=this.nullHandling;if(shape.context&&this.hasNullValues&&jFunc.inArray(index,this.nullIndexes)!==-1){jFunc.extend(shape,this.emptyPointStyleObj);shape.context.isEmptyData=true;}},_setLineClasses:function(shape){this.addClasses(shape,['dvx-chart-stroke-series','dvx-chart-stroke-color-'+this.seriesIndex]);},_setFillClasses:function(shape){this.addClasses(shape,['dvx-chart-fill-color-'+this.seriesIndex]);},setSeriesClasses:function(shape){this.addClasses(shape,["dvx-chart-series-"+this.seriesIndex]);if(this.options&&this.options.class){shape.addClass(this.options.class);}},setDataGroupClasses:function(shape){shape.addClass("dvx-chart-series-data-group");switch(this.decorationType){case 'fill':this._setFillClasses(shape);break;case 'stroke':this._setLineClasses(shape);break;case 'combinded':this._setFillClasses(shape);this._setLineClasses(shape);break;}},setMarkerGroupClasses:function(shape){shape.addClass("dvx-chart-series-markers-group");var markerClass='dvx-chart-fill-color-'+this.seriesIndex;switch(this.markers.type){case 'cross':case 'plus':case 'line':markerClass='dvx-chart-stroke-color-'+this.seriesIndex+' dvx-chart-marker-stroke-width';break;}
shape.addClass(markerClass);},setLabelGroupClasses:function(shape){shape.addClass("dvx-chart-series-labels-group");},setItemClasses:function(shape,index){shape.addClass('dvx-chart-series-item');},setAreaLineClasses:function(shape){this.addClasses(shape,['dvx-chart-area-line']);},setAreaPolygonClasses:function(shape){this.addClasses(shape,['dvx-chart-area-polygon']);},setLabelClasses:function(shape,index){shape.addClasses(['dvx-chart-series-label']);},setShadows:function(shape){var chart=this.chart,opts=this.shadows||{};if(!chart){return;}
var shadows=chart.options.shadows;shape.shadowColor=opts.shadowColor||shadows.shadowColor;shape.shadowBlur=!jMath.isNull(opts.shadowBlur)?opts.shadowBlur:shadows.shadowBlur;shape.shadowOffsetX=!jMath.isNull(opts.shadowOffsetX)?opts.shadowOffsetX:shadows.shadowOffsetX;shape.shadowOffsetY=!jMath.isNull(opts.shadowOffsetY)?opts.shadowOffsetY:shadows.shadowOffsetY;},_processXAxisType:function(){var data=this.arrData;var xAxisType='none';this.isSingleArrData=false;if(!jFunc.isArray(data)){this.xAxisType=xAxisType;return;}
for(var i=0;i<data.length;i++){var item=data[i];if(item===null||item===undefined){continue;}
if(!jFunc.isArray(item)){xAxisType='CategoryAxis';this.isSingleArrData=true;break;}
var val=item[0];if(val===null||val==undefined){continue;}
var type=jFunc.type(val);switch(type){case 'number':xAxisType='LinearAxis';break;case 'date':xAxisType='DateTimeAxis';break;case 'string':xAxisType='CategoryAxis';break;default:xAxisType='none';break;}
break;}
this.xAxisType=xAxisType;},_resolveAxisType:function(axisOp){var loc=axisOp.location;if(!loc){return;}
if(this.isVertical){if(loc==='bottom'||loc==='top'){return;}}
else{if(loc==='left'||loc==='right'){return;}}
switch(this.xAxisType){case 'LinearAxis':axisOp.type='linear';break;case 'DateTimeAxis':axisOp.type='dateTime';break;case 'CategoryAxis':axisOp.type='category';break;}},_processData:function(){this.arrData=null;if(this.data){if(!this.xValuesType&&!this.yValuesType){this.arrData=jMath.cloneArray(this.data);}
else{this.arrData=[];for(var i=0;i<this.data.length;i++){var dItem=this.data[i].slice(0);dItem[0]=jMath.processDataValue(dItem[0],this.xValuesType);dItem[1]=jMath.processDataValue(dItem[1],this.yValuesType);this.arrData.push(dItem);}}}
else{var arrDataSource=this.chart.arrDataSource;if(arrDataSource){var xValuesField=this.xValuesField;var yValuesField=this.yValuesField;var xValues=jMath.processDataField(arrDataSource,xValuesField);var yValues=jMath.processDataField(arrDataSource,yValuesField);if(yValues){this.arrData=jMath.mergeArraysXY(xValues,yValues);}}}
this._processXAxisType();this._processNullValues();this._processErrorBars();},_processErrorBars:function(){var errorBars=this.errorBars;if(errorBars&&this.hasErrorBars&&this.arrData){this.errorBarsObj=new ErrorBars(this,errorBars);}},_processNullValues:function(){this.hasRealData=this.hasData();if(!this.hasRealData){return;}
this.hasNullValues=false;var arrData=this.arrData;if(!arrData||this.nullHandling!='emptyPoint'){return;}
this.hasNullValues=true;if(this.nullValuesIndexes){this.nullIndexes=this.nullValuesIndexes;return;}
var nullIndexes=this.nullIndexes=[];var item,nullItem,nullX,nullY,newValue;for(var i=0;i<arrData.length;i++){item=arrData[i];nullItem=jMath.isNull(item);if(this.isSingleArrData){if(nullItem){newValue=jMath.calcNullValue(arrData,i,'vl');if(i==0&&jMath.isNull(newValue)){this.hasRealData=false;return;}
nullIndexes.push(i);arrData[i]=newValue;}}
else{nullX=nullItem||jMath.isNull(item[0]);nullY=nullItem||jMath.isNull(item[1]);if(!nullX&&!nullY){continue;}
if(nullItem){arrData[i]=[];}
if(nullX){newValue=jMath.calcNullValue(arrData,i,'x',this.xAxisType);if(i==0&&jMath.isNull(newValue)){this.hasRealData=false;return;}
arrData[i][0]=newValue;}
if(nullY){newValue=jMath.calcNullValue(arrData,i,'y');if(i==0&&jMath.isNull(newValue)){this.hasRealData=false;return;}
arrData[i][1]=newValue;}
nullIndexes.push(i);}}},_processDataXYZ:function(){this.arrData=null;if(this.data){if(!this.xValuesType&&!this.fromValuesType&&!this.toValuesType){this.arrData=jMath.cloneArray(this.data);}
else{this.arrData=[];for(var i=0;i<this.data.length;i++){var dItem=this.data[i].slice(0);dItem[0]=jMath.processDataValue(dItem[0],this.xValuesType);dItem[1]=jMath.processDataValue(dItem[1],this.fromValuesType);dItem[2]=jMath.processDataValue(dItem[2],this.toValuesType);dItem[3]=jMath.processDataValue(dItem[3],this.labelValuesType);this.arrData.push(dItem);}}}
else{var arrDataSource=this.chart.arrDataSource;if(arrDataSource){var xValuesField=this.xValuesField;var fromValuesField=this.fromValuesField;var toValuesField=this.toValuesField;var labelValuesField=this.labelValuesField;var xValues=jMath.processDataField(arrDataSource,xValuesField);var fromValues=jMath.processDataField(arrDataSource,fromValuesField);var toValues=jMath.processDataField(arrDataSource,toValuesField);var labelValues=jMath.processDataField(arrDataSource,labelValuesField);if(xValues&&fromValues&&toValues){this.arrData=jMath.mergeArrays([xValues,fromValues,toValues,labelValues]);}}}
this._processXAxisType();this.hasRealData=this.hasData();},_initXYData:function(){var data=this.arrData;var min=maxVl;var max=minVl;var minX=maxVl;var maxX=minVl;var len=data.length;for(var i=0;i<len;i++){var vl=data[i];if(vl===null||vl===undefined){continue;}
var vlX=vl[0];if(minX>vlX){minX=vlX;}
if(maxX<vlX){maxX=vlX;}
var vlY=vl[1];if(!jMath.isNull(vlY)){if(min>vlY){min=vlY;}
if(max<vlY){max=vlY;}}}
var errorBars=this.errorBarsObj;if(errorBars){min-=errorBars.getLowerError();max+=errorBars.getUpperError();}
this.min=min;this.max=max;this.minX=minX;this.maxX=maxX;},_initCatValueData:function(){var data=this.arrData;var min=maxVl;var max=minVl;var categories=[];var len=data.length;for(var i=0;i<len;i++){var vl=data[i];if(vl===null||vl===undefined){categories.push((i+1).toString());continue;}
var vlY=vl;if(jFunc.isArray(vl)==false){categories.push((i+1).toString());}
else{categories.push(vl[0]);vlY=vl[1];}
if(!jMath.isNull(vlY)){if(min>vlY){min=vlY;}
if(max<vlY){max=vlY;}}}
var errorBars=this.errorBarsObj;if(errorBars){min-=errorBars.getLowerError();max+=errorBars.getUpperError();}
this.min=min;this.max=max;this.categories=categories;},_initDateValueData:function(){var data=this.arrData;var min=maxVl;var max=minVl;var minX=maxVl;var maxX=minVl;var len=data.length;var vl,vlX,vlY;for(var i=0;i<len;i++){vl=data[i];if(vl===null||vl===undefined){continue;}
vlX=vl[0];if(jMath.isNull(vlX)){continue;}
vlX=vlX.getTime();if(minX>vlX){minX=vlX;}
if(maxX<vlX){maxX=vlX;}
vlY=vl[1];if(!jMath.isNull(vlY)){if(min>vlY){min=vlY;}
if(max<vlY){max=vlY;}}}
var errorBars=this.errorBarsObj;if(errorBars){min-=errorBars.getLowerError();max+=errorBars.getUpperError();}
this.min=min;this.max=max;this.minX=minX;this.maxX=maxX;},_initXYDataRange:function(from,to){var data=this.arrData;var min=maxVl;var max=minVl;var minX=maxVl;var maxX=minVl;var len=data.length;for(var i=0;i<len;i++){var vl=data[i];if(vl===null||vl===undefined||!jFunc.isArray(vl)){continue;}
var vlX=vl[0];if(minX>vlX){minX=vlX;}
if(maxX<vlX){maxX=vlX;}
for(var j=from;j<to;j++){var vlY=vl[j];if(min>vlY){min=vlY;}
if(max<vlY){max=vlY;}}}
this.min=min;this.max=max;this.minX=minX;this.maxX=maxX;},_initCatValueDataRange:function(from,to,allowDuplicated){var data=this.arrData;var min=maxVl;var max=minVl;var categories=[];var len=data.length;for(var i=0;i<len;i++){var vl=data[i];if(vl===null||vl===undefined){categories.push((i+1).toString());continue;}
var cat=vl[0];if(allowDuplicated||jFunc.inArray(cat,categories)==-1){categories.push(cat);}
for(var j=from;j<to;j++){var vlY=vl[j];if(jMath.isNull(vlY)){continue;}
if(min>vlY){min=vlY;}
if(max<vlY){max=vlY;}}}
this.min=min;this.max=max;this.categories=categories;},_initDateValueDataRange:function(from,to){var data=this.arrData;var min=maxVl;var max=minVl;var minX=maxVl;var maxX=minVl;var len=data.length;for(var i=0;i<len;i++){var vl=data[i];if(vl===null||vl===undefined||!jFunc.isArray(vl)){continue;}
var vlX=vl[0].getTime();if(minX>vlX){minX=vlX;}
if(maxX<vlX){maxX=vlX;}
for(var j=from;j<to;j++){var vlY=vl[j];if(jMath.isNull(vlY)){continue;}
if(min>vlY){min=vlY;}
if(max<vlY){max=vlY;}}}
this.min=min;this.max=max;this.minX=minX;this.maxX=maxX;},_initData:function(){switch(this.xAxisType){case 'LinearAxis':this._initXYData();return;case 'DateTimeAxis':this._initDateValueData();return;case 'CategoryAxis':this._initCatValueData();return;}},_initVisibleData:function(){switch(this.xAxisType){case 'LinearAxis':case 'DateTimeAxis':this._initVisibleXYData();return;case 'CategoryAxis':this._initVisibleCatValueData();return;}},_initVisibleXYData:function(){if(this.realYAxis.zoomEnabled){return;}
var xAxis=this.realXAxis;var vMin=xAxis.visibleMinimum||xAxis.minimum;var vMax=xAxis.visibleMaximum||xAxis.maximum;var hasMin=!jMath.isNull(vMin);var hasMax=!jMath.isNull(vMax);if(!hasMin&&!hasMax){return;}
var data=this.arrData;var min=maxVl;var max=minVl;var len=data.length;for(var i=0;i<len;i++){var vl=data[i];if(vl===null||vl===undefined){continue;}
var vlY=vl[1];if(jMath.isNull(vlY)){continue;}
var vlX=vl[0];if((hasMin&&vlX<vMin)||(hasMax&&vlX>vMax)){continue;}
if(min>vlY){min=vlY;}
if(max<vlY){max=vlY;}}
var errorBars=this.errorBarsObj;if(errorBars){min-=errorBars.getLowerError();max+=errorBars.getUpperError();}
this.min=min;this.max=max;},_initVisibleCatValueData:function(){if(this.realYAxis.zoomEnabled){return;}
var xAxis=this.realXAxis;var vMin=xAxis.visibleMinimum||xAxis.minimum;var vMax=xAxis.visibleMaximum||xAxis.maximum;var hasMin=!jMath.isNull(vMin);var hasMax=!jMath.isNull(vMax);if(!hasMin&&!hasMax){return;}
var data=this.arrData;var min=maxVl;var max=minVl;var len=data.length;for(var i=0;i<len;i++){var vl=data[i];if(vl===null||vl===undefined){continue;}
var vlY=vl;if(jFunc.isArray(vl)){vlY=vl[1];}
if(jMath.isNull(vlY)){continue;}
if((hasMin&&i+1<vMin)||(hasMax&&i>vMax)){continue;}
if(min>vlY){min=vlY;}
if(max<vlY){max=vlY;}}
var errorBars=this.errorBarsObj;if(errorBars){min-=errorBars.getLowerError();max+=errorBars.getUpperError();}
this.min=min;this.max=max;},_initVisibleCatValueDataRange:function(from,to){if(this.realYAxis.zoomEnabled){return;}
var xAxis=this.realXAxis;var vMin=xAxis.visibleMinimum||xAxis.minimum;var vMax=xAxis.visibleMaximum||xAxis.maximum;var hasMin=!jMath.isNull(vMin);var hasMax=!jMath.isNull(vMax);if(!hasMin&&!hasMax){return;}
var data=this.arrData;var min=maxVl;var max=minVl;var len=data.length;for(var i=0;i<len;i++){var vl=data[i];if(vl===null||vl===undefined){continue;}
if((hasMin&&i+1<vMin)||(hasMax&&i>vMax)){continue;}
for(var j=from;j<to;j++){var vlY=vl[j];if(jMath.isNull(vlY)){continue;}
if(min>vlY){min=vlY;}
if(max<vlY){max=vlY;}}}
this.min=min;this.max=max;},_initVisibleXYDataRange:function(from,to){if(this.realYAxis.zoomEnabled){return;}
var xAxis=this.realXAxis;var vMin=xAxis.visibleMinimum||xAxis.minimum;var vMax=xAxis.visibleMaximum||xAxis.maximum;var hasMin=!jMath.isNull(vMin);var hasMax=!jMath.isNull(vMax);if(!hasMin&&!hasMax){return;}
var data=this.arrData;var min=maxVl;var max=minVl;var len=data.length;for(var i=0;i<len;i++){var vl=data[i];if(vl===null||vl===undefined){continue;}
var vlX=vl[0];if((hasMin&&vlX<vMin)||(hasMax&&vlX>vMax)){continue;}
for(var j=from;j<to;j++){var vlY=vl[j];if(jMath.isNull(vlY)){continue;}
if(min>vlY){min=vlY;}
if(max<vlY){max=vlY;}}}
this.min=min;this.max=max;},_initStackedData:function(seriesType){var data=this.arrData;if(jFunc.isArray(data)==false){return;}
var clust=this.chart.series._findStackedClusters(this,seriesType);var stackedSeries=this.chart.series._getStackedSeriesFromType(seriesType,this.stackedGroupName);var stackedResult=this._calcStackedData(data,clust,stackedSeries);jFunc.extend(this,stackedResult);},_initVisibleStackedData:function(seriesType){var data=this.arrData;if(jFunc.isArray(data)==false){return;}
var clust=this.chart.series._findStackedClusters(this,seriesType);var stackedSeries=this.chart.series._getStackedSeriesFromType(seriesType,this.stackedGroupName);var stackedResult=this._calcVisibleStackedData(data,clust,stackedSeries);jFunc.extend(this,stackedResult);},_calcStackedData:function(data,clust,stackedSeries){var min=maxVl;var max=minVl;var minX=maxVl;var maxX=minVl;var categories=[];var len=data.length;var tuples={};for(var i=0;i<len;i++){var vl=data[i];if(vl===null||vl===undefined){categories.push((i+1).toString());continue;}
if(this.xAxisType==='CategoryAxis'){if(!jFunc.isArray(vl)){categories.push((i+1).toString());}
else{categories.push(vl[0]);}}
else{var vlX=vl[0];if(jFunc.type(vlX)=='date'){vlX=vlX.getTime();}
if(minX>vlX){minX=vlX;}
if(maxX<vlX){maxX=vlX;}}
var xValue=this._getXValue(vl,i);var tuple={positive:0,negative:0};var oldTuple=null;for(var j=clust.index-1;j>=0;j--){var dataValues=stackedSeries[j].dataValues;if(!dataValues){continue;}
oldTuple=dataValues[xValue];if(oldTuple){tuple.positive=oldTuple.positive;tuple.negative=oldTuple.negative;break;}}
if(jFunc.isArray(vl)){vl=vl[1];}
tuple.actualValue=vl;if(!jMath.isNull(vl)){if(vl>0){tuple.positive+=vl;tuple.value=tuple.positive;}
else if(vl<0){tuple.negative+=vl;tuple.value=tuple.negative;}
else{if(oldTuple!=null){tuple.value=oldTuple.value;}
else{tuple.value=0;}}}
else{tuple.value=null;}
tuples[xValue]=tuple;if(tuple.value){max=Math.max(max,tuple.value);min=Math.min(min,tuple.value);}}
var result={min:min,max:max,dataValues:tuples};if(this.xAxisType=='CategoryAxis'){result.categories=categories;}
else{result.minX=minX;result.maxX=maxX;}
return result;},_calcVisibleStackedData:function(data,clust,stackedSeries){if(this.realYAxis.zoomEnabled){return;}
var xAxis=this.realXAxis;if(!xAxis){return;}
var vMin=xAxis.visibleMinimum||xAxis.minimum;var vMax=xAxis.visibleMaximum||xAxis.maximum;var hasMin=!jMath.isNull(vMin);var hasMax=!jMath.isNull(vMax);if(!hasMin&&!hasMax){return;}
var min=maxVl;var max=minVl;var len=data.length;var tuples={};for(var i=0;i<len;i++){var vl=data[i];if(vl===null||vl===undefined){continue;}
if(this.xAxisType==='CategoryAxis'){if((hasMin&&i+1<vMin)||(hasMax&&i>vMax)){continue;}}
else{var vlX=vl[0];if((hasMin&&vlX<vMin)||(hasMax&&vlX>vMax)){continue;}}
var xValue=this._getXValue(vl,i);var tuple={positive:0,negative:0};var oldTuple=null;for(var j=clust.index-1;j>=0;j--){oldTuple=stackedSeries[j].dataValues[xValue];if(oldTuple){tuple.positive=oldTuple.positive;tuple.negative=oldTuple.negative;break;}}
if(jFunc.isArray(vl)){vl=vl[1];}
tuple.actualValue=vl;if(vl>0){tuple.positive+=vl;tuple.value=tuple.positive;}
else if(vl<0){tuple.negative+=vl;tuple.value=tuple.negative;}
else{if(oldTuple!=null){tuple.value=oldTuple.value;}
else{tuple.value=0;}}
tuples[xValue]=tuple;max=Math.max(max,tuple.value);min=Math.min(min,tuple.value);}
var result={min:min,max:max,dataValues:tuples};return result;},_createXAxis:function(){if(!this.hasRealData){return null;}
var settings={location:'bottom',orientation:'x'};var axis;switch(this.xAxisType){case 'DateTimeAxis':axis=new DateTimeAxis(settings);break;case 'CategoryAxis':axis=new CategoryAxis(settings);break;default:axis=new LinearAxis(settings);break;}
axis.chart=this.chart;return axis;},_createYAxis:function(){var axis=new LinearAxis({location:'left',orientation:'y'});axis.chart=this.chart;return axis;},_initXAxis:function(axes){var axis=this._findXAxis(axes);if(!axis){axis=this._createXAxis();if(axis){axes.push(axis);}}
this.realXAxis=axis;},_initYAxis:function(axes){var axis=this._findYAxis(axes);if(!axis){axis=this._createYAxis();axes.push(axis);}
this.realYAxis=axis;},_initSharedAxes:function(){if(this.realXAxis&&this.realYAxis){this.realXAxis.sharedAxis=this.realYAxis;this.realYAxis.sharedAxis=this.realXAxis;}},_findAxis:function(axes,name){if(name!=null){for(var i=0;i<axes.length;i++){var axis=axes[i];if(axis.name==name){return axis;}}}
return null;},_findXAxis:function(axes){var axis=this._findAxis(axes,this.axisX);if(axis!=null){return axis;}
for(var i=0;i<axes.length;i++){axis=axes[i];if(axis.getOrientation(this)!='x'||axis.isVertical()){continue;}
if(axis.DataType==this.xAxisType){return axis;}}
return null;},_findYAxis:function(axes){var axis=this._findAxis(axes,this.axisY);if(axis!=null){return axis;}
for(var i=0;i<axes.length;i++){axis=axes[i];if(axis.getOrientation(this)!='y'||axis.isVertical()==false){continue;}
if(axis.DataType==='LinearAxis'){return axis;}}
return null;},_getLegendItems:function(options){var items=[];if(!this.showInLegend){return items;}
var title;if(this.title){title=this.title;}
else{var index=jFunc.inArray(this,this.chart.series.items)+1;title='Series '+index.toString();}
var marker=new Marker();if(this.decorationType==='stroke'){marker.type='line';}else if(this.type==='scatter'||this.type==='bubble'){if(this.markers){marker.type=this.markers.type;}}
var context={chart:this.chart,series:this};jFunc.extend(true,marker,this.legendMarker||{});var itemOptions=jFunc.extend(false,{},options,{chart:this.chart,series:this,context:context,text:title,marker:marker,showInScene:this.showInScene});var item=new LegendItem(itemOptions);items.push(item);return items;},_getPixelMargins:function(axis){var offset=4;var markersOffset=0;var size;if(this.markers){size=this.markers.getSize();markersOffset=this.markers.offset;}
else{size={width:0,height:0};}
var lblSize;if(this.labels&&this.labels.visible!==false){var tBlock=new TextBlock('TEST');jFunc.extend(tBlock,this.labels);lblSize=tBlock.measure();}
else{lblSize={width:0,height:0};}
var isVertical=axis.isVertical();var isBar=this.isVertical;var margin;if(isVertical){margin=size.height/2.0+lblSize.height+offset;}
else{margin=size.width/2.0+lblSize.width+offset;}
if((isBar&&!isVertical)||(!isBar&&isVertical)){margin+=markersOffset;margin*=1.25;var ratio=margin/axis.length;margin*=1+ratio;}
if(axis.getOrientation(this)=='x'){margin=Math.max(margin,6);}
else{margin=Math.max(margin,12);}
var errorBars=this.errorBarsObj;if(errorBars&&axis.getOrientation(this)=='x'){margin=Math.max(margin,errorBars.capLength/2+offset);}
return{left:margin,right:margin};},_isAnchoredToOrigin:function(){return false;},_getLabelText:function(vl){var formatterFunction=this.chart.getLabelFormatter();var text=formatterFunction(this.labels.stringFormat,vl);return text;},_getLabelValue:function(vl,index){switch(this.labels.valueType){case 'percentage':vl=this.getPercentage(vl,index);break;}
return vl;},_getDataPointLabel:function(vl,x,y,offset,dataValue,index){var isTop=vl>=this.realYAxis.getCrossing();var text=this._getLabelText(dataValue);var tBlock=new TextBlock(text);this.setLabelClasses(tBlock,index);this.setShadows(tBlock);jFunc.extend(tBlock,this.labels);tBlock.measure();tBlock.textAlign='center';tBlock.x=x;if(isTop){tBlock.y=y-offset;tBlock.textBaseline='bottom';}
else{tBlock.y=y+offset;tBlock.textBaseline='top';}
return tBlock;},_getTotal:function(seriesType,index){var series=this.chart.series._getSeriesFromType(seriesType);var positive=0;var negative=0;for(var i=0;i<series.length;i++){var ser=series[i];var data=ser.arrData;if(data===null||data===undefined){continue;}
var vl=data[index];if(jFunc.isArray(vl)){vl=vl[1];}
if(vl===null||vl===undefined){continue;}
if(vl>0){positive+=vl;}
else{negative+=vl;}}
return{positive:positive,negative:negative};},_getStackedTotal:function(series,xValue){var positive=0;var negative=0;for(var i=0;i<series.length;i++){var ser=series[i];var dataValues=ser.dataValues;if(!dataValues){continue;}
var val=dataValues[xValue];if(!val){continue;}
if(val.actualValue>0){positive+=val.actualValue;}
else{negative+=val.actualValue;}}
return{positive:positive,negative:negative};},_getPrevStackedPosition:function(series,serIndex,xValue,crossPos,axis,isPositive){for(var i=serIndex-1;i>=0;i--){var dataValues=series[i].dataValues;if(!dataValues){continue;}
var val=dataValues[xValue];if(!val){continue;}
var value=this._scaleValue(series,val.value,xValue);if(isPositive){if(val.value==val.positive){return axis.getPosition(value);}}
else{if(val.value==val.negative){return axis.getPosition(value);}}}
return crossPos;},_getXValue:function(vl,index){var xValue,data=this.arrData;if(this.xAxisType=='CategoryAxis'){if(jFunc.isArray(vl)==false){xValue=(index+1).toString();}
else{xValue=vl[0];}}
else{xValue=vl[0];if(jFunc.type(xValue)=='date'){xValue=xValue.getTime();}}
if(xValue){xValue=xValue.toString();}
else{xValue='';}
return xValue;},_getTooltipValue:function(context){return '<span class="dvx-chart-tooltip-series-value">'+context.y+'</span>';},_getTooltipTitleColon:function(){return ': ';},_getTooltip:function(context){var tooltip=this._getTooltipValue(context),seriesColor='',shapeColor;if(this.title){if(context.shape){shapeColor=context.shape.getTooltipColor();if(shapeColor){seriesColor='style="color:'+shapeColor+'"';}}
tooltip='<span class="dvx-chart-tooltip-series-title" '+seriesColor+'>'+this._getTooltipTitle()+this._getTooltipTitleColon()+'</span>'+tooltip;}
return '<div class="dvx-chart-tooltip-series">'+tooltip+'</div>';},_calcColumnScale:function(series){var dataPoints=[];for(var i=0;i<series.length;i++){jFunc.merge(dataPoints,series[i].arrData||[]);}
dataPoints.sort(function(a,b){if(!a||!b){return 0;}
return a[0]-b[0];});var a,b,vl,minDiff=maxVl;for(var i=0;i<dataPoints.length-1;i++){vl=dataPoints[i];if(!vl){continue;}
a=vl[0];if(jFunc.type(a)=='date'){a=a.getTime();}
vl=dataPoints[i+1];if(!vl){continue;}
b=vl[0];if(jFunc.type(b)=='date'){b=b.getTime();}
if(a!=b){minDiff=Math.min(minDiff,b-a);}}
var xAxis=this.realXAxis;var axisSeries=xAxis.series;var min=jMath.isNull(xAxis.minimum)?axisSeries.minX:xAxis.minimum;var max=jMath.isNull(xAxis.maximum)?axisSeries.maxX:xAxis.maximum;var range=max-min;if(xAxis.skipEmptyDays){range-=xAxis.totalEmptyDaysTicks;}
range=Math.min(0.5,minDiff/range);return range;},_getSeriesFromThisType:function(){return this.chart.series._getSeriesFromType(this.type);},_hideFromLegend:function(context){var show=!this.showInScene;this.showInScene=show;this.options.showInScene=show;},_handleEvent:function(name,shape){},_render:function(seriesRenderContext){if(!this.hasRealData||!this.isInScene()){return;}
var renderContext={shapes:[],markers:[],txtBlocks:[]};switch(this.xAxisType){case 'LinearAxis':case 'DateTimeAxis':this._renderLinearData(renderContext);break;case 'CategoryAxis':this._renderCatData(renderContext);break;}
this._finalizeRendering(seriesRenderContext,renderContext);},_finalizeRendering:function(seriesRenderContext,renderContext){var contextShapes=seriesRenderContext.contextShapes;var mainGroup=new GroupShape();seriesRenderContext.shapes.push(mainGroup);this.setSeriesClasses(mainGroup);if(renderContext.shapes&&renderContext.shapes.length){var dataGroup=new GroupShape();this.setDataGroupClasses(dataGroup);mainGroup.addShape(dataGroup);dataGroup.addShapes(renderContext.shapes);jFunc.merge(contextShapes,renderContext.shapes);}
if(renderContext.markers&&renderContext.markers.length){var markersGroup=new GroupShape();this.setMarkerGroupClasses(markersGroup);mainGroup.addShape(markersGroup);markersGroup.addShapes(renderContext.markers);jFunc.merge(contextShapes,renderContext.markers);}
if(renderContext.txtBlocks&&renderContext.txtBlocks.length){var textsGroup=new GroupShape();mainGroup.addShape(textsGroup);textsGroup.addShapes(renderContext.txtBlocks);this.setLabelGroupClasses(textsGroup);jFunc.merge(contextShapes,renderContext.txtBlocks);}},_createErrorBars:function(shapes){if(this.errorBarsObj){this.errorBarsObj._createShapes(shapes);}},hasData:function(){return!!this.arrData&&this.xAxisType!=='none';},getPercentage:function(vl,index){var total=this._getTotal(this.type,index);var sum=vl>0?total.positive:total.negative;vl=sum!=0?100*Math.abs(vl)/Math.abs(sum):0;return vl;},setOptions:function(options){var settings=jFunc.extend({},this.defaults,options||{});jFunc.extend(this,settings);this.options=options;if(options){this.emptyPointStyleObj=new EmptyPointStyle(settings.emptyPointStyle);}
if(settings.markers!=null){this.markers=new Marker(settings.markers);}},isInScene:function(){return this.visible&&this.showInScene;},_getTooltipTitle:function(){return jMath.replaceTextForTooltip(this.title);},addClasses:function(shape,classes){classes.forEach(function(item){shape.addClass(item);});},getLabelsOffset:function(){var hasMarkers=this.markers&&this.markers.isVisible();var offset=hasMarkers?this.markers.size/2:0;var errorBars=this.errorBarsObj;if(errorBars){offset=Math.max(offset,errorBars.getMaxLength());}
return offset;},defaults:{pointWidth:0.6,minimumWidth:1,nullHandling:'break',visible:true,showInLegend:true,showInScene:true}}
function LineSeries(options){var defs=jFunc.extend(true,{},this.defaults,{lineWidth:2,markers:{}});this.defaults=defs;Series.call(this,options);this.hasErrorBars=true;}
LineSeries.prototype=new Series();LineSeries.constructor=LineSeries;LineSeries.prototype._renderCatData=function(renderContext){var data=this.arrData;var len=data.length;var hasMarkers=this.markers&&this.markers.isVisible();var pts=[];var cPoints=[];var lblOffset=this.getLabelsOffset();var x,y,vlX,vlY;for(var i=0;i<len;i++){var vl=data[i];if(vl===null||vl===undefined){pts.push(null);pts.push(null);if(!hasMarkers){cPoints.push(null);}
continue;}
vlX=x=i+0.5;if(!jFunc.isArray(vl)){vlY=vl;}
else{vlY=vl[1];if(jMath.isNull(vlY)){pts.push(null);pts.push(null);if(!hasMarkers){cPoints.push(null);}
continue;}}
x=this.realXAxis.getPosition(x);y=this.realYAxis.getPosition(vlY);pts.push(x);pts.push(y);if(!hasMarkers){cPoints.push({dataItem:vl,index:i,x:this.realXAxis._getValue(i),y:vlY});}
if(this.realYAxis.isValueVisible(vlY)===false){continue;}
this._addMarkerAndLabel(renderContext,x,y,i,len,null,vlY,lblOffset);}
var polyline=this._createShape(pts,renderContext);if(!hasMarkers&&polyline){polyline.context={chart:this.chart,series:this,points:cPoints};}
else{}};LineSeries.prototype._renderLinearData=function(renderContext){var data=this.arrData;var len=data.length;var hasMarkers=this.markers&&this.markers.isVisible();var hasLabels=this.labels&&this.labels.visible!==false;if(len>1000&&hasMarkers&&!hasLabels){this._renderLargeXYData(renderContext);return;}
var pts=[];var cPoints=[];var lblOffset=this.getLabelsOffset();var x,y,vlX,vlY;for(var i=0;i<len;i++){var vl=data[i];if(vl===null||vl===undefined){pts.push(null);pts.push(null);if(!hasMarkers){cPoints.push(null);}
continue;}
vlX=vl[0];vlY=vl[1];if(jMath.isNull(vlX)||jMath.isNull(vlY)){pts.push(null);pts.push(null);if(!hasMarkers){cPoints.push(null);}
continue;}
x=this.realXAxis.getPosition(vlX);y=this.realYAxis.getPosition(vlY);pts.push(x);pts.push(y);if(!hasMarkers){cPoints.push({dataItem:vl,index:i,x:vlX,y:vlY});}
if(this.realYAxis.isValueVisible(vlY)===false){continue;}
this._addMarkerAndLabel(renderContext,x,y,i,len,vlX,vlY,lblOffset);}
var polyline=this._createShape(pts,renderContext);if(!hasMarkers&&polyline){polyline.context={chart:this.chart,series:this,points:cPoints};}
else{}};LineSeries.prototype._renderLargeXYData=function(renderContext){var data=this.arrData,len=data.length,width=this.chart.gridArea.width,height=this.chart.gridArea.height,xAxis=this.realXAxis,yAxis=this.realYAxis,coefX=2*(xAxis.actualVisibleMaximum-xAxis.actualVisibleMinimum)/width,coefY=2*(yAxis.actualVisibleMaximum-yAxis.actualVisibleMinimum)/height,pts=[],x,y,vlX,vlY,oldX=0,oldY=0,cumX=0,cumY=0,hasOnePoint=false,vl,dx,dy,cPoints=[];for(var i=0;i<len;i++){vl=data[i];if(vl===null||vl===undefined){pts.push(null);pts.push(null);cPoints.push(null);continue;}
vlX=vl[0];vlY=vl[1];if(vlY===null||vlY===undefined){pts.push(null);pts.push(null);cPoints.push(null);continue;}
dx=oldX-vlX;dy=oldY-vlY;cumX+=dx<0?-dx:dx;cumY+=dy<0?-dy:dy;if(hasOnePoint&&cumX<coefX&&cumY<coefY){continue;}
hasOnePoint=true;cumX=0;cumY=0;oldX=vlX;oldY=vlY;x=xAxis.getPosition(vlX);y=yAxis.getPosition(vlY);pts.push(x);pts.push(y);cPoints.push({dataItem:vl,index:i,x:vlX,y:vlY});}
var polyline=this._createShape(pts,renderContext);if(polyline){polyline.context={chart:this.chart,series:this,points:cPoints};}};LineSeries.prototype._createShape=function(pts,renderContext){var polyline=new Polyline(pts);this._setShapeSettings(polyline);renderContext.shapes.push(polyline);this._addLengthAnimation(polyline);return polyline;};function AreaSeries(options){var defs=jFunc.extend(true,{},this.defaults,{lineWidth:0,markers:null});this.defaults=defs;Series.call(this,options);this.decorationType='fill';}
AreaSeries.prototype=new LineSeries();AreaSeries.constructor=AreaSeries;AreaSeries.prototype._createShape=function(pts,renderContext){var linePts=[];jFunc.merge(linePts,pts);var polyline=new Polyline(linePts);this._setShapeSettings(polyline);this.setAreaLineClasses(polyline);var gArea=this.chart.gridArea;var top=gArea.y;var bottom=gArea.y+gArea.height;var crossPos=this.realYAxis.getCrossingPosition();crossPos=jMath.fitInRange(crossPos,top,bottom);var polygon=new Area(pts,crossPos);this._setShapeSettings(polygon);this.setAreaPolygonClasses(polygon);renderContext.shapes.push(polygon);renderContext.shapes.push(polyline);this._addLengthAnimation(polygon);this._addLengthAnimation(polyline);return polyline;}
AreaSeries.prototype._isAnchoredToOrigin=function(){return true;}
function SplineAreaSeries(options){AreaSeries.call(this,options);}
SplineAreaSeries.prototype=new AreaSeries();SplineAreaSeries.constructor=SplineAreaSeries;SplineAreaSeries.prototype._createShape=function(pts,renderContext){var linePts=[];jFunc.merge(linePts,pts);var curve=new Curve(linePts);this._setShapeSettings(curve);this.setAreaLineClasses(curve);var gArea=this.chart.gridArea;var top=gArea.y;var bottom=gArea.y+gArea.height;var crossPos=this.realYAxis.getCrossingPosition();crossPos=jMath.fitInRange(crossPos,top,bottom);var polygon=new Area(pts,crossPos,false,true);this._setShapeSettings(polygon);this.setAreaPolygonClasses(polygon);renderContext.shapes.push(polygon);renderContext.shapes.push(curve);this._addLengthAnimation(polygon);this._addLengthAnimation(curve);return curve;}
function BarSeries(options){this.isVertical=true;Series.call(this,options);this.hasErrorBars=true;this.decorationType='fill';}
BarSeries.prototype=new Series();BarSeries.constructor=BarSeries;BarSeries.prototype._createXAxis=function(){if(!this.hasRealData){return null;}
var settings={location:'left',orientation:'x'};var axis;switch(this.xAxisType){case 'DateTimeAxis':axis=new DateTimeAxis(settings);break;case 'CategoryAxis':axis=new CategoryAxis(settings);break;default:axis=new LinearAxis(settings);break;}
axis.chart=this.chart;return axis;}
BarSeries.prototype._createYAxis=function(){var axis=new LinearAxis({location:'bottom',orientation:'y'});axis.chart=this.chart;return axis;}
BarSeries.prototype._findXAxis=function(axes){var axis=this._findAxis(axes,this.axisX);if(axis!=null){return axis;}
var type;if(this.categories){type=CategoryAxis;}
else{type=LinearAxis;}
for(var i=0;i<axes.length;i++){axis=axes[i];if(axis.getOrientation(this)!='x'||axis.isVertical()==false){continue;}
if(axis instanceof type){return axis;}}
return null;}
BarSeries.prototype._findYAxis=function(axes){var axis=this._findAxis(axes,this.axisY);if(axis!=null){return axis;}
for(var i=0;i<axes.length;i++){axis=axes[i];if(axis.getOrientation(this)!='y'||axis.isVertical()){continue;}
if(axis instanceof LinearAxis){return axis;}}
return null;}
BarSeries.prototype._renderCatData=function(renderContext){var data=this.arrData;var gArea=this.chart.gridArea;var left=gArea.x;var right=left+gArea.width;var crossPos=this.realYAxis.getCrossingPosition();crossPos=jMath.fitInRange(crossPos,left,right);crossPos=Math.round(crossPos);var clust=this.chart.series._findClusters(this,this.type);var len=data.length;var gAreaHeight=gArea.height/this.realXAxis.getZoom();var groupH=gAreaHeight/len;var barH=groupH/clust.count;var h=Math.round(this.pointWidth*barH);var totalBarHeight=clust.count*h;var offset=(groupH-totalBarHeight)/2;offset=Math.round(offset+clust.index*h);h=Math.max(h,this.minimumWidth);var lblOffset=this.getLabelsOffset()+2;var x,y;for(var i=0;i<len;i++){var vl=data[i];if(vl===null||vl===undefined){continue;}
var vlX=i;var vlY;if(!jFunc.isArray(vl)){vlY=vl;}
else{vlY=vl[1];}
if(vlY===null||vlY===undefined){continue;}
y=Math.round(this.realXAxis.getCatPosition(vlX)-offset-h);x=Math.round(this.realYAxis.getPosition(vlY));var mX=x;var width;if(x<=crossPos){width=crossPos-x;var maxLeft=gArea.x-10;if(x<maxLeft){var diff=maxLeft-x;x+=diff;width-=diff;}}
else{width=x-crossPos;x=crossPos;var maxRight=gArea.getRight()+10;if(x+width>maxRight){width=maxRight-x;}}
var context={chart:this.chart,series:this,dataItem:data[i],index:i,x:this.realXAxis._getValue(i),y:vlY};var rect=new Rectangle(x,y,width,h);rect.context=context;rect.center={x:Math.round(mX),y:Math.round(y+h/2)};this._setShapeSettings(rect,i);this.setItemClasses(rect,i);renderContext.shapes.push(rect);this._addAnimation(rect,i,len);y+=h/2;this._addMarkerAndLabel(renderContext,mX,y,i,len,null,vlY,lblOffset,context);}}
BarSeries.prototype._renderLinearData=function(renderContext){var data=this.arrData;var gArea=this.chart.gridArea;var left=gArea.x;var right=left+gArea.width;var crossPos=this.realYAxis.getCrossingPosition();crossPos=jMath.fitInRange(crossPos,left,right);crossPos=Math.round(crossPos);var len=data.length;var gAreaHeight=gArea.height/this.realXAxis.getZoom();var series=this._getSeriesFromThisType();var groupH=this._calcColumnScale(series)*gAreaHeight;var h=this.pointWidth*groupH;h=Math.max(h,this.minimumWidth);var lblOffset=this.getLabelsOffset();var x,y,vlX,vlY,vl;for(var i=0;i<len;i++){vl=data[i];if(vl===null||vl===undefined||!jFunc.isArray(vl)){continue;}
vlX=vl[0];vlY=vl[1];if(vlX===null||vlY===null||vlX===undefined||vlY===undefined){continue;}
var context={chart:this.chart,series:this,dataItem:data[i],index:i,x:vlX,y:vlY};y=this.realXAxis.getPosition(vlX);x=Math.round(this.realYAxis.getPosition(vlY));var mX=x;var width;if(x<=crossPos){width=crossPos-x;var maxLeft=gArea.x-10;if(x<maxLeft){var diff=maxLeft-x;x+=diff;width-=diff;}}
else{width=x-crossPos;x=crossPos;var maxRight=gArea.getRight()+10;if(x+width>maxRight){width=maxRight-x;}}
var locY=y-h/2;var rect=new Rectangle(x,locY,width,h);rect.context=context;rect.center={x:Math.round(mX),y:Math.round(locY+h/2)};this._setShapeSettings(rect,i);this.setItemClasses(rect,i);renderContext.shapes.push(rect);this._addAnimation(rect,i,len);this._addMarkerAndLabel(renderContext,mX,y,i,len,vlX,vlY,lblOffset,context);}}
BarSeries.prototype._addAnimation=function(rect,i,len){var anOptions=this._getAnimation();if(!anOptions||anOptions.enabled===false){return;}
var animation=new Animation(anOptions,rect,"xDecrease",rect.width,0);this._setIsAnimReversed(rect);var duration=animation.duration/len;var delayTime=animation.delayTime+i*duration;animation.delayTime=delayTime;animation.duration=duration;this.chart.storyboard.addAnimation(animation);}
BarSeries.prototype._setIsAnimReversed=function(rect){var rectReversed=rect.context.y<this.realYAxis.getCrossing();var reversed=this.realYAxis.reversed;rect.isAnimReversed=(!reversed&&rectReversed)||(reversed&&!rectReversed);}
BarSeries.prototype._correctMarkerPosition=function(x,y,vl){var offset=this.markers.offset;if(offset){var isTop=vl>=this.realYAxis.getCrossing();x=isTop?x+offset:x-offset;}
return{x:x,y:y};}
BarSeries.prototype._getPixelMargins=function(axis){if(axis.isVertical()==false){var markerMargin=Series.prototype._getPixelMargins.call(this,axis);var margin=axis.length/10;var left=Math.max(margin,markerMargin.left);var right=Math.max(margin,markerMargin.right);return{left:left,right:right};}
if(!this.hasData()){return{left:0,right:0};}
var offset=4;var series=this._getSeriesFromThisType();var columnScale=this._calcColumnScale(series);var length=axis.length;var width=0.5*columnScale*length+offset;return{left:width,right:width};}
BarSeries.prototype._isAnchoredToOrigin=function(){return true;}
BarSeries.prototype._getDataPointLabel=function(vl,x,y,offset,dataValue,index){var isLeft=vl<this.realYAxis.getCrossing();var text=this._getLabelText(dataValue);var tBlock=new TextBlock(text);this.setLabelClasses(tBlock,index);this.setShadows(tBlock);jFunc.extend(tBlock,this.labels);tBlock.measure();tBlock.y=y;var gArea=this.chart.gridArea;if(isLeft){tBlock.x=x-offset;tBlock.textAlign='right';if(tBlock.x-tBlock.width<gArea.x+4){tBlock.x=gArea.x+tBlock.width+4;}}
else{tBlock.x=x+offset;tBlock.textAlign='left';var maxRight=gArea.getRight()-4;if(tBlock.x+tBlock.width>maxRight){tBlock.x=maxRight-tBlock.width;}}
return tBlock;};function BubbleSeries(options){var defs=jFunc.extend(true,{},this.defaults,{markers:{}});this.defaults=defs;Series.call(this,options);this.decorationType='fill';}
BubbleSeries.prototype=new Series();BubbleSeries.constructor=BubbleSeries;BubbleSeries.prototype._processData=function(){this.arrData=null;if(this.data){if(!this.xValuesType&&!this.yValuesType&&!this.sizeValuesType){this.arrData=jMath.cloneArray(this.data);}
else{this.arrData=[];for(var i=0;i<this.data.length;i++){var dItem=this.data[i].slice(0);dItem[0]=jMath.processDataValue(dItem[0],this.xValuesType);dItem[1]=jMath.processDataValue(dItem[1],this.yValuesType);dItem[2]=jMath.processDataValue(dItem[2],this.sizeValuesType);this.arrData.push(dItem);}}}
else{var arrDataSource=this.chart.arrDataSource;if(arrDataSource){var xValuesField=this.xValuesField;var yValuesField=this.yValuesField;var sizeValuesField=this.sizeValuesField;var xValues=jMath.processDataField(arrDataSource,xValuesField);var yValues=jMath.processDataField(arrDataSource,yValuesField);var sizeValues=jMath.processDataField(arrDataSource,sizeValuesField);if(xValues&&yValues&&sizeValues){this.arrData=jMath.mergeArrays([xValues,yValues,sizeValues]);}}}
this._processXAxisType();this.hasRealData=this.hasData();}
BubbleSeries.prototype._initData=function(){if(!this.arrData){return;}
var data=[];jFunc.merge(data,this.arrData);var serItems=this.chart.series.items;for(var i=0;i<serItems.length;i++){var ser=serItems[i];if(ser===this||ser.type!=='bubble'){continue;}
jFunc.merge(data,ser.arrData);}
if(!jFunc.isArray(data)){return;}
var min=maxVl;var max=minVl;var minX=maxVl;var maxX=minVl;var minSize=maxVl;var maxSize=minVl;var len=data.length;for(var i=0;i<len;i++){var vlX=data[i][0];var vlY=data[i][1];var vlSize=data[i][2];if(vlX===null||vlY===null||vlSize===null||vlX===undefined||vlY===undefined||vlSize===undefined){continue;}
minX=Math.min(minX,vlX);maxX=Math.max(maxX,vlX);min=Math.min(min,vlY);max=Math.max(max,vlY);minSize=Math.min(minSize,vlSize);maxSize=Math.max(maxSize,vlSize);}
this.min=min;this.max=max;this.minX=minX;this.maxX=maxX;this.minSize=minSize;this.maxSize=maxSize;}
BubbleSeries.prototype._render=function(seriesRenderContext){if(!this.hasRealData||!this.isInScene()){return;}
var renderContext={markers:[],txtBlocks:[]};var data=this.arrData;var chart=this.chart;var opts=chart.options;var maxSize=opts.maxBubbleSize;if(!maxSize){var ga=chart.gridArea;maxSize=Math.min(ga.width,ga.height)*0.25;}
var bubbleMaxSize=opts.maxBubbleScale;if(!bubbleMaxSize){bubbleMaxSize=this.maxSize;}
var len=data.length;var x,y,r,vlX,vlY;for(var i=0;i<len;i++){var vl=data[i];if(vl===null||vl===undefined){continue;}
vlX=vl[0];vlY=vl[1];r=vl[2];if(vlX===null||vlY===null||r===null||vlX===undefined||vlY===undefined||r===undefined){continue;}
var ratio=r/bubbleMaxSize;var size=Math.max(ratio*maxSize,0);x=this.realXAxis.getPosition(vlX);y=this.realYAxis.getPosition(vlY);if(this.markers&&this.markers.isVisible()){var context={chart:this.chart,series:this,dataItem:data[i],index:i,x:vlX,y:vlY,size:r};var marker=this._getMarker(x,y,size/2,null,null,i,context);renderContext.markers.push(marker);this._addShapeAnimation(marker,i,len);}
if(this.labels&&this.labels.visible!==false){var labelValue=this._getLabelValue(vlY,i);var tBlock=this._getDataPointLabel(vlY,x,y,size/2,labelValue,i);renderContext.txtBlocks.push(tBlock);this._addShapeAnimation(tBlock,i,len);}}
this._finalizeRendering(seriesRenderContext,renderContext);}
BubbleSeries.prototype._getPixelMargins=function(axis){var ga=this.chart.gridArea;if(ga.width==null){return{left:0,right:0};}
var maxSize=Math.min(ga.width,ga.height)*0.35;var r=maxSize/2;return{left:r+4,right:r+4};}
BubbleSeries.prototype._getTooltipTitleColon=function(){return '';};BubbleSeries.prototype._getTooltipValue=function(context){var tooltipValue='<div>y: '+context.y+'</div>'+
'<div>size: '+context.size+'</div>';return '<div class="dvx-chart-tooltip-series-value">'+tooltipValue+'</div>';};function ColumnSeries(options){Series.call(this,options);this.hasErrorBars=true;this.decorationType='fill';}
ColumnSeries.prototype=new Series();ColumnSeries.constructor=ColumnSeries;ColumnSeries.prototype._renderCatData=function(renderContext){var data=this.arrData;var gArea=this.chart.gridArea;var top=gArea.y;var bottom=gArea.y+gArea.height;var crossPos=this.realYAxis.getCrossingPosition();crossPos=jMath.fitInRange(crossPos,top,bottom);crossPos=Math.round(crossPos);var clust=this.chart.series._findClusters(this,this.type);var len=data.length;var gAreaWidth=gArea.width/this.realXAxis.getZoom();var groupW=gAreaWidth/len;var columnW=groupW/clust.count;var w=Math.round(this.pointWidth*columnW);var totalColumnWidth=clust.count*w;var offset=(groupW-totalColumnWidth)/2;offset=Math.round(offset+clust.index*w);w=Math.max(w,this.minimumWidth);var lblOffset=this.getLabelsOffset();var x,y,vlY;for(var i=0;i<len;i++){var vl=data[i];if(vl===null||vl===undefined){continue;}
x=i;if(!jFunc.isArray(vl)){vlY=vl;}
else{vlY=vl[1];}
if(vlY===null||vlY===undefined){continue;}
x=Math.round(this.realXAxis.getCatPosition(x)+offset);y=Math.round(this.realYAxis.getPosition(vlY));var mY=y;var height;if(y<=crossPos){height=crossPos-y;}
else{height=y-crossPos;y=crossPos;}
var context={chart:this.chart,series:this,dataItem:data[i],index:i,x:this.realXAxis._getValue(i),y:vlY};var rect=new Rectangle(x,y,w,height);rect.context=context;rect.center={x:Math.round(x+w/2),y:Math.round(mY)};this._setShapeSettings(rect,i);this.setItemClasses(rect,i);renderContext.shapes.push(rect);this._addAnimation(rect,i,len);if(this.realYAxis.isValueVisible(vlY)===false){continue;}
x+=w/2;this._addMarkerAndLabel(renderContext,x,mY,i,len,null,vlY,lblOffset,context);}}
ColumnSeries.prototype._renderLinearData=function(renderContext){var data=this.arrData;var gArea=this.chart.gridArea;var top=gArea.y;var bottom=gArea.y+gArea.height;var crossPos=this.realYAxis.getCrossingPosition();crossPos=jMath.fitInRange(crossPos,top,bottom);crossPos=Math.round(crossPos);var len=data.length;var gAreaWidth=gArea.width/this.realXAxis.getZoom();var series=this._getSeriesFromThisType();var columnW=this._calcColumnScale(series)*gAreaWidth;var w=this.pointWidth*columnW;w=Math.max(w,this.minimumWidth);var lblOffset=this.getLabelsOffset();var x,y,vlX,vlY;for(var i=0;i<len;i++){var vl=data[i];if(vl===null||vl===undefined||!jFunc.isArray(vl)){continue;}
vlX=x=vl[0];vlY=vl[1];if(x===null||vlY===null||x===undefined||vlY===undefined){continue;}
var context={chart:this.chart,series:this,dataItem:data[i],index:i,x:x,y:vlY};x=this.realXAxis.getPosition(x);y=Math.round(this.realYAxis.getPosition(vlY));var mY=y;var height;if(y<=crossPos){height=crossPos-y;}
else{height=y-crossPos;y=crossPos;}
var locX=x-w/2;var rect=new Rectangle(locX,y,w,height);rect.context=context;rect.center={x:Math.round(locX+w/2),y:Math.round(mY)};this._setShapeSettings(rect,i);this.setItemClasses(rect,i);renderContext.shapes.push(rect);this._addAnimation(rect,i,len);if(this.realYAxis.isValueVisible(vlY)===false){continue;}
this._addMarkerAndLabel(renderContext,x,mY,i,len,vlX,vlY,lblOffset,context);}};ColumnSeries.prototype._addAnimation=function(rect,i,len){var anOptions=this._getAnimation();if(!anOptions||anOptions.enabled===false){return;}
var animation=new Animation(anOptions,rect,"yDecrease",rect.height,0);this._setIsAnimReversed(rect);var duration=animation.duration/len;var delayTime=animation.delayTime+i*duration;animation.delayTime=delayTime;animation.duration=duration;this.chart.storyboard.addAnimation(animation);}
ColumnSeries.prototype._setIsAnimReversed=function(rect){var rectReversed=rect.context.y>=this.realYAxis.getCrossing();var reversed=this.realYAxis.reversed;rect.isAnimReversed=(!reversed&&rectReversed)||(reversed&&!rectReversed);}
ColumnSeries.prototype._getPixelMargins=function(axis){if(axis.isVertical()){var markerMargin=Series.prototype._getPixelMargins.call(this,axis);var margin=axis.length/10;var left=Math.max(margin,markerMargin.left);var right=Math.max(margin,markerMargin.right);return{left:left,right:right};}
if(!this.hasData()){return{left:0,right:0};}
var offset=4;var series=this._getSeriesFromThisType();var columnScale=this._calcColumnScale(series);var length=axis.length;var width=0.5*columnScale*length+offset;return{left:width,right:width};}
ColumnSeries.prototype._isAnchoredToOrigin=function(){return true;};function NoAxesSeries(options){var defs=jFunc.extend(true,{},this.defaults,{margin:8,hiddenSlices:[]});this.defaults=defs;Series.call(this,options);this.decorationType='individualFill';}
NoAxesSeries.prototype=new Series();NoAxesSeries.constructor=NoAxesSeries;NoAxesSeries.prototype._initXAxis=function(axes){}
NoAxesSeries.prototype._initYAxis=function(axes){}
NoAxesSeries.prototype._initVisibleData=function(){}
NoAxesSeries.prototype._processData=function(){this.arrData=null;if(this.data){this.expIndexes=this.explodedSlices;this.arrData=jMath.cloneArray(this.data);}
else{var arrDataSource=this.chart.arrDataSource;if(arrDataSource){var dataLabelsField=this.dataLabelsField;var dataValuesField=this.dataValuesField;var dataLabels=jMath.processDataField(arrDataSource,dataLabelsField);var dataValues=jMath.processDataField(arrDataSource,dataValuesField);this.arrData=jMath.mergeArraysXY(dataLabels,dataValues);this.expIndexes=[];for(var i=0;i<arrDataSource.length;i++){var item=arrDataSource[i];var vl=item[this.explodedField];if(vl){this.expIndexes.push(i);}}}}
this._processXAxisType();this._processNullValues();}
NoAxesSeries.prototype._getYValues=function(){var result=[];var data=this.arrData;var len=data.length;for(var i=0;i<len;i++){var vl=data[i];if(vl===null||vl===undefined){continue;}
var vlY;if(jFunc.isArray(vl)==false){vlY=vl;}
else{vlY=vl[1];}
result.push(Math.abs(vlY));}
return result;}
NoAxesSeries.prototype.getSliceColor=function(index){}
NoAxesSeries.prototype._getLegendItems=function(options){var items=[];if(!this.showInLegend){return items;}
var data=this.arrData;if(!data){return items;}
var values=this._getYValues();var title;var len=data.length;for(var i=0;i<len;i++){var vl=data[i];if(vl===null||vl===undefined){continue;}
var showInScene=jFunc.inArray(i,this.hiddenSlices)===-1;if(!jFunc.isArray(vl)){var index=i+1;title=index.toString();}
else{title=vl[0];}
var marker=new Marker();var context={chart:this.chart,series:this,dataItem:vl,index:i,value:values[i]};var itemOptions=jFunc.extend(false,{},options,{chart:this.chart,series:this,context:context,text:title,marker:marker,individualFill:true,itemIndex:i,showInScene:showInScene});var item=new LegendItem(itemOptions);items.push(item);}
return items;};NoAxesSeries.prototype.setItemClasses=function(shape,index){shape.addClasses(['dvx-chart-series-item','dvx-chart-series-item-'+index,'dvx-chart-fill-color-'+index]);};NoAxesSeries.prototype._hideFromLegend=function(context){var index=context.index;var hiddenSlices=this.hiddenSlices;var arrIndex=jFunc.inArray(index,hiddenSlices);if(arrIndex>-1){hiddenSlices.splice(arrIndex,1);}
else{hiddenSlices.push(index);}};NoAxesSeries.prototype.getTotal=function(){var values=this._getYValues();var sum=0;for(var i=0;i<values.length;i++){if(jFunc.inArray(i,this.hiddenSlices)!==-1){continue;}
sum+=values[i];}
return sum;};NoAxesSeries.prototype.getPercentage=function(vl){var sum=this.getTotal();return 100*vl/sum;};NoAxesSeries.prototype._getTooltip=function(context){var tooltip='<span class="dvx-chart-tooltip-series-value">'+context.value+'</span>',title=context.dataItem[0];if(title){tooltip='<div class="dvx-chart-tooltip-series-title">'+jMath.replaceTextForTooltip(title)+'</div>'+tooltip;}
return tooltip;};function PieSeries(options){var defs=jFunc.extend(true,{},this.defaults,{startAngle:-90,explodedRadius:10,allowExplodeSlices:true,explodedSlices:[],labelsPosition:'inside',labelsAlign:'circle',labelsExtend:20,innerExtent:0,outerExtent:1});this.defaults=defs;NoAxesSeries.call(this,options);}
PieSeries.prototype=new NoAxesSeries();PieSeries.constructor=PieSeries;PieSeries.prototype._createLabels=function(){var data=this.arrData;var pieContext={};if(!data){return pieContext;}
var gArea=this.chart.gridArea;var w=gArea.width;var h=gArea.height;var values=this._getYValues();var len=values.length;var sum=this.getTotal();var margin=this.margin;var radius=this._calcRadius({h:margin,v:margin});if(radius<0){return pieContext;}
var innerRadius=radius*this.innerExtent;var outerRadius=radius*this.outerExtent;var x=gArea.x+w/2;var y=gArea.y+h/2;var unit=(Math.PI*2)/sum;var startAngle=jMath.radians(this.startAngle);var explodedRadius=this.explodedRadius;if(!this.labels||this.labels.visible===false){return pieContext;}
var center,exploded,segment;var tBlocks=[];var outside=this.labelsPosition==='outside';var hiddenSlices=this.hiddenSlices;var animLen=len-hiddenSlices.length;var skippedIndexes=0;for(var i=0;i<len;i++){if(jFunc.inArray(i,hiddenSlices)!==-1){skippedIndexes++;continue;}
var vl=values[i];var percentage=100*vl/sum;var labelValue=vl;var endAngle=startAngle+vl*unit;switch(this.labels.valueType){case 'percentage':labelValue=percentage;break;}
if(vl==0){continue;}
var text=this._getLabelText(labelValue);var angle=(startAngle+endAngle)/2;var textBlock=new TextBlock(text);textBlock.textBaseline='top';this.setLabelClasses(textBlock,i);jFunc.extend(textBlock,this.labels);textBlock.context={chart:this.chart,series:this,dataItem:data[i],index:i,value:vl,percentage:percentage};this.chart.triggerEvent('dataPointLabelCreating',textBlock);var size=textBlock.measure();var cx=x;var cy=y;exploded=this.isExploded(i);if(exploded){cy=y+explodedRadius*Math.sin(angle);cx=x+explodedRadius*Math.cos(angle);}
if(outside){center=this._getSliceCenter(cx,cy,angle,outerRadius+this.labelsExtend);}
else{var nRadius=innerRadius?(innerRadius+outerRadius)/2:outerRadius*0.6;center=this._getSliceCenter(cx,cy,angle,nRadius);}
textBlock.x=center.x-size.width/2;textBlock.y=center.y-size.height/2;startAngle=endAngle;if(!outside&&this.isOverlap(textBlock,tBlocks)){continue;}
tBlocks.push(textBlock);segment={pt:this._getSliceCenter(cx,cy,angle,outerRadius),angle:angle,index:i,animIndex:i-skippedIndexes,cx:cx,cy:cy};angle=jMath.normalizeAngle(angle+Math.PI/2);segment.isLeft=angle>=Math.PI;textBlock.segment=segment;this._addShapeAnimation(textBlock,i-skippedIndexes,animLen);}
jFunc.extend(pieContext,{x:x,y:y,radius:radius,margin:margin,labels:tBlocks});return pieContext;}
PieSeries.prototype._arrangeLabels=function(pieContext){var txtBlocks=pieContext.labels;if(!txtBlocks||this.labelsPosition!='outside'){return{margins:{h:this.margin,v:this.margin},lines:[]};}
var leftLabels=[];var rightLabels=[];var margins=this._calculateLabelsMargin(txtBlocks,pieContext);var radius=this._calcRadius(margins);var innerRadius=radius*this.innerExtent;var outerRadius=radius*this.outerExtent;pieContext.radius=outerRadius;var txtBlock,i,w,maxLeftWidth=minVl,maxRightWidth=minVl;for(i=0;i<txtBlocks.length;i++){txtBlock=txtBlocks[i];w=txtBlock.width;if(txtBlock.segment.isLeft){leftLabels.push(txtBlock);maxLeftWidth=Math.max(maxLeftWidth,w);}
else{rightLabels.push(txtBlock);maxRightWidth=Math.max(maxRightWidth,w);}}
leftLabels.sort(this.labelComparator(true));rightLabels.sort(this.labelComparator(false));var lines=[];var angle,segment,center,exploded,cx,cy;var explodedRadius=this.explodedRadius;for(i=0;i<leftLabels.length;i++){txtBlock=leftLabels[i];segment=txtBlock.segment;cx=pieContext.x;cy=pieContext.y;angle=segment.angle;exploded=this.isExploded(segment.index);if(exploded){cy+=explodedRadius*Math.sin(angle);cx+=explodedRadius*Math.cos(angle);}
center=this._getSliceCenter(cx,cy,angle,outerRadius+this.labelsExtend);txtBlock.x=center.x-txtBlock.width-this.labelsExtend;txtBlock.y=center.y-txtBlock.height/2;segment.pt=this._getSliceCenter(cx,cy,angle,outerRadius);}
var distances=this._distancesBetweenLabels(leftLabels);this._distributeLabels(distances,leftLabels);for(i=0;i<leftLabels.length;i++){txtBlock=leftLabels[i];this._hLabelAlign(txtBlock,maxLeftWidth,maxRightWidth,pieContext);lines.push(this._addLabelLine(txtBlock,pieContext,txtBlocks.length));}
for(i=0;i<rightLabels.length;i++){txtBlock=rightLabels[i];segment=txtBlock.segment;cx=pieContext.x;cy=pieContext.y;angle=segment.angle;exploded=this.isExploded(segment.index);if(exploded){cy+=explodedRadius*Math.sin(angle);cx+=explodedRadius*Math.cos(angle);}
center=this._getSliceCenter(cx,cy,angle,outerRadius+this.labelsExtend);txtBlock.x=center.x+this.labelsExtend;txtBlock.y=center.y-txtBlock.height/2;segment.pt=this._getSliceCenter(cx,cy,angle,outerRadius);}
distances=this._distancesBetweenLabels(rightLabels);this._distributeLabels(distances,rightLabels);for(i=0;i<rightLabels.length;i++){txtBlock=rightLabels[i];this._hLabelAlign(txtBlock,maxLeftWidth,maxRightWidth,pieContext);lines.push(this._addLabelLine(txtBlock,pieContext,txtBlocks.length));}
return{margins:margins,lines:lines};}
PieSeries.prototype.labelComparator=function(reverse){reverse=(reverse)?-1:1;return function(a,b){var angleA=a.segment.angle;var angleB=b.segment.angle;var angleA=jMath.normalizeAngle(angleA+3*Math.PI/2);var angleB=jMath.normalizeAngle(angleB+3*Math.PI/2);return(angleA-angleB)*reverse;}}
PieSeries.prototype._addLabelLine=function(txtBlock,pieContext,len){var space=4;var padding=4;var isCircle=this.labelsAlign=='circle';var segment=txtBlock.segment;var points=[];var radius=pieContext.radius;if(this.isExploded(segment.index)){radius+=this.explodedRadius;}
var cx=pieContext.x;var cy=pieContext.y;points.push(segment.pt.x);points.push(segment.pt.y);var endX=txtBlock.x;var endY=txtBlock.y+txtBlock.height/2;var crossing,middleX,sr;var circle=new Circle(cx-radius,cy-radius,radius);if(segment.isLeft){endX+=txtBlock.width+padding;middleX=endX+space;crossing=jMath.intersection({x:cx,y:cy},segment.pt,{x:endX,y:endY},{x:middleX,y:endY});crossing=crossing||{x:middleX,y:endY};crossing.x=Math.max(crossing.x,middleX);if(circle.hitTest(crossing.x,crossing.y)||crossing.x>cx){sr=cx-radius-space;if(isCircle){if(sr>middleX){points.push(sr);points.push(segment.pt.y);}else{points.push(segment.pt.x-space*2);points.push(segment.pt.y);}}
else{points.push(sr);points.push(segment.pt.y);}
points.push(middleX);points.push(endY);}
else{crossing.y=endY;points.push(crossing.x);points.push(crossing.y);}}
else{endX-=padding;middleX=endX-space;crossing=jMath.intersection({x:pieContext.x,y:pieContext.y},segment.pt,{x:endX,y:endY},{x:middleX,y:endY});crossing=crossing||{x:middleX,y:endY};crossing.x=Math.min(crossing.x,middleX);if(circle.hitTest(crossing.x,crossing.y)||crossing.x<cx){sr=cx+radius+space;if(isCircle){if(sr<middleX){points.push(sr);points.push(segment.pt.y);}
else{points.push(segment.pt.x+space*2);points.push(segment.pt.y);}}
else{points.push(sr);points.push(segment.pt.y);}
points.push(middleX);points.push(endY);}
else{crossing.y=endY;points.push(crossing.x);points.push(crossing.y);}}
points.push(endX);points.push(endY);var polyline=new Polyline(points);this._addShapeAnimation(polyline,segment.animIndex,len);return polyline;}
PieSeries.prototype._renderSlices=function(seriesRenderContext,margins){var data=this.arrData;if(!data){return;}
var gArea=this.chart.gridArea;var w=gArea.width;var h=gArea.height;var values=this._getYValues();var len=values.length;var sum=this.getTotal();var radius=this._calcRadius(margins);if(radius<0){return;}
var innerRadius=radius*this.innerExtent;var outerRadius=radius*this.outerExtent;var x=gArea.x+w/2;var y=gArea.y+h/2;var unit=(Math.PI*2)/sum;var startAngle=jMath.radians(this.startAngle);var explodedRadius=this.explodedRadius;var hiddenSlices=this.hiddenSlices;var animLen=len-hiddenSlices.length;var skippedIndexes=0;var exploded;for(var i=0;i<len;i++){if(jFunc.inArray(i,hiddenSlices)!=-1){skippedIndexes++;continue;}
var vl=values[i];var percentage=100*vl/sum;var endAngle=startAngle+vl*unit;var cx=x;var cy=y;exploded=this.isExploded(i);if(exploded){var angle=(startAngle+endAngle)/2;cy=y+explodedRadius*Math.sin(angle);cx=x+explodedRadius*Math.cos(angle);}
var slice=new PieSlice(cx,cy,innerRadius,outerRadius,startAngle,endAngle);this.setItemClasses(slice,i);var context={chart:this.chart,series:this,dataItem:data[i],index:i,value:vl,percentage:percentage};slice.context=context;this._setShapeSettings(slice,i);seriesRenderContext.shapes.push(slice);this._addSliceAnimation(slice,i-skippedIndexes,animLen);startAngle=endAngle;}}
PieSeries.prototype._distancesBetweenLabels=function(labels){if(!labels||labels.length==0){return[];}
var distances=[];var label;var firstLabel=labels[0];var gArea=this.chart.gridArea;var h=gArea.height;var y=gArea.y;distances.push(firstLabel.y-y);for(var i=1;i<labels.length;i++){label=labels[i];distances.push(label.y-firstLabel.y-firstLabel.height);firstLabel=label;}
distances.push(y+h-firstLabel.y-firstLabel.height);return distances;}
PieSeries.prototype._distributeLabels=function(distances,labels){var count=distances.length,remaining,left,right,i;for(i=0;i<count;i++){left=right=i;remaining=-distances[i];while(remaining>0&&(left>=0||right<count)){remaining=this._takeDistance(distances,i,--left,remaining);remaining=this._takeDistance(distances,i,++right,remaining);}}
this._reflowLabels(distances,labels);}
PieSeries.prototype._hLabelAlign=function(txtBlock,maxLeftWidth,maxRightWidth,pieContext){var segment=txtBlock.segment;var isCircle=this.labelsAlign=='circle';if(isCircle){var x=pieContext.x;var y=pieContext.y;var currRadius=pieContext.radius+this.labelsExtend;if(this.isExploded(segment.index)){currRadius+=this.explodedRadius;}
var t=Math.min(Math.abs(y-txtBlock.y),Math.abs(y-txtBlock.y-txtBlock.height));if(t<currRadius){if(segment.isLeft){txtBlock.x=x-txtBlock.width-Math.sqrt((currRadius*currRadius)-(t*t));}
else{txtBlock.x=x+Math.sqrt((currRadius*currRadius)-(t*t));}}}
else{var gArea=this.chart.gridArea;if(segment.isLeft){txtBlock.x=gArea.x+maxLeftWidth-txtBlock.width;}
else{txtBlock.x=gArea.x+gArea.width-maxRightWidth;}}}
PieSeries.prototype._reflowLabels=function(distances,labels){var labelsCount=labels.length,label;var gArea=this.chart.gridArea;var h=gArea.height;var y=gArea.y;distances[0]+=2;for(var i=0;i<labelsCount;i++){label=labels[i];y+=distances[i];label.y=y;y+=label.height;}}
PieSeries.prototype._takeDistance=function(distances,anchor,position,amount){if(distances[position]>0){var available=Math.min(distances[position],amount);amount-=available;distances[position]-=available;distances[anchor]+=available;}
return amount;}
PieSeries.prototype._calculateLabelsMargin=function(txtBlocks,pieContext){if(this.labelsPosition!='outside'){return{h:0,v:0};}
var hMargin=pieContext.margin;var vMargin=this.margin;var labelsExtend=this.labelsExtend;for(var i=0;i<txtBlocks.length;i++){var txtBlock=txtBlocks[i];hMargin=Math.max(hMargin,txtBlock.width+2*labelsExtend);vMargin=Math.max(vMargin,txtBlock.height+labelsExtend);}
return{h:hMargin,v:vMargin};}
PieSeries.prototype._render=function(seriesRenderContext){if(!this.hasRealData||!this.isInScene()){return;}
var renderContext={shapes:[],txtBlocks:[]};var pieContext=this._createLabels();var result=this._arrangeLabels(pieContext);this._renderSlices(renderContext,result.margins);if(pieContext.labels){jFunc.merge(renderContext.txtBlocks,pieContext.labels);}
this._finalizeRendering(seriesRenderContext,renderContext);}
PieSeries.prototype._calcRadius=function(margins){var originalMargin=margins.v||this.margin;var gArea=this.chart.gridArea;var w=gArea.width-2*margins.h;var h=gArea.height-2*originalMargin;var radius;if(w<h){radius=w/2.0;}
else{radius=h/2.0;}
if(this.expIndexes&&this.expIndexes.length>0){radius-=this.explodedRadius;}
return radius;}
PieSeries.prototype.isExploded=function(index){var indexes=this.expIndexes;if(!indexes||!indexes.length){return false;}
return jFunc.inArray(index,indexes)!=-1;}
PieSeries.prototype.isOverlap=function(textBlock,tBlocks){for(var j=0;j<tBlocks.length;j++){var tBlock=tBlocks[j];if(tBlock.intersectWith(textBlock.x,textBlock.y,textBlock.width,textBlock.height)){return true;}}
return false;}
PieSeries.prototype._getSliceCenter=function(x,y,angle,radius){return{x:x+radius*Math.cos(angle),y:y+radius*Math.sin(angle)};}
PieSeries.prototype._getTooltip=function(context){var percentage=this.chart.stringFormat(context.percentage,'%.2f%%'),tooltip='<span class="dvx-chart-tooltip-series-value">'+context.value+' ('+percentage+')'+'</span>',title=context.dataItem[0];if(title){tooltip='<div class="dvx-chart-tooltip-series-title">'+jMath.replaceTextForTooltip(title)+'</div>'+tooltip;}
return tooltip;};PieSeries.prototype._addSliceAnimation=function(slice,i,len){var anOptions=this._getAnimation();if(!anOptions||anOptions.enabled===false){return;}
var animation=new Animation(anOptions,slice,"endAngle",slice.startAngle,slice.endAngle);var duration=animation.duration/len;var delayTime=animation.delayTime+i*duration;animation.delayTime=delayTime;animation.duration=duration;this.chart.storyboard.addAnimation(animation);}
PieSeries.prototype._handleEvent=function(name,shape){if(!this.allowExplodeSlices){return;}
var context=shape.context;var index=context.index;var series=this;var expIndexes=series.expIndexes;var chart=series.chart;switch(name){case "MouseDown":case "TouchEnd":var indexInArr=jFunc.inArray(index,expIndexes);if(indexInArr==-1){expIndexes.push(index);}
else{expIndexes.splice(indexInArr,1);}
var animation=chart.options.animation;chart.options.animation=null;chart.update();chart._processMouseEvents();chart.options.animation=animation;break;}}
PieSeries.prototype.setOptions=function(options){Series.prototype.setOptions.call(this,options);}
function DoughnutSeries(options){PieSeries.call(this,options);var defs=jFunc.extend(true,{},this.defaults,{innerExtent:0.5,outerExtent:1});this.defaults=defs;this.setOptions(options);}
DoughnutSeries.prototype=new PieSeries();DoughnutSeries.constructor=DoughnutSeries;function ScatterSeries(options){var defs=jFunc.extend(true,{},this.defaults,{markers:{type:'diamond'}});this.defaults=defs;Series.call(this,options);}
ScatterSeries.prototype=new LineSeries();ScatterSeries.constructor=ScatterSeries;ScatterSeries.prototype._createShape=function(pts,shapes){return null;}
function SplineSeries(options){LineSeries.call(this,options);}
SplineSeries.prototype=new LineSeries();SplineSeries.constructor=SplineSeries;SplineSeries.prototype._createShape=function(pts,renderContext){var polyline=new Curve(pts);this._setShapeSettings(polyline);renderContext.shapes.push(polyline);this._addLengthAnimation(polyline);return polyline;}
function StepLineSeries(options){var defs=jFunc.extend(true,{},this.defaults,{lineWidth:0,markers:null,stepDirection:'forward'});this.defaults=defs;LineSeries.call(this,options);}
StepLineSeries.prototype=new LineSeries();StepLineSeries.constructor=StepLineSeries;StepLineSeries.prototype._createShape=function(pts,renderContext){var x,y,x1,y1,i,j,k,newPts=[],len=pts.length,isForward=this.stepDirection==='forward',hasValidValue=false;for(i=0;i<len;i+=2){x=pts[i];y=pts[i+1];if(!x||!y){if(!hasValidValue){newPts.push(null);newPts.push(null);newPts.push(null);newPts.push(null);}
continue;}
hasValidValue=true;newPts.push(x);newPts.push(y);if(i>=len-2){break;}
x1=null;y1=null;for(j=i+2;j<len;j+=2){x1=pts[j];y1=pts[j+1];if(x1&&y1){break;}}
if(j!==i+2&&this.nullHandling==='break'){newPts.push(null);newPts.push(null);for(k=i+2;k<j;k+=2){newPts.push(null);newPts.push(null);newPts.push(null);newPts.push(null);}}
else if(x1&&y){if(isForward){newPts.push(x1);newPts.push(y);}
else{newPts.push(x);newPts.push(y1);}}
i=j-2;}
var polyline=new Polyline(newPts);polyline.isStepLine=true;this._setShapeSettings(polyline);renderContext.shapes.push(polyline);this._addLengthAnimation(polyline);return polyline;};function StepAreaSeries(options){var defs=jFunc.extend(true,{},this.defaults,{lineWidth:0,markers:null,stepDirection:'forward'});this.defaults=defs;Series.call(this,options);this.decorationType='fill';}
StepAreaSeries.prototype=new LineSeries();StepAreaSeries.constructor=StepAreaSeries;StepAreaSeries.prototype._createShape=function(pts,renderContext){var x,y,newPts=[],len=pts.length;for(var i=0;i<len;i+=2){x=pts[i];y=pts[i+1];newPts.push(x);newPts.push(y);if(i>=len-2){break;}
newPts.push(pts[i+2]);newPts.push(y);}
var linePts=[];jFunc.merge(linePts,newPts);var polyline=new Polyline(linePts);polyline.isStepLine=true;this._setShapeSettings(polyline);this.setAreaLineClasses(polyline);var gArea=this.chart.gridArea;var top=gArea.y;var bottom=gArea.y+gArea.height;var crossPos=this.realYAxis.getCrossingPosition();crossPos=jMath.fitInRange(crossPos,top,bottom);var polygon=new Area(newPts,crossPos);polygon.isStepLine=true;this._setShapeSettings(polygon);this.setAreaPolygonClasses(polygon);renderContext.shapes.push(polygon);renderContext.shapes.push(polyline);this._addLengthAnimation(polygon);this._addLengthAnimation(polyline);return polyline;}
function StackedLineSeries(options){var defs=jFunc.extend(true,{},this.defaults,{stackedGroupName:''});this.defaults=defs;LineSeries.call(this,options);this.hasErrorBars=false;}
StackedLineSeries.prototype=new LineSeries();StackedLineSeries.constructor=StackedLineSeries;StackedLineSeries.prototype._initData=function(){this._initStackedData(this.type);}
StackedLineSeries.prototype._initVisibleData=function(){this._initVisibleStackedData(this.type);}
StackedLineSeries.prototype._renderLinearData=function(renderContext){this._renderCatData(renderContext);}
StackedLineSeries.prototype._renderCatData=function(renderContext){if(!this.hasRealData||!this.isInScene()){return;}
var data=this.arrData;var clust=this.chart.series._findStackedClusters(this,this.type);var stackedSeries=this.chart.series._getStackedSeriesFromType(this.type,this.stackedGroupName);var len=data.length;var hasMarkers=this.markers!=null&&this.markers.isVisible();var pts=[];var cPoints=[];var lblOffset=this.getLabelsOffset();var axisType=this.xAxisType;var x,y,vl,vlX,vlY,contextX;for(var i=0;i<len;i++){vl=data[i];if(vl===null){continue;}
var xValue=this._getXValue(vl,i);vl=this.dataValues[xValue];if(vl===null||vl===undefined||vl.value===null||vl.value===undefined){continue;}
vlY=this._scaleValue(stackedSeries,vl.value,xValue);if(axisType=='CategoryAxis'){vlX=i+0.5;contextX=this.realXAxis._getValue(i);}
else{vlX=data[i][0];contextX=vlX;}
x=this.realXAxis.getPosition(vlX);y=this.realYAxis.getPosition(vlY);pts.push(x);pts.push(y);var dataValue=vl.actualValue;var total=this._getStackedTotal(stackedSeries,xValue);var sum=dataValue>0?total.positive:total.negative;var percentage=sum!=0?100*Math.abs(dataValue)/Math.abs(sum):0;var context={chart:this.chart,series:this,dataItem:vl,index:i,x:contextX,y:vlY,value:dataValue,percentage:percentage};if(!hasMarkers){cPoints.push({dataItem:vl,index:i,x:contextX,y:vlY,value:dataValue,percentage:percentage});}
if(this.realYAxis.isValueVisible(vlY)===false){continue;}
this._addMarkerAndLabel(renderContext,x,y,i,len,null,vlY,lblOffset,context);}
var polyline=this._createShape(pts,renderContext);if(!hasMarkers&&polyline){polyline.context={chart:this.chart,series:this,points:cPoints};}
else{}}
StackedLineSeries.prototype._getSeriesFromThisType=function(){return this.chart.series._getStackedSeriesFromType(this.type,this.stackedGroupName);}
StackedLineSeries.prototype._getTooltipValue=function(context){return '<span class="dvx-chart-tooltip-series-value">'+context.value+'</span>';}
StackedLineSeries.prototype._scaleValue=function(stackedSeries,value,xValue){return value;}
StackedLineSeries.prototype._createShape=function(pts,renderContext){var polyline=new Polyline(pts);this._setShapeSettings(polyline);renderContext.shapes.push(polyline);this._addLengthAnimation(polyline);return polyline;}
function StackedSplineSeries(options){StackedLineSeries.call(this,options);}
StackedSplineSeries.prototype=new StackedLineSeries();StackedSplineSeries.constructor=StackedSplineSeries;StackedSplineSeries.prototype._createShape=function(pts,renderContext){var polyline=new Curve(pts);this._setShapeSettings(polyline);renderContext.shapes.push(polyline);this._addLengthAnimation(polyline);return polyline;}
function Stacked100SplineSeries(options){StackedSplineSeries.call(this,options);}
Stacked100SplineSeries.prototype=new StackedSplineSeries();Stacked100SplineSeries.constructor=Stacked100SplineSeries;Stacked100SplineSeries.prototype._initVisibleData=function(){StackedSplineSeries.prototype._initVisibleData.call(this);this.min=0;this.max=100;}
Stacked100SplineSeries.prototype._scaleValue=function(stackedSeries,value,xValue){var total=this._getStackedTotal(stackedSeries,xValue).positive||1;return 100*value/total;}
Stacked100SplineSeries.prototype._getTooltipValue=function(context){var percentage=this.chart.stringFormat(context.percentage,'%.2f%%');var tooltip=context.value+' ('+percentage+')';return '<span class="dvx-chart-tooltip-series-value">'+tooltip+'</span>';}
function Stacked100LineSeries(options){StackedLineSeries.call(this,options);}
Stacked100LineSeries.prototype=new StackedLineSeries();Stacked100LineSeries.constructor=Stacked100LineSeries;Stacked100LineSeries.prototype._initVisibleData=function(){StackedLineSeries.prototype._initVisibleData.call(this);this.min=0;this.max=100;}
Stacked100LineSeries.prototype._scaleValue=function(stackedSeries,value,xValue){var total=this._getStackedTotal(stackedSeries,xValue).positive||1;return 100*value/total;}
Stacked100LineSeries.prototype._getTooltipValue=function(context){var percentage=this.chart.stringFormat(context.percentage,'%.2f%%');var tooltip=context.value+' ('+percentage+')';return '<span class="dvx-chart-tooltip-series-value">'+tooltip+'</span>';}
function StackedAreaSeries(options){var defs=jFunc.extend(true,{},this.defaults,{lineWidth:0,markers:null,stackedGroupName:''});this.defaults=defs;Series.call(this,options);this.decorationType='fill';}
StackedAreaSeries.prototype=new StackedLineSeries();StackedAreaSeries.constructor=StackedAreaSeries;StackedAreaSeries.prototype._renderCatData=function(renderContext){if(!this.hasRealData||!this.isInScene()){return;}
var data=this.arrData;var clust=this.chart.series._findStackedClusters(this,this.type);var stackedSeries=this.chart.series._getStackedSeriesFromType(this.type,this.stackedGroupName);var axisType=this.xAxisType;var len=data.length;var pts1=[];var pts2=[];var cPoints=[];var x,y1,y2,vl,vlX,vlY1,vlY2,contextX;for(var i=0;i<len;i++){vl=data[i];if(vl===null||vl===undefined){continue;}
var xValue=this._getXValue(vl,i);vl=this.dataValues[xValue];if(vl===null||vl===undefined||vl.value===null||vl.value===undefined){continue;}
if(axisType==='CategoryAxis'){vlX=i+0.5;contextX=this.realXAxis._getValue(i);}
else{vlX=data[i][0];contextX=vlX;}
vlY1=this._scaleValue(stackedSeries,vl.value,xValue);x=this.realXAxis.getPosition(vlX);y1=this.realYAxis.getPosition(vlY1);pts1.push(x);pts1.push(y1);if(clust.index!=0){y2=this._getPrevStackedPosition(stackedSeries,clust.index,xValue,0,this.realYAxis,vlY1>=0);pts2.push(x);pts2.push(y2);}
var dataValue=vl.actualValue;var total=this._getStackedTotal(stackedSeries,xValue);var sum=dataValue>0?total.positive:total.negative;var percentage=sum!=0?100*Math.abs(dataValue)/Math.abs(sum):0;cPoints.push({dataItem:vl,index:i,x:contextX,y:vlY1,value:dataValue,percentage:percentage});}
var polyline=this._createShape(pts1,pts2,renderContext);if(polyline){polyline.context={chart:this.chart,series:this,points:cPoints};}}
StackedAreaSeries.prototype._isAnchoredToOrigin=function(){return true;}
StackedAreaSeries.prototype._createShape=function(pts1,pts2,renderContext){if(!pts2.length){return AreaSeries.prototype._createShape.call(this,pts1,renderContext);}
var polygon=new RangeShape(pts1,pts2,false,true);this._setShapeSettings(polygon);renderContext.shapes.push(polygon);this._addLengthAnimation(polygon);return polygon;}
function StackedSplineAreaSeries(options){StackedAreaSeries.call(this,options);}
StackedSplineAreaSeries.prototype=new StackedAreaSeries();StackedSplineAreaSeries.constructor=StackedSplineAreaSeries;StackedSplineAreaSeries.prototype._createShape=function(pts1,pts2,renderContext){if(!pts2.length){return SplineAreaSeries.prototype._createShape.call(this,pts1,renderContext);}
var polygon=new RangeShape(pts1,pts2,true,true);this._setShapeSettings(polygon);renderContext.shapes.push(polygon);this._addLengthAnimation(polygon);return polygon;}
function Stacked100AreaSeries(options){StackedAreaSeries.call(this,options);}
Stacked100AreaSeries.prototype=new StackedAreaSeries();Stacked100AreaSeries.constructor=Stacked100AreaSeries;Stacked100AreaSeries.prototype._initVisibleData=function(){StackedLineSeries.prototype._initVisibleData.call(this);this.min=0;this.max=100;}
Stacked100AreaSeries.prototype._scaleValue=function(stackedSeries,value,xValue){var total=this._getStackedTotal(stackedSeries,xValue).positive||1;return 100*value/total;}
Stacked100AreaSeries.prototype._getTooltipValue=function(context){var percentage=this.chart.stringFormat(context.percentage,'%.2f%%');var tooltip=context.value+' ('+percentage+')';return '<span class="dvx-chart-tooltip-series-value">'+tooltip+'</span>';}
function Stacked100SplineAreaSeries(options){StackedSplineAreaSeries.call(this,options);}
Stacked100SplineAreaSeries.prototype=new StackedSplineAreaSeries();Stacked100SplineAreaSeries.constructor=Stacked100SplineAreaSeries;Stacked100SplineAreaSeries.prototype._initVisibleData=function(){StackedLineSeries.prototype._initVisibleData.call(this);this.min=0;this.max=100;}
Stacked100SplineAreaSeries.prototype._scaleValue=function(stackedSeries,value,xValue){var total=this._getStackedTotal(stackedSeries,xValue).positive||1;return 100*value/total;}
Stacked100SplineAreaSeries.prototype._getTooltipValue=function(context){var percentage=this.chart.stringFormat(context.percentage,'%.2f%%');var tooltip=context.value+' ('+percentage+')';return '<span class="dvx-chart-tooltip-series-value">'+tooltip+'</span>';}
function StackedColumnSeries(options){var defs=jFunc.extend(true,{},this.defaults,{stackedGroupName:''});this.defaults=defs;ColumnSeries.call(this,options);this.hasErrorBars=false;}
StackedColumnSeries.prototype=new ColumnSeries();StackedColumnSeries.constructor=StackedColumnSeries;StackedColumnSeries.prototype._initData=function(){this._initStackedData(this.type);}
StackedColumnSeries.prototype._initVisibleData=function(){this._initVisibleStackedData(this.type);}
StackedColumnSeries.prototype._renderCatData=function(renderContext){var data=this.arrData;if(!data){return;}
var gArea=this.chart.gridArea;var top=gArea.y;var bottom=gArea.y+gArea.height;var crossPos=this.realYAxis.getCrossingPosition();crossPos=jMath.fitInRange(crossPos,top,bottom);crossPos=Math.round(crossPos);var clust=this.chart.series._findStackedClusters(this,this.type);var len=data.length;var gAreaWidth=gArea.width/this.realXAxis.getZoom();var groupW=gAreaWidth/len;var columnW=groupW/clust.groupCount;var w=Math.round(this.pointWidth*columnW);var totalColumnWidth=clust.groupCount*w;var offset=(groupW-totalColumnWidth)/2;offset=Math.round(offset+clust.groupIndex*w);w=Math.max(w,this.minimumWidth);var stackedSeries=this.chart.series._getStackedSeriesFromType(this.type,this.stackedGroupName);var lblOffset=this.getLabelsOffset();var x,y,vl;for(var i=0;i<len;i++){vl=data[i];if(vl===null){continue;}
var xValue=this._getXValue(vl,i);vl=this.dataValues[xValue];if(vl===null||vl===undefined||vl.value===null||vl.value===undefined){continue;}
var vlY=this._scaleValue(stackedSeries,vl.value,xValue);x=i;x=Math.round(this.realXAxis.getCatPosition(x)+offset);y=Math.round(this.realYAxis.getPosition(vlY));var prevPos=this._getPrevStackedPosition(stackedSeries,clust.index,xValue,crossPos,this.realYAxis,vlY>=0);var mY=y;var height;if(y<=prevPos){height=prevPos-y;}
else{height=y-prevPos;y=prevPos;}
var dataValue=vl.actualValue;var total=this._getStackedTotal(stackedSeries,xValue);var sum=dataValue>0?total.positive:total.negative;var percentage=sum!=0?100*Math.abs(dataValue)/Math.abs(sum):0;var context={chart:this.chart,series:this,dataItem:data[i],index:i,value:dataValue,x:this.realXAxis._getValue(i),y:vlY,percentage:percentage};var rect=new Rectangle(x,y,w,height);rect.context=context;rect.center={x:Math.round(x+w/2),y:Math.round(mY)};this._setShapeSettings(rect,i);this.setItemClasses(rect,i);renderContext.shapes.push(rect);this._addAnimation(rect,clust.index,clust.count);x+=w/2;if(this.markers&&this.realYAxis.isValueVisible(vlY)){var marker=this._getMarker(x,mY,null,vlY,null,i,context);renderContext.markers.push(marker);this._addShapeAnimation(marker,clust.index,clust.count);}
if(this.labels&&this.labels.visible!==false&&vl.actualValue!=0&&this.realXAxis.isValueVisible(i+0.5)){var labelValue=dataValue;switch(this.labels.valueType){case 'percentage':labelValue=percentage;break;}
var isOutside=this.labels.position=='outside';var tbOffset=isOutside?lblOffset:-height/2;var tBlock=this._getDataPointLabel(vl.actualValue,x,mY,tbOffset,labelValue,i);if(!isOutside){tBlock.textBaseline='middle';}
tBlock.context=context;this.chart.triggerEvent('dataPointLabelCreating',tBlock);renderContext.txtBlocks.push(tBlock);this._addShapeAnimation(tBlock,clust.index,clust.count);}}}
StackedColumnSeries.prototype._renderLinearData=function(renderContext){var data=this.arrData;if(!data){return;}
var gArea=this.chart.gridArea;var top=gArea.y;var bottom=gArea.y+gArea.height;var crossPos=this.realYAxis.getCrossingPosition();crossPos=jMath.fitInRange(crossPos,top,bottom);crossPos=Math.round(crossPos);var clust=this.chart.series._findStackedClusters(this,this.type);var stackedSeries=this.chart.series._getStackedSeriesFromType(this.type,this.stackedGroupName);var len=data.length;var gAreaWidth=gArea.width/this.realXAxis.getZoom();var columnW=this._calcColumnScale(stackedSeries)*gAreaWidth;var w=this.pointWidth*columnW;w=Math.max(w,this.minimumWidth);var lblOffset=this.getLabelsOffset();var x,y,vl;for(var i=0;i<len;i++){vl=data[i];if(vl===null||vl===undefined){continue;}
var xValue=this._getXValue(vl,i);vl=this.dataValues[xValue];if(vl===null||vl===undefined||vl.value===null||vl.value===undefined){continue;}
var vlY=this._scaleValue(stackedSeries,vl.value,xValue);x=data[i][0];x=Math.round(this.realXAxis.getPosition(x));y=Math.round(this.realYAxis.getPosition(vlY));var prevPos=this._getPrevStackedPosition(stackedSeries,clust.index,xValue,crossPos,this.realYAxis,vlY>=0);var mY=y;var height;if(y<=prevPos){height=prevPos-y;}
else{height=y-prevPos;y=prevPos;}
var dataValue=vl.actualValue;var total=this._getStackedTotal(stackedSeries,xValue);var sum=dataValue>0?total.positive:total.negative;var percentage=sum!=0?100*Math.abs(dataValue)/Math.abs(sum):0;var context={chart:this.chart,series:this,dataItem:data[i],index:i,value:dataValue,x:data[i][0],y:vlY,percentage:percentage};var locX=x-w/2;var rect=new Rectangle(locX,y,w,height);rect.context=context;rect.center={x:Math.round(x),y:Math.round(mY)};this._setShapeSettings(rect,i);this.setItemClasses(rect,i);renderContext.shapes.push(rect);this._addAnimation(rect,clust.index,clust.count);if(this.markers&&this.realYAxis.isValueVisible(vlY)){var marker=this._getMarker(x,mY,null,vlY,null,i,context);renderContext.markers.push(marker);this._addShapeAnimation(marker,clust.index,clust.count);}
if(this.labels&&this.labels.visible!==false&&vl.actualValue!=0){var labelValue=dataValue;switch(this.labels.valueType){case 'percentage':labelValue=percentage;break;}
var isOutside=this.labels.position=='outside';var tbOffset=isOutside?lblOffset:-height/2;var tBlock=this._getDataPointLabel(vl.actualValue,x,mY,tbOffset,labelValue,i);if(!isOutside){tBlock.textBaseline='middle';}
tBlock.context=context;this.chart.triggerEvent('dataPointLabelCreating',tBlock);renderContext.txtBlocks.push(tBlock);this._addShapeAnimation(tBlock,clust.index,clust.count);}}}
StackedColumnSeries.prototype._getSeriesFromThisType=function(){return this.chart.series._getStackedSeriesFromType(this.type,this.stackedGroupName);}
StackedColumnSeries.prototype._getTooltipValue=function(context){return '<span class="dvx-chart-tooltip-series-value">'+context.value+'</span>';}
StackedColumnSeries.prototype._scaleValue=function(stackedSeries,value,xValue){return value;}
function StackedBarSeries(options){var defs=jFunc.extend(true,{},this.defaults,{stackedGroupName:''});this.defaults=defs;BarSeries.call(this,options);this.hasErrorBars=false;}
StackedBarSeries.prototype=new BarSeries();StackedBarSeries.constructor=StackedBarSeries;StackedBarSeries.prototype._initData=function(){this._initStackedData(this.type);}
StackedBarSeries.prototype._initVisibleData=function(){this._initVisibleStackedData(this.type);}
StackedBarSeries.prototype._renderCatData=function(renderContext){var data=this.arrData;if(!data){return;}
var gArea=this.chart.gridArea;var left=gArea.x;var right=left+gArea.width;var crossPos=this.realYAxis.getCrossingPosition();crossPos=jMath.fitInRange(crossPos,left,right);crossPos=Math.round(crossPos);var clust=this.chart.series._findStackedClusters(this,this.type);var len=data.length;var gAreaHeight=gArea.height/this.realXAxis.getZoom();var groupH=gAreaHeight/len;var barH=groupH/clust.groupCount;var h=Math.round(this.pointWidth*barH);var totalBarHeight=clust.groupCount*h;var offset=(groupH-totalBarHeight)/2;offset=Math.round(offset+clust.groupIndex*h);h=Math.max(h,this.minimumWidth);var stackedSeries=this.chart.series._getStackedSeriesFromType(this.type,this.stackedGroupName);var lblOffset=this.getLabelsOffset()+2;var x,y,vl;for(var i=0;i<len;i++){vl=data[i];if(vl===null||vl===undefined){continue;}
var xValue=this._getXValue(vl,i);vl=this.dataValues[xValue];if(vl===null||vl===undefined||vl.value===null||vl.value===undefined){continue;}
var vlY=this._scaleValue(stackedSeries,vl.value,xValue);x=i;y=Math.round(this.realXAxis.getCatPosition(x)-offset-h);x=Math.round(this.realYAxis.getPosition(vlY));var prevPos=this._getPrevStackedPosition(stackedSeries,clust.index,xValue,crossPos,this.realYAxis,vlY>=0);var mX=x;var width;if(x<=prevPos){width=prevPos-x;}
else{width=x-prevPos;x=prevPos;}
var dataValue=vl.actualValue;var total=this._getStackedTotal(stackedSeries,xValue);var sum=dataValue>0?total.positive:total.negative;var percentage=sum!=0?100*Math.abs(dataValue)/Math.abs(sum):0;var context={chart:this.chart,series:this,dataItem:data[i],index:i,value:dataValue,x:this.realXAxis._getValue(i),y:vlY,percentage:percentage};var rect=new Rectangle(x,y,width,h);rect.context=context;rect.center={x:Math.round(mX),y:Math.round(y+h/2)};this._setShapeSettings(rect,i);this.setItemClasses(rect,i);renderContext.shapes.push(rect);this._addAnimation(rect,clust.index,clust.count);y+=h/2;if(this.markers&&this.realYAxis.isValueVisible(vlY)){var marker=this._getMarker(mX,y,null,vlY,null,i,context);renderContext.markers.push(marker);this._addShapeAnimation(marker,clust.index,clust.count);}
if(this.labels&&this.labels.visible!==false&&vl.actualValue!=0&&this.realXAxis.isValueVisible(i+0.5)){var labelValue=dataValue;switch(this.labels.valueType){case 'percentage':labelValue=percentage;break;}
var isOutside=this.labels.position=='outside';var tbOffset=isOutside?lblOffset:-width/2;var tBlock=this._getDataPointLabel(vl.actualValue,mX,y,tbOffset,labelValue,i);if(!isOutside){tBlock.textBaseline='middle';tBlock.textAlign='center';}
tBlock.context=context;this.chart.triggerEvent('dataPointLabelCreating',tBlock);renderContext.txtBlocks.push(tBlock);this._addShapeAnimation(tBlock,clust.index,clust.count);}}}
StackedBarSeries.prototype._renderLinearData=function(renderContext){var data=this.arrData;if(!data){return;}
var gArea=this.chart.gridArea;var left=gArea.x;var right=left+gArea.width;var crossPos=this.realYAxis.getCrossingPosition();crossPos=jMath.fitInRange(crossPos,left,right);crossPos=Math.round(crossPos);var stackedSeries=this.chart.series._getStackedSeriesFromType(this.type,this.stackedGroupName);var clust=this.chart.series._findStackedClusters(this,this.type);var len=data.length;var gAreaHeight=gArea.height/this.realXAxis.getZoom();var series=this._getSeriesFromThisType();var groupH=this._calcColumnScale(series)*gAreaHeight;var h=this.pointWidth*groupH;h=Math.max(h,this.minimumWidth);var lblOffset=this.getLabelsOffset()+2;var x,y,vl;for(var i=0;i<len;i++){vl=data[i];if(vl===null||vl===undefined){continue;}
var xValue=this._getXValue(vl,i);vl=this.dataValues[xValue];if(vl===null||vl===undefined||vl.value===null||vl.value===undefined){continue;}
var vlY=this._scaleValue(stackedSeries,vl.value,xValue);x=data[i][0];y=Math.round(this.realXAxis.getCatPosition(x));x=Math.round(this.realYAxis.getPosition(vlY));var prevPos=this._getPrevStackedPosition(stackedSeries,clust.index,xValue,crossPos,this.realYAxis,vlY>=0);var mX=x;var width;if(x<=prevPos){width=prevPos-x;}
else{width=x-prevPos;x=prevPos;}
var dataValue=vl.actualValue;var total=this._getStackedTotal(stackedSeries,xValue);var sum=dataValue>0?total.positive:total.negative;var percentage=sum!=0?100*Math.abs(dataValue)/Math.abs(sum):0;var context={chart:this.chart,series:this,dataItem:data[i],index:i,value:dataValue,x:data[i][0],y:vlY,percentage:percentage};var locY=y-h/2;var rect=new Rectangle(x,locY,width,h);rect.context=context;rect.center={x:Math.round(mX),y:Math.round(y)};this._setShapeSettings(rect,i);this.setItemClasses(rect,i);renderContext.shapes.push(rect);this._addAnimation(rect,clust.index,clust.count);if(this.markers&&this.realYAxis.isValueVisible(vlY)){var marker=this._getMarker(mX,y,null,vlY,null,i,context);renderContext.markers.push(marker);this._addShapeAnimation(marker,clust.index,clust.count);}
if(this.labels&&this.labels.visible!==false&&vl.actualValue!=0){var labelValue=dataValue;switch(this.labels.valueType){case 'percentage':labelValue=percentage;break;}
var isOutside=this.labels.position=='outside';var tbOffset=isOutside?lblOffset:-width/2;var tBlock=this._getDataPointLabel(vl.actualValue,mX,y,tbOffset,labelValue,i);if(!isOutside){tBlock.textBaseline='middle';tBlock.textAlign='center';}
tBlock.context=context;this.chart.triggerEvent('dataPointLabelCreating',tBlock);renderContext.txtBlocks.push(tBlock);this._addShapeAnimation(tBlock,clust.index,clust.count);}}}
StackedBarSeries.prototype._getSeriesFromThisType=function(){return this.chart.series._getStackedSeriesFromType(this.type,this.stackedGroupName);}
StackedBarSeries.prototype._getTooltipValue=function(context){return '<span class="dvx-chart-tooltip-series-value">'+context.value+'</span>';}
StackedBarSeries.prototype._scaleValue=function(stackedSeries,value,xValue){return value;}
function Stacked100ColumnSeries(options){StackedColumnSeries.call(this,options);}
Stacked100ColumnSeries.prototype=new StackedColumnSeries();Stacked100ColumnSeries.constructor=Stacked100ColumnSeries;Stacked100ColumnSeries.prototype._initVisibleData=function(){StackedColumnSeries.prototype._initVisibleData.call(this);this.min=0;this.max=100;}
Stacked100ColumnSeries.prototype._getPixelMargins=function(axis){if(axis.isVertical()||!this.hasData()){return{left:0,right:0};}
var offset=4;var series=this._getSeriesFromThisType();var columnScale=this._calcColumnScale(series);var length=axis.length;var width=0.5*columnScale*length+offset;return{left:width,right:width};}
Stacked100ColumnSeries.prototype._scaleValue=function(stackedSeries,value,xValue){var total=this._getStackedTotal(stackedSeries,xValue).positive||1;return 100*value/total;}
Stacked100ColumnSeries.prototype._getTooltipValue=function(context){var percentage=this.chart.stringFormat(context.percentage,'%.2f%%');var tooltip=context.value+' ('+percentage+')';return '<span class="dvx-chart-tooltip-series-value">'+tooltip+'</span>';}
function Stacked100BarSeries(options){StackedBarSeries.call(this,options);}
Stacked100BarSeries.prototype=new StackedBarSeries();Stacked100BarSeries.constructor=StackedBarSeries;Stacked100BarSeries.prototype._initVisibleData=function(){StackedBarSeries.prototype._initVisibleData.call(this);this.min=0;this.max=100;}
Stacked100BarSeries.prototype._getPixelMargins=function(axis){if(axis.isVertical()==false||!this.hasData()){return{left:0,right:0};}
var offset=4;var series=this._getSeriesFromThisType();var columnScale=this._calcColumnScale(series);var length=axis.length;var width=0.5*columnScale*length+offset;return{left:width,right:width};}
Stacked100BarSeries.prototype._scaleValue=function(stackedSeries,value,xValue){var total=this._getStackedTotal(stackedSeries,xValue).positive||1;return 100*value/total;}
Stacked100BarSeries.prototype._getTooltipValue=function(context){var percentage=this.chart.stringFormat(context.percentage,'%.2f%%');var tooltip=context.value+' ('+percentage+')';return '<span class="dvx-chart-tooltip-series-value">'+tooltip+'</span>';}
function RangeColumnSeries(options){ColumnSeries.call(this,options);}
RangeColumnSeries.prototype=new ColumnSeries();RangeColumnSeries.constructor=RangeColumnSeries;RangeColumnSeries.prototype._initXYData=function(){this._initXYDataRange(1,3);}
RangeColumnSeries.prototype._initCatValueData=function(){this._initCatValueDataRange(1,3);}
RangeColumnSeries.prototype._initDateValueData=function(){this._initDateValueDataRange(1,3);}
RangeColumnSeries.prototype._initVisibleCatValueData=function(){this._initVisibleCatValueDataRange(1,3);}
RangeColumnSeries.prototype._initVisibleXYData=function(){this._initVisibleXYDataRange(1,3);}
RangeColumnSeries.prototype._processData=function(){this._processDataXYZ();}
RangeColumnSeries.prototype._renderCatData=function(renderContext){var data=this.arrData;var gArea=this.chart.gridArea;var cats=this.categories;var len=cats.length;var gAreaWidth=gArea.width/this.realXAxis.getZoom();var groupW=gAreaWidth/len;var w=Math.round(this.pointWidth*groupW);var offset=Math.round((groupW-w)/2);w=Math.max(w,this.minimumWidth);var x,y1,y2,vlX,vlY1,vlY2;for(var i=0;i<data.length;i++){var vl=data[i];if(vl===null||vl===undefined){continue;}
var catIndex=jFunc.inArray(vl[0],cats);if(catIndex>-1){vlX=catIndex;}
else{vlX=i;}
vlY1=vl[1];vlY2=vl[2];x=Math.round(this.realXAxis.getCatPosition(vlX)+offset);y1=Math.round(this.realYAxis.getPosition(vlY1));y2=Math.round(this.realYAxis.getPosition(vlY2));var context={chart:this.chart,series:this,dataItem:data[i],index:i,catIndex:vlX,x:this.realXAxis._getValue(vlX),from:vlY1,to:vlY2};var y=Math.min(y1,y2);var height=Math.abs(y1-y2);var rect=new Rectangle(x,y,w,height);rect.context=context;this._setShapeSettings(rect,i);this.setItemClasses(rect,i);renderContext.shapes.push(rect);this._addAnimation(rect,i,len);if(this.labels&&this.labels.visible!==false){var labelValue=vl[3];if(labelValue===undefined){continue;}
var tBlock=this._getDataPointLabel(undefined,x+w/2,y+height/2,0,labelValue,i);tBlock.textBaseline='middle';tBlock.textAlign='center';tBlock.context=context;this.triggerEvent('dataPointLabelCreating',tBlock);renderContext.txtBlocks.push(tBlock);this._addShapeAnimation(tBlock,i,len);}}}
RangeColumnSeries.prototype._renderLinearData=function(renderContext){var data=this.arrData;var gArea=this.chart.gridArea;var len=data.length;var gAreaWidth=gArea.width/this.realXAxis.getZoom();var series=this._getSeriesFromThisType();var columnW=this._calcColumnScale(series)*gAreaWidth;var w=this.pointWidth*columnW;w=Math.max(w,this.minimumWidth);var x,y1,y2,vlX,vlY1,vlY2;for(var i=0;i<len;i++){var vl=data[i];if(vl===null||vl===undefined||!jFunc.isArray(vl)){continue;}
vlX=vl[0];vlY1=vl[1];vlY2=vl[2];var context={chart:this.chart,series:this,dataItem:data[i],index:i,catIndex:i,x:vlX,from:vlY1,to:vlY2};x=this.realXAxis.getPosition(vlX);y1=Math.round(this.realYAxis.getPosition(vlY1));y2=Math.round(this.realYAxis.getPosition(vlY2));var locX=x-w/2;var y=Math.min(y1,y2);var height=Math.abs(y1-y2);var rect=new Rectangle(locX,y,w,height);rect.context=context;this._setShapeSettings(rect,i);this.setItemClasses(rect,i);renderContext.shapes.push(rect);this._addAnimation(rect,i,len);if(this.labels&&this.labels.visible!==false){var labelValue=vl[3];if(labelValue===undefined){continue;}
var tBlock=this._getDataPointLabel(undefined,x,y+height/2,0,labelValue,i);tBlock.textBaseline='middle';tBlock.textAlign='center';tBlock.context=context;this.chart.triggerEvent('dataPointLabelCreating',tBlock);renderContext.txtBlocks.push(tBlock);this._addShapeAnimation(tBlock,i,len);}}}
RangeColumnSeries.prototype._setIsAnimReversed=function(rect){var context=rect.context;var reversed=this.realYAxis.reversed;rect.isAnimReversed=(!reversed&&context.from<context.to)||(reversed&&context.from>context.to);}
RangeColumnSeries.prototype._setShapeSettings=function(shape){Series.prototype._setShapeSettings.call(this,shape,shape.context.catIndex);if(shape.context.from<=shape.context.to){shape.addClass('dvx-chart-series-item-range-up');}
else{shape.addClass('dvx-chart-series-item-range-down');}}
RangeColumnSeries.prototype._getTooltipTitleColon=function(){return '';};RangeColumnSeries.prototype._getTooltipValue=function(context){var tooltipValue='<div>From: '+context.from+'</div>'+
'<div>To: '+context.to+'</div>';return '<div class="dvx-chart-tooltip-series-value">'+tooltipValue+'</div>';};function RangeBarSeries(options){BarSeries.call(this,options);}
RangeBarSeries.prototype=new BarSeries();RangeBarSeries.constructor=RangeBarSeries;RangeBarSeries.prototype._initXYData=function(){this._initXYDataRange(1,3);}
RangeBarSeries.prototype._initCatValueData=function(){this._initCatValueDataRange(1,3);}
RangeBarSeries.prototype._initDateValueData=function(){this._initDateValueDataRange(1,3);}
RangeBarSeries.prototype._initVisibleCatValueData=function(){this._initVisibleCatValueDataRange(1,3);}
RangeBarSeries.prototype._initVisibleXYData=function(){this._initVisibleXYDataRange(1,3);}
RangeBarSeries.prototype._processData=function(){this._processDataXYZ();}
RangeBarSeries.prototype._renderCatData=function(renderContext){var data=this.arrData;var gArea=this.chart.gridArea;var cats=this.categories;var len=cats.length;var gAreaHeight=gArea.height/this.realXAxis.getZoom();var groupH=gAreaHeight/len;var h=this.pointWidth*groupH;var offset=Math.round((groupH-h)/2);h=Math.max(h,this.minimumWidth);var x1,x2,y,vlX,vlY1,vlY2;for(var i=0;i<data.length;i++){var vl=data[i];if(vl===null||vl===undefined){continue;}
var catIndex=jFunc.inArray(vl[0],cats);if(catIndex>-1){vlX=catIndex;}
else{vlX=i;}
vlY1=vl[1];vlY2=vl[2];y=Math.round(this.realXAxis.getCatPosition(vlX)-offset-h);x1=Math.round(this.realYAxis.getPosition(vlY1));x2=Math.round(this.realYAxis.getPosition(vlY2));if(x2<gArea.x||x1>gArea.x+gArea.width){continue;}
var context={chart:this.chart,series:this,dataItem:data[i],index:i,catIndex:vlX,x:this.realXAxis._getValue(vlX),from:vlY1,to:vlY2};var x=Math.min(x1,x2);var width=Math.abs(x1-x2);var rect=new Rectangle(x,y,width,h);rect.context=context;this._setShapeSettings(rect,i);this.setItemClasses(rect,i);renderContext.shapes.push(rect);this._addAnimation(rect,i,len);if(this.labels&&this.labels.visible!==false){var labelValue=vl[3];if(labelValue===undefined){continue;}
var tBlock=this._getDataPointLabel(undefined,x+width/2,y+h/2,0,labelValue,i);tBlock.textBaseline='middle';tBlock.textAlign='center';tBlock.context=context;this.chart.triggerEvent('dataPointLabelCreating',tBlock);renderContext.txtBlocks.push(tBlock);this._addShapeAnimation(tBlock,i,len);}}}
RangeBarSeries.prototype._renderLinearData=function(renderContext){var data=this.arrData;var gArea=this.chart.gridArea;var len=data.length;var gAreaHeight=gArea.height/this.realXAxis.getZoom();var series=this._getSeriesFromThisType();var groupH=this._calcColumnScale(series)*gAreaHeight;var h=this.pointWidth*groupH;h=Math.max(h,this.minimumWidth);var x1,x2,y,vlX,vlY1,vlY2;for(var i=0;i<len;i++){var vl=data[i];if(vl===null||vl===undefined||!jFunc.isArray(vl)){continue;}
vlX=vl[0];vlY1=vl[1];vlY2=vl[2];var context={chart:this.chart,series:this,dataItem:data[i],index:i,catIndex:i,x:vlX,from:vlY1,to:vlY2};y=this.realXAxis.getPosition(vlX);x1=Math.round(this.realYAxis.getPosition(vlY1));x2=Math.round(this.realYAxis.getPosition(vlY2));if(x2<gArea.x||x1>gArea.x+gArea.width){continue;}
var locY=y-h/2;var x=Math.min(x1,x2);var width=Math.abs(x1-x2);var rect=new Rectangle(x,locY,width,h);rect.context=context;this._setShapeSettings(rect,i);this.setItemClasses(rect,i);renderContext.shapes.push(rect);this._addAnimation(rect,i,len);if(this.labels&&this.labels.visible!==false){var labelValue=vl[3];if(labelValue===undefined){continue;}
var tBlock=this._getDataPointLabel(undefined,x+width/2,y,0,labelValue,i);tBlock.textBaseline='middle';tBlock.textAlign='center';tBlock.context=context;this.chart.triggerEvent('dataPointLabelCreating',tBlock);renderContext.txtBlocks.push(tBlock);this._addShapeAnimation(tBlock,i,len);}}}
RangeBarSeries.prototype._setIsAnimReversed=function(rect){var context=rect.context;var reversed=this.realYAxis.reversed;rect.isAnimReversed=(!reversed&&context.from>context.to)||(reversed&&context.from<context.to);}
RangeBarSeries.prototype._setShapeSettings=function(shape,i){Series.prototype._setShapeSettings.call(this,shape,shape.context.catIndex);if(shape.context.from<=shape.context.to){shape.addClass('dvx-chart-series-item-range-up');}
else{shape.addClass('dvx-chart-series-item-range-down');}}
RangeBarSeries.prototype._getTooltipTitleColon=function(){return '';};RangeBarSeries.prototype._getTooltipValue=function(context){var tooltipValue='<div>From: '+context.from+'</div>'+
'<div>To: '+context.to+'</div>';return '<div class="dvx-chart-tooltip-series-value">'+tooltipValue+'</div>';};function GanttSeries(options){RangeBarSeries.call(this,options);}
GanttSeries.prototype=new RangeBarSeries();GanttSeries.constructor=GanttSeries;GanttSeries.prototype._createYAxis=function(){var axis=new DateTimeAxis({location:'bottom',orientation:'y'});axis.chart=this.chart;return axis;}
GanttSeries.prototype._initData=function(){RangeBarSeries.prototype._initData.call(this);var min=this.min;var max=this.max;if(jFunc.type(min)=='date'){min=min.getTime();}
if(jFunc.type(max)=='date'){max=max.getTime();}
this.min=min;this.max=max;}
GanttSeries.prototype._initVisibleData=function(){RangeBarSeries.prototype._initVisibleData.call(this);var min=this.min;var max=this.max;if(jFunc.type(min)=='date'){min=min.getTime();}
if(jFunc.type(max)=='date'){max=max.getTime();}
this.min=min;this.max=max;}
GanttSeries.prototype._findYAxis=function(axes){var axis=this._findAxis(axes,this.axisY);if(axis!=null){return axis;}
for(var i=0;i<axes.length;i++){axis=axes[i];if(axis.getOrientation(this)!='y'||axis.isVertical()){continue;}
if(axis instanceof DateTimeAxis){return axis;}}
return null;}
GanttSeries.prototype._resolveAxisType=function(axisOp){var loc=axisOp.location;if(!loc){return;}
if(loc=='bottom'||loc=='top'){axisOp.type='dateTime';return;}
RangeBarSeries.prototype._resolveAxisType.call(this,axisOp);}
GanttSeries.prototype._getTooltipTitleColon=function(){return ': ';}
GanttSeries.prototype._getTooltip=function(context){var yAxis=this.realYAxis,tooltip='<span class="dvx-chart-tooltip-series-value">'+
yAxis._getTooltip(context.from).replace('<div class="dvx-chart-tooltip-title">','').replace('</div>','')+
" - "+
yAxis._getTooltip(context.to).replace('<div class="dvx-chart-tooltip-title">','').replace('</div>','')+
'</span>',seriesColor='',shapeColor;if(this.title){if(context.shape){shapeColor=context.shape.getTooltipColor();if(shapeColor){seriesColor='style="color:'+shapeColor+'"';}}
tooltip='<span class="dvx-chart-tooltip-series-title" '+seriesColor+'>'+this._getTooltipTitle()+this._getTooltipTitleColon()+'</span>'+tooltip;}
return '<div class="dvx-chart-tooltip-series">'+tooltip+'</div>';}
function StockSeries(options){var defs=jFunc.extend(true,{},this.defaults,{});this.defaults=defs;Series.call(this,options);}
StockSeries.prototype=new Series();StockSeries.constructor=StockSeries;StockSeries.prototype._initXYData=function(){this._initXYDataRange(1,5);}
StockSeries.prototype._initCatValueData=function(){this._initCatValueDataRange(1,5,true);}
StockSeries.prototype._initDateValueData=function(){this._initDateValueDataRange(1,5);}
StockSeries.prototype._initVisibleCatValueData=function(){this._initVisibleCatValueDataRange(1,5);}
StockSeries.prototype._initVisibleXYData=function(){this._initVisibleXYDataRange(1,5);}
StockSeries.prototype._processData=function(){this.arrData=null;if(this.data){if(!this.xValuesType&&!this.highValuesType&&!this.lowValuesType&&!this.openValuesType&&!this.closeValuesType){this.arrData=jMath.cloneArray(this.data);}
else{this.arrData=[];for(var i=0;i<this.data.length;i++){var dItem=this.data[i].slice(0);dItem[0]=jMath.processDataValue(dItem[0],this.xValuesType);dItem[1]=jMath.processDataValue(dItem[1],this.openValuesType);dItem[2]=jMath.processDataValue(dItem[2],this.highValuesType);dItem[3]=jMath.processDataValue(dItem[3],this.lowValuesType);dItem[4]=jMath.processDataValue(dItem[4],this.closeValuesType);this.arrData.push(dItem);}}}
else{var arrDataSource=this.chart.arrDataSource;if(arrDataSource){var xValuesField=this.xValuesField;var highValuesField=this.highValuesField;var lowValuesField=this.lowValuesField;var openValuesField=this.openValuesField;var closeValuesField=this.closeValuesField;var xValues=jMath.processDataField(arrDataSource,xValuesField);var highValues=jMath.processDataField(arrDataSource,highValuesField);var lowValues=jMath.processDataField(arrDataSource,lowValuesField);var openValues=jMath.processDataField(arrDataSource,openValuesField);var closeValues=jMath.processDataField(arrDataSource,closeValuesField);if(xValues&&highValues&&lowValues&&openValues&&closeValues){this.arrData=jMath.mergeArrays([xValues,openValues,highValues,lowValues,closeValues]);}}}
this._processXAxisType();this.hasRealData=this.hasData();}
StockSeries.prototype._renderLinearData=function(renderContext){this._renderCatData(renderContext);}
StockSeries.prototype._renderCatData=function(renderContext){if(!this.hasRealData||!this.isInScene()){return;}
var data=this.arrData;var gArea=this.chart.gridArea;var len=data.length;var x,high,low,open,close;var gAreaWidth=gArea.width/this.realXAxis.getZoom();var width;if(this.xAxisType==='CategoryAxis'){width=this.pointWidth*gAreaWidth/len;}
else{var columnW=this._calcColumnScale([this])*gAreaWidth;width=this.pointWidth*columnW;}
width=Math.max(width,this.minimumWidth);for(var i=0;i<len;i++){var vl=data[i];if(vl===null||vl===undefined||!jFunc.isArray(vl)){continue;}
var dataX=i;switch(this.xAxisType){case 'LinearAxis':case 'DateTimeAxis':x=vl[0];dataX=x;break;case 'CategoryAxis':x=i+0.5;break;}
open=vl[1];high=vl[2];low=vl[3];close=vl[4];var context={chart:this.chart,series:this,dataItem:vl,index:i,x:this.realXAxis._getValue(dataX),high:high,low:low,open:open,close:close};x=this.realXAxis.getPosition(x);open=this.realYAxis.getPosition(open);high=this.realYAxis.getPosition(high);low=this.realYAxis.getPosition(low);close=this.realYAxis.getPosition(close);var sh=this._createShape(x,high,low,open,close,width);sh.context=context;this._addShapeAnimation(sh,i,len);renderContext.shapes.push(sh);}}
StockSeries.prototype._setShapeSettings=function(shape,isUp){Series.prototype._setShapeSettings.call(this,shape);if(isUp){shape.addClass('dvx-chart-series-item-price-up');}
else{shape.addClass('dvx-chart-series-item-price-down');}}
StockSeries.prototype._createShape=function(x,high,low,open,close,width){var sh=new StockShape(x,high,low,open,close,width);this._setShapeSettings(sh,close>=open);return sh;}
StockSeries.prototype._getPixelMargins=function(axis){if(axis.isVertical()){return Series.prototype._getPixelMargins.call(this,axis);}
if(!this.hasData()){return{left:0,right:0};}
var offset=4;var columnScale=this._calcColumnScale([this]);var length=axis.length;var width=0.5*columnScale*length+offset;return{left:width,right:width};}
StockSeries.prototype._getTooltipTitleColon=function(){return '';};StockSeries.prototype._getTooltipValue=function(context){var tooltipValue='<div>Open: '+context.open+'</div>'+
'<div>High: '+context.high+'</div>'+
'<div>Low: '+context.low+'</div>'+
'<div>Close: '+context.close+'</div>';return '<div class="dvx-chart-tooltip-series-value">'+tooltipValue+'</div>';};function CandlestickSeries(options){var defs=jFunc.extend(true,{},this.defaults,{});this.defaults=defs;Series.call(this,options);this.decorationType='combinded';}
CandlestickSeries.prototype=new StockSeries();CandlestickSeries.constructor=CandlestickSeries;CandlestickSeries.prototype._createShape=function(x,high,low,open,close,width){var sh=new CandlestickShape(x,high,low,open,close,width);this._setShapeSettings(sh,close>=open);return sh;}
function RadarLineSeries(options){var defs=jFunc.extend(true,{},this.defaults,{lineWidth:2,markers:{}});this.defaults=defs;Series.call(this,options);this.notInGridArea=true;}
RadarLineSeries.prototype=new Series();RadarLineSeries.constructor=RadarLineSeries;RadarLineSeries.prototype._resolveAxisType=function(){}
RadarLineSeries.prototype._createXAxis=function(){var axis=new CategoryAngleAxis();axis.chart=this.chart;return axis;}
RadarLineSeries.prototype._createYAxis=function(){var axis=new LinearRadiusAxis();axis.chart=this.chart;return axis;}
RadarLineSeries.prototype._findXAxis=function(axes){var axis=this._findAxis(axes,this.axisX);if(axis!=null){return axis;}
for(var i=0;i<axes.length;i++){axis=axes[i];if(axis instanceof CategoryAngleAxis){return axis;}}
return null;}
RadarLineSeries.prototype._findYAxis=function(axes){var axis=this._findAxis(axes,this.axisY);if(axis!=null){return axis;}
for(var i=0;i<axes.length;i++){axis=axes[i];if(axis instanceof LinearRadiusAxis){return axis;}}
return null;}
RadarLineSeries.prototype._renderLinearData=function(renderContext){this._renderCatData(renderContext);}
RadarLineSeries.prototype._renderCatData=function(renderContext){if(!this.hasRealData||!this.isInScene()){return;}
var data=this.arrData;var len=data.length;var hasMarkers=this.markers!=null&&this.markers.isVisible();var hasLabels=this.labels!=null&&this.labels.visible!==false;var pts=[];var cPoints=[];var lblOffset=this.getLabelsOffset();var x,y,vlY;var cx=this.realYAxis.cx;var cy=this.realYAxis.cy;for(var i=0;i<len;i++){var vl=data[i];if(vl===null||vl===undefined){pts.push(null);pts.push(null);if(!hasMarkers){cPoints.push(null);}
continue;}
if(jFunc.isArray(vl)==false){vlY=vl;}
else{vlY=vl[1];if(vlY===null||vl===undefined){pts.push(null);pts.push(null);if(!hasMarkers){cPoints.push(null);}
continue;}}
var angle=this.realXAxis._getAngle(i);x=this.realYAxis.getPosition(vlY);y=cy;var pt=jMath.rotatePointAt(x,y,angle,cx,cy);x=pt.x;y=pt.y;pts.push(x);pts.push(y);if(!hasMarkers){cPoints.push({dataItem:vl,index:i,x:this.realXAxis._getValue(i),y:vlY});}
this._addMarkerAndLabel(renderContext,x,y,i,len,null,vlY,lblOffset);}
var polygon=this._createShape(pts);if(polygon){renderContext.shapes.push(polygon);if(!hasMarkers){polygon.context={chart:this.chart,series:this,points:cPoints};}}}
RadarLineSeries.prototype._createShape=function(pts){var polyline=new Polyline(pts,false,true);this._setShapeSettings(polyline);this._addLengthAnimation(polyline);return polyline;}
RadarLineSeries.prototype._getPixelMargins=function(axis){return{left:0,right:0};}
function RadarAreaSeries(options){var defs=jFunc.extend(true,{},this.defaults,{lineWidth:0,markers:null});this.defaults=defs;Series.call(this,options);this.decorationType='fill';}
RadarAreaSeries.prototype=new RadarLineSeries();RadarAreaSeries.constructor=RadarAreaSeries;RadarAreaSeries.prototype._createShape=function(pts){var polygon=new Polygon(pts);this._setShapeSettings(polygon);return polygon;}
function RadarSplineAreaSeries(options){var defs=jFunc.extend(true,{},this.defaults,{lineWidth:0,markers:null});this.defaults=defs;Series.call(this,options);this.decorationType='fill';}
RadarSplineAreaSeries.prototype=new RadarLineSeries();RadarSplineAreaSeries.constructor=RadarSplineAreaSeries;RadarSplineAreaSeries.prototype._createShape=function(pts){var shape=new Curve(pts,true);this._setShapeSettings(shape);return shape;}
function RadarSplineSeries(options){Series.call(this,options);}
RadarSplineSeries.prototype=new RadarLineSeries();RadarSplineSeries.constructor=RadarSplineSeries;RadarSplineSeries.prototype._createShape=function(pts){var shape=new Curve(pts,true);this._setShapeSettings(shape);return shape;}
function PolarLineSeries(options){var defs=jFunc.extend(true,{},this.defaults,{lineWidth:2,markers:{}});this.defaults=defs;Series.call(this,options);this.notInGridArea=true;}
PolarLineSeries.prototype=new Series();PolarLineSeries.constructor=PolarLineSeries;PolarLineSeries.prototype._resolveAxisType=function(){}
PolarLineSeries.prototype._createXAxis=function(){var axis=new LinearAngleAxis();axis.chart=this.chart;return axis;}
PolarLineSeries.prototype._createYAxis=function(){var axis=new LinearRadiusAxis();axis.chart=this.chart;return axis;}
PolarLineSeries.prototype._findXAxis=function(axes){var axis=this._findAxis(axes,this.axisX);if(axis!=null){return axis;}
for(var i=0;i<axes.length;i++){axis=axes[i];if(axis instanceof LinearAngleAxis){return axis;}}
return null;}
PolarLineSeries.prototype._findYAxis=function(axes){var axis=this._findAxis(axes,this.axisY);if(axis!=null){return axis;}
for(var i=0;i<axes.length;i++){axis=axes[i];if(axis instanceof LinearRadiusAxis){return axis;}}
return null;}
PolarLineSeries.prototype._renderLinearData=function(renderContext){this._renderCatData(renderContext);}
PolarLineSeries.prototype._renderCatData=function(renderContext){if(!this.hasRealData||!this.isInScene()){return;}
var data=this.arrData;var len=data.length;var hasMarkers=this.markers!=null&&this.markers.isVisible();var hasLabels=this.labels!=null&&this.labels.visible!==false;var pts=[];var cPoints=[];var lblOffset=this.getLabelsOffset();var x,y,vlX,vlY;var cx=this.realYAxis.cx;var cy=this.realYAxis.cy;for(var i=0;i<len;i++){var vl=data[i];if(vl===null||vl===undefined){pts.push(null);pts.push(null);if(!hasMarkers){cPoints.push(null);}
continue;}
vlX=vl[0];vlY=vl[1];if(vlX===null||vlX===undefined||vlY===null||vlY===undefined){pts.push(null);pts.push(null);if(!hasMarkers){cPoints.push(null);}
continue;}
var angle=this.realXAxis._getAngle(vlX);x=this.realYAxis.getPosition(vlY);y=cy;var pt=jMath.rotatePointAt(x,y,angle,cx,cy);x=pt.x;y=pt.y;pts.push(x);pts.push(y);var context={chart:this.chart,series:this,dataItem:data[i],index:i,x:vlX,y:vlY};if(!hasMarkers){cPoints.push({dataItem:vl,index:i,x:vlX,y:vlY});}
this._addMarkerAndLabel(renderContext,x,y,i,len,vlX,vlY,lblOffset);}
var polygon=this._createShape(pts);if(polygon){renderContext.shapes.push(polygon);if(!hasMarkers){polygon.context={chart:this.chart,series:this,points:cPoints};}}}
PolarLineSeries.prototype._createShape=function(pts){var polyline=new Polyline(pts);this._setShapeSettings(polyline);this._addLengthAnimation(polyline);return polyline;}
PolarLineSeries.prototype._getPixelMargins=function(axis){return{left:0,right:0};}
function PolarAreaSeries(options){var defs=jFunc.extend(true,{},this.defaults,{lineWidth:0,markers:null});this.defaults=defs;Series.call(this,options);this.decorationType='fill';}
PolarAreaSeries.prototype=new PolarLineSeries();PolarAreaSeries.constructor=PolarAreaSeries;PolarAreaSeries.prototype._createShape=function(pts){var polygon=new Polygon(pts);this._setShapeSettings(polygon);return polygon;}
function PolarSplineSeries(options){Series.call(this,options);}
PolarSplineSeries.prototype=new PolarLineSeries();PolarSplineSeries.constructor=PolarSplineSeries;PolarSplineSeries.prototype._createShape=function(pts){var shape=new Curve(pts,false);this._setShapeSettings(shape);this._addLengthAnimation(shape);return shape;}
function PolarSplineAreaSeries(options){var defs=jFunc.extend(true,{},this.defaults,{lineWidth:0,markers:null});this.defaults=defs;Series.call(this,options);this.decorationType='fill';}
PolarSplineAreaSeries.prototype=new PolarLineSeries();PolarSplineAreaSeries.constructor=PolarSplineAreaSeries;PolarSplineAreaSeries.prototype._createShape=function(pts){var shape=new Curve(pts,true);this._setShapeSettings(shape);return shape;}
function PolarScatterSeries(options){var defs=jFunc.extend(true,{},this.defaults,{lineWidth:0,markers:{type:'diamond'}});this.defaults=defs;Series.call(this,options);}
PolarScatterSeries.prototype=new PolarLineSeries();PolarScatterSeries.constructor=PolarScatterSeries;PolarScatterSeries.prototype._createShape=function(pts){return null;}
function TrendlineSeries(options){var defs=jFunc.extend(true,{},this.defaults,{lineWidth:2,trendlineType:'linear',markers:{}});this.defaults=defs;Series.call(this,options);}
TrendlineSeries.prototype=new Series();TrendlineSeries.constructor=TrendlineSeries;TrendlineSeries.prototype._initData=function(){var data=this.tData=this._getTrendlineResult();var min=maxVl;var max=minVl;var minX=maxVl;var maxX=minVl;var len=data.length;for(var i=0;i<len;i++){var vl=data[i];if(vl===null||vl===undefined){continue;}
var vlX=vl[0];if(minX>vlX){minX=vlX;}
if(maxX<vlX){maxX=vlX;}
var vlY=vl[1];if(min>vlY){min=vlY;}
if(max<vlY){max=vlY;}}
this.min=min;this.max=max;this.minX=minX;this.maxX=maxX;}
TrendlineSeries.prototype._getTrendlineResult=function(){var data=this.arrData;var len=data.length;var ret;var res;var ypred=[];var x=[];var y=[];for(var i=0;i<len;i++){var vl=data[i];if(vl===null||vl===undefined){continue;}
if(!jFunc.isArray(vl)){x.push(i+0.5);y.push(vl);}
else{var vlX=vl[0];switch(this.xAxisType){case 'CategoryAxis':vlX=i+0.5;break;case 'DateTimeAxis':vlX=vlX.getTime();break;}
x.push(vlX);y.push(vl[1]);}}
switch(this.trendlineType){case 'exp':case 'exponential':ret=this._getExpRegression(x,y);for(var i=0;i<x.length;i++){res=ret[1]*Math.pow(ret[0],x[i]);ypred.push([x[i],res]);}
break;case 'linear':default:ret=this._getLinearRegression(x,y);for(var i=0;i<x.length;i++){res=ret[0]*x[i]+ret[1];ypred.push([x[i],res]);}
break;}
return ypred;}
TrendlineSeries.prototype._getRegression=function(x,y){var type=this.trendlineType;var len=this.arrData.length;var SX=0;var SY=0;var SXX=0;var SXY=0;var SYY=0;var Y=[];var X=[];if(type=='linear'){X=x;Y=y;}
else if(type=='exp'||type=='exponential'){for(var i=0;i<y.length;i++){if(y[i]<=0){len--;}
else{X.push(x[i]);Y.push(Math.log(y[i]));}}}
for(var i=0;i<len;i++){SX=SX+X[i];SY=SY+Y[i];SXY=SXY+X[i]*Y[i];SXX=SXX+X[i]*X[i];SYY=SYY+Y[i]*Y[i];}
var slope=(len*SXY-SX*SY)/(len*SXX-SX*SX);var intercept=(SY-slope*SX)/len;return[slope,intercept];}
TrendlineSeries.prototype._getLinearRegression=function(x,y){return this._getRegression(x,y);}
TrendlineSeries.prototype._getExpRegression=function(x,y){var ret=this._getRegression(x,y);var base=Math.exp(ret[0]);var coeff=Math.exp(ret[1]);return[base,coeff];}
TrendlineSeries.prototype._renderLinearData=function(renderContext){this._renderCatData(renderContext);}
TrendlineSeries.prototype._renderCatData=function(renderContext){if(!this.hasRealData||!this.isInScene()){return;}
var data=this.arrData;var ypred=this.tData;var pts=[];var di=1;if(this.trendlineType=='linear'){di=ypred.length-1;}
var x,y,vlX,vlY;for(var i=0;i<ypred.length;i+=di){var vl=ypred[i];vlX=vl[0];vlY=vl[1];x=this.realXAxis.getPosition(vlX);y=this.realYAxis.getPosition(vlY);pts.push(x);pts.push(y);}
var shape;switch(this.trendlineType){case 'exp':case 'exponential':shape=new Curve(pts);break;case 'linear':default:shape=new Polyline(pts);break;}
this._setShapeSettings(shape);renderContext.shapes.push(shape);this._addLengthAnimation(shape);}
function VertLineSeries(options){var defs=jFunc.extend(true,{},this.defaults,{lineWidth:2,markers:{}});this.defaults=defs;Series.call(this,options);}
VertLineSeries.prototype=new BarSeries();VertLineSeries.constructor=VertLineSeries;VertLineSeries.prototype._renderCatData=function(renderContext){var data=this.arrData;var len=data.length;var hasMarkers=this.markers!=null&&this.markers.isVisible();var pts=[];var cPoints=[];var lblOffset=this.getLabelsOffset();var x,y,vlX,vlY;for(var i=0;i<len;i++){var vl=data[i];if(vl===null||vl===undefined){pts.push(null);pts.push(null);if(!hasMarkers){cPoints.push(null);}
continue;}
vlX=x=i+0.5;if(jFunc.isArray(vl)==false){vlY=vl;}
else{vlY=vl[1];if(jMath.isNull(vlY)){pts.push(null);pts.push(null);if(!hasMarkers){cPoints.push(null);}
continue;}}
y=this.realXAxis.getPosition(x);x=this.realYAxis.getPosition(vlY);pts.push(x);pts.push(y);if(!hasMarkers){cPoints.push({dataItem:vl,index:i,x:vlX,y:vlY});}
if(this.realYAxis.isValueVisible(vlY)===false){continue;}
this._addMarkerAndLabel(renderContext,x,y,i,len,null,vlY,lblOffset);}
var polyline=this._createShape(pts,renderContext);if(!hasMarkers&&polyline){polyline.context={chart:this.chart,series:this,points:cPoints};}
else{}}
VertLineSeries.prototype._renderLinearData=function(renderContext){var data=this.arrData;var len=data.length;var hasMarkers=this.markers!=null&&this.markers.isVisible();var hasLabels=this.labels!=null&&this.labels.visible!==false;var pts=[];var cPoints=[];var lblOffset=this.getLabelsOffset();var x,y,vlX,vlY;for(var i=0;i<len;i++){var vl=data[i];if(vl===null||vl===undefined){pts.push(null);pts.push(null);if(!hasMarkers){cPoints.push(null);}
continue;}
vlX=vl[0];vlY=vl[1];if(jMath.isNull(vlX)||jMath.isNull(vlY)){pts.push(null);pts.push(null);if(!hasMarkers){cPoints.push(null);}
continue;}
y=this.realXAxis.getPosition(vlX);x=this.realYAxis.getPosition(vlY);pts.push(x);pts.push(y);if(!hasMarkers){cPoints.push({dataItem:vl,index:i,x:vlX,y:vlY});}
if(this.realYAxis.isValueVisible(vlY)===false){continue;}
this._addMarkerAndLabel(renderContext,x,y,i,len,vlX,vlY,lblOffset);}
var polyline=this._createShape(pts,renderContext);if(!hasMarkers&&polyline){polyline.context={chart:this.chart,series:this,points:cPoints};}
else{}}
VertLineSeries.prototype._createShape=function(pts,renderContext){var polyline=new Polyline(pts);this._setShapeSettings(polyline);renderContext.shapes.push(polyline);this._addLengthAnimation(polyline);return polyline;}
VertLineSeries.prototype._getPixelMargins=function(axis){return Series.prototype._getPixelMargins.call(this,axis);}
function VertSplineSeries(options){VertLineSeries.call(this,options);}
VertSplineSeries.prototype=new VertLineSeries();VertSplineSeries.constructor=VertSplineSeries;VertSplineSeries.prototype._createShape=function(pts,renderContext){var polyline=new Curve(pts);this._setShapeSettings(polyline);renderContext.shapes.push(polyline);this._addLengthAnimation(polyline);return polyline;}
function VertAreaSeries(options){var defs=jFunc.extend(true,{},this.defaults,{lineWidth:0,markers:null});this.defaults=defs;Series.call(this,options);this.decorationType='fill';}
VertAreaSeries.prototype=new VertLineSeries();VertAreaSeries.constructor=VertAreaSeries;VertAreaSeries.prototype._createShape=function(pts,renderContext){var linePts=[];jFunc.merge(linePts,pts);var polyline=new Polyline(linePts);this._setShapeSettings(polyline);this.setAreaLineClasses(polyline);var gArea=this.chart.gridArea;var left=gArea.x;var right=gArea.x+gArea.width;var crossPos=this.realYAxis.getCrossingPosition();crossPos=jMath.fitInRange(crossPos,left,right);var polygon=new Area(pts,crossPos,true);this._setShapeSettings(polygon);this.setAreaPolygonClasses(polygon);renderContext.shapes.push(polygon);renderContext.shapes.push(polyline);this._addLengthAnimation(polygon);this._addLengthAnimation(polyline);return polyline;}
VertAreaSeries.prototype._isAnchoredToOrigin=function(){return true;}
function VertSplineAreaSeries(options){VertAreaSeries.call(this,options);}
VertSplineAreaSeries.prototype=new VertAreaSeries();VertSplineAreaSeries.constructor=VertSplineAreaSeries;VertSplineAreaSeries.prototype._createShape=function(pts,renderContext){var linePts=[];jFunc.merge(linePts,pts);var curve=new Curve(linePts);this._setShapeSettings(curve);this.setAreaLineClasses(curve);var gArea=this.chart.gridArea;var left=gArea.x;var right=gArea.x+gArea.width;var crossPos=this.realYAxis.getCrossingPosition();crossPos=jMath.fitInRange(crossPos,left,right);var polygon=new Area(pts,crossPos,true,true);this._setShapeSettings(polygon);this.setAreaPolygonClasses(polygon);renderContext.shapes.push(polygon);renderContext.shapes.push(curve);this._addLengthAnimation(polygon);this._addLengthAnimation(curve);return curve;}
function RangeSeries(options){var defs=jFunc.extend(true,{},this.defaults,{lineWidth:0,markers:null});this.defaults=defs;Series.call(this,options);this.decorationType='fill';}
RangeSeries.prototype=new Series();RangeSeries.constructor=RangeSeries;RangeSeries.prototype._initXYData=function(){this._initXYDataRange(1,3);}
RangeSeries.prototype._initCatValueData=function(){this._initCatValueDataRange(1,3,true);}
RangeSeries.prototype._initDateValueData=function(){this._initDateValueDataRange(1,3);}
RangeSeries.prototype._initVisibleCatValueData=function(){this._initVisibleCatValueDataRange(1,3);}
RangeSeries.prototype._initVisibleXYData=function(){this._initVisibleXYDataRange(1,3);}
RangeSeries.prototype._processData=function(){this._processDataXYZ();}
RangeSeries.prototype._renderCatData=function(renderContext){var data=this.arrData;var len=data.length;var hasMarkers=this.markers!=null&&this.markers.isVisible();var pts1=[];var pts2=[];var cPoints=[];var lblOffset=this.getLabelsOffset();var x,y1,y2,vlX,vlY1,vlY2;for(var i=0;i<len;i++){var vl=data[i];if(vl===null||vl===undefined){pts1.push(null);pts1.push(null);pts2.push(null);pts2.push(null);if(!hasMarkers){cPoints.push(null);}
continue;}
vlX=i+0.5;vlY1=vl[1];vlY2=vl[2];x=this.realXAxis.getPosition(vlX);y1=this.realYAxis.getPosition(vlY1);y2=this.realYAxis.getPosition(vlY2);pts1.push(x);pts1.push(y1);pts2.push(x);pts2.push(y2);if(!hasMarkers){cPoints[i]=cPoints[2*len-i-1]={dataItem:vl,index:i,x:vlX,from:vlY1,to:vlY2};}
this._addMarkersAndLabels(renderContext,x,y1,y2,i,len,null,vlY1,vlY2,lblOffset);}
var polyline=this._createShape(pts1,pts2,renderContext);if(!hasMarkers&&polyline){polyline.context={chart:this.chart,series:this,points:cPoints};}
else{}}
RangeSeries.prototype._renderLinearData=function(renderContext){var data=this.arrData;var len=data.length;var hasMarkers=this.markers!=null&&this.markers.isVisible();var hasLabels=this.labels!=null&&this.labels.visible!==false;var pts1=[];var pts2=[];var cPoints=[];var lblOffset=this.getLabelsOffset();var x,y1,y2,vlX,vlY1,vlY2;for(var i=0;i<len;i++){var vl=data[i];if(vl===null||vl===undefined){pts.push(null);pts.push(null);if(!hasMarkers){cPoints.push(null);}
continue;}
vlX=vl[0];vlY1=vl[1];vlY2=vl[2];x=this.realXAxis.getPosition(vlX);y1=this.realYAxis.getPosition(vlY1);y2=this.realYAxis.getPosition(vlY2);pts1.push(x);pts1.push(y1);pts2.push(x);pts2.push(y2);if(!hasMarkers){cPoints[i]=cPoints[2*len-i-1]={dataItem:vl,index:i,x:vlX,from:vlY1,to:vlY2};}
this._addMarkersAndLabels(renderContext,x,y1,y2,i,len,null,vlY1,vlY2,lblOffset);}
var polyline=this._createShape(pts1,pts2,renderContext);if(!hasMarkers&&polyline){polyline.context={chart:this.chart,series:this,points:cPoints};}
else{}}
RangeSeries.prototype._createShape=function(pts1,pts2,renderContext){var polygon=new RangeShape(pts1,pts2);this._setShapeSettings(polygon);renderContext.shapes.push(polygon);this._addLengthAnimation(polygon);return polygon;}
RangeSeries.prototype._addMarkersAndLabels=function(renderContext,x,y1,y2,i,length,vlX,vlY1,vlY2,lblOffset){var mOffset=0;var data=this.arrData;var dataX=vlX?vlX:i;if(this.markers&&this.markers.isVisible()){var context={chart:this.chart,series:this,dataItem:data[i],index:i,x:this.realXAxis._getValue(dataX),from:vlY1,to:vlY2};mOffset=this.markers.offset;var imagePath=context.dataItem[3];var marker=this._addMarker(x,y1,null,vlY1,imagePath,i,context);if(marker.marker){if(marker.line){markers.push(marker.line);}
renderContext.markers.push(marker.marker);this._addShapeAnimation(marker.marker,i,length);}
marker=this._addMarker(x,y2,null,vlY2,imagePath,i,context);if(marker.marker){if(marker.line){markers.push(marker.line);}
renderContext.markers.push(marker.marker);this._addShapeAnimation(marker.marker,i,length);}}
if(this.labels&&this.labels.visible!==false){var labelValue=this._getLabelValue(vlY1,i);var tBlock=this._getDataPointLabel(vlY1,x,y1,lblOffset+mOffset,labelValue,vlY1>vlY2,i);var context={chart:this.chart,series:this,dataItem:data[i],index:i};tBlock.context=context;this.chart.triggerEvent('dataPointLabelCreating',tBlock);renderContext.txtBlocks.push(tBlock);this._addShapeAnimation(tBlock,i,length);labelValue=this._getLabelValue(vlY2,i);tBlock=this._getDataPointLabel(vlY2,x,y2,lblOffset+mOffset,labelValue,vlY2>vlY1,i);tBlock.context=context;this.chart.triggerEvent('dataPointLabelCreating',tBlock);renderContext.txtBlocks.push(tBlock);this._addShapeAnimation(tBlock,i,length);}}
RangeSeries.prototype._getDataPointLabel=function(vl,x,y,offset,dataValue,isTop,index){var text=this._getLabelText(dataValue);var tBlock=new TextBlock(text);this.setLabelClasses(tBlock,index);this.setShadows(tBlock);jFunc.extend(tBlock,this.labels);tBlock.measure();tBlock.textAlign='center';tBlock.x=x;if(isTop){tBlock.y=y-offset;tBlock.textBaseline='bottom';}
else{tBlock.y=y+offset;tBlock.textBaseline='top';}
return tBlock;}
RangeSeries.prototype._getTooltipTitleColon=function(){return '';};RangeSeries.prototype._getTooltipValue=function(context){var tooltipValue='<div>From: '+context.from+'</div>'+
'<div>To: '+context.to+'</div>';return '<div class="dvx-chart-tooltip-series-value">'+tooltipValue+'</div>';};function SplineRangeSeries(options){RangeSeries.call(this,options);}
SplineRangeSeries.prototype=new RangeSeries();SplineRangeSeries.constructor=SplineRangeSeries;SplineRangeSeries.prototype._createShape=function(pts1,pts2,renderContext){var polygon=new RangeShape(pts1,pts2,true);this._setShapeSettings(polygon);renderContext.shapes.push(polygon);this._addLengthAnimation(polygon);return polygon;}
function FunnelSeries(options){var defs=jFunc.extend(true,{},this.defaults,{lineWidth:0,spacing:0,inverted:false,dynamicSlope:false,dynamicHeight:false,neckRatio:0.2});this.defaults=defs;NoAxesSeries.call(this,options);}
FunnelSeries.prototype=new NoAxesSeries();FunnelSeries.constructor=FunnelSeries;FunnelSeries.prototype._render=function(seriesRenderContext){if(!this.hasRealData||!this.isInScene()){return;}
var renderContext={shapes:[],txtBlocks:[]};var data=this.arrData,gArea=this.chart.gridArea,hiddenSlices=this.hiddenSlices,length=data.length,visibleLength=length-hiddenSlices.length,visibleIndex=0,neckRatio=this.neckRatio,inverted=this.inverted,margin=this.margin,x=gArea.x+margin,y=gArea.y+margin,width=gArea.width-2*margin,height=gArea.height-2*margin,cx=x+width/2,cy=y+height/2,lastLoc=y,lastRadius,sum=0,yValues=this._getYValues(),startRadius,startLoc,endRadius,endLoc,largestRadius=width,maxValue=0,dataItem,vl,percentage,i;for(i=0;i<length;i++){if(jFunc.inArray(i,hiddenSlices)!=-1){continue;}
vl=yValues[i];sum+=vl;if(vl>maxValue){maxValue=vl;}}
lastRadius=largestRadius;if(inverted){lastRadius*=neckRatio;}
for(i=0;i<length;i++){if(jFunc.inArray(i,hiddenSlices)!=-1){continue;}
vl=yValues[i];percentage=100*vl/sum;startRadius=lastRadius;startLoc=lastLoc;if(this.dynamicHeight){endLoc=startLoc+vl/sum*height;}else{endLoc=startLoc+height/visibleLength;}
if(this.dynamicSlope){startRadius=vl/maxValue*width;endRadius=yValues[this._getNextValueIndex(i)]/maxValue*width;}else{if(inverted){endRadius=startRadius+(1-neckRatio)*(endLoc-startLoc)*width/height;}else{endRadius=startRadius-(1-neckRatio)*(endLoc-startLoc)*width/height;}}
var currentBounds={x:cx-endRadius/2,y:lastLoc,w:endRadius,h:endLoc-startLoc};var context={chart:this.chart,series:this,dataItem:data[i],index:i,value:vl,percentage:percentage};var slice=this._createSlice(startRadius,endRadius,startLoc,endLoc,currentBounds,i,context);renderContext.shapes.push(slice);this._addShapeAnimation(slice,visibleIndex,visibleLength);var label=this._createLabel(currentBounds,i,data[i],vl,context);if(label){renderContext.txtBlocks.push(label);this._addShapeAnimation(label,visibleIndex,visibleLength);}
lastRadius=endRadius;lastLoc=endLoc;visibleIndex++;}
this._finalizeRendering(seriesRenderContext,renderContext);};FunnelSeries.prototype._createSlice=function(startRadius,endRadius,startLoc,endLoc,shapeBounds,index,context){var spacing=this.spacing/2;startLoc+=spacing;endLoc-=spacing;shapeBounds.y+=spacing;shapeBounds.h-=2*spacing;var cx=shapeBounds.x+shapeBounds.w/2,cy=shapeBounds.y+shapeBounds.h/2,lineWidth=this.lineWidth/2,leftTop=cx-startRadius/2+lineWidth,rightTop=cx+startRadius/2-lineWidth,leftBottom=cx-endRadius/2+lineWidth,rightBottom=cx+endRadius/2-lineWidth,top=startLoc+lineWidth,bottom=endLoc-lineWidth,pts=[leftTop,top,rightTop,top,rightBottom,bottom,leftBottom,bottom];var polygon=new Polygon(pts);polygon.context=context;this._setShapeSettings(polygon);this.setItemClasses(polygon,index);return polygon;};FunnelSeries.prototype._createLabel=function(shapeBounds,index,dataItem,vl,context){if(!this.labels||this.labels.visible===false){return;}
var labelValue=vl;switch(this.labels.valueType){case 'percentage':labelValue=context.percentage;break;}
var cx=shapeBounds.x+shapeBounds.w/2,cy=shapeBounds.y+shapeBounds.h/2;var text=this._getLabelText(labelValue);var textBlock=new TextBlock(text);this.setLabelClasses(textBlock,index);textBlock.textAlign='center';jFunc.extend(textBlock,this.labels);textBlock.measure();textBlock.x=cx;textBlock.y=cy;textBlock.context=context;this.chart.triggerEvent('dataPointLabelCreating',textBlock);return textBlock;};FunnelSeries.prototype._getNextValueIndex=function(index){var data=this.arrData,hiddenSlices=this.hiddenSlices,length=data.length;for(var i=index+1;i<length;i++){if(jFunc.inArray(i,hiddenSlices)==-1){return i;}}
return index;};function PyramidSeries(options){var defs=jFunc.extend(true,{},this.defaults,{});this.defaults=defs;Series.call(this,options);}
PyramidSeries.prototype=new Series();PyramidSeries.constructor=PyramidSeries;PyramidSeries.prototype._initXAxis=function(axes){}
PyramidSeries.prototype._initYAxis=function(axes){}
PyramidSeries.prototype._initVisibleData=function(){}
PyramidSeries.prototype._render=function(){}
function AxesArray(chart,options){this.chart=chart;if(options){this.setOptions(options);}}
AxesArray.prototype.setOptions=function(options){options=options||{};var axes=[];var currentAxes=[];for(var i=0;i<options.length;i++){var axisOp=options[i];this._resolveType(axisOp);var axis;if(currentAxes){var currAxis=currentAxes[i];if(currAxis&&currAxis.options==axisOp){currAxis.setOptions(axisOp);axes.push(currAxis);if(currAxis.rangeSlider.visible!==false){currAxis.skipClear=true;}
continue;}}
switch(axisOp.type){case 'category':axis=new CategoryAxis(axisOp);break;case 'dateTime':axis=new DateTimeAxis(axisOp);break;case 'linearRadius':axis=new LinearRadiusAxis(axisOp);break;case 'categoryAngle':axis=new CategoryAngleAxis(axisOp);break;case 'linearAngle':axis=new LinearAngleAxis(axisOp);break;case 'linear':default:axis=new LinearAxis(axisOp);}
axis._setChart(this.chart);axes.push(axis);}
this.userAxes=axes;this.clear();}
AxesArray.prototype._resolveType=function(axisOp){if(axisOp.type){return;}
var series=this.chart.series.items;if(series.length<1){return;}
series[0]._resolveAxisType(axisOp);}
AxesArray.prototype._initSeriesAxes=function(){var axes=[];jFunc.merge(axes,this.userAxes);var series=this.chart.series.items;for(var i=0;i<series.length;i++){var ser=series[i];if(!ser.isInScene()){continue;}
ser._initXAxis(axes);ser._initYAxis(axes);ser._initSharedAxes();}
this.items=axes;}
AxesArray.prototype._initSeries=function(){var axes=this.items;for(var i=0;i<axes.length;i++){var axis=axes[i];axis._initSeries();}}
AxesArray.prototype._initRanges=function(){var axes=this.items;for(var i=0;i<axes.length;i++){var axis=axes[i];axis._initRange();}}
AxesArray.prototype._resetWH=function(){var axes=this.items;for(var i=0;i<axes.length;i++){var axis=axes[i];if(!axis.isCustomWidth){axis.width=0;}
if(!axis.isCustomHeight){axis.height=0;}}}
AxesArray.prototype._measure=function(){var axes=this.items;var isSizeChanged=false;for(var i=0;i<axes.length;i++){var axis=axes[i];var isAxisSizeChanged=axis._measure();isSizeChanged=isSizeChanged||isAxisSizeChanged;}
return isSizeChanged;}
AxesArray.prototype._arrange=function(){var axes=this.items;for(var i=0;i<axes.length;i++){var axis=axes[i];axis._arrange();}}
AxesArray.prototype._getAxesInLoc=function(location){var res=[];var axes=this.items;for(var i=0;i<axes.length;i++){var axis=axes[i];if(axis.location==location){res.push(axis);}}
return res;}
AxesArray.prototype._getVAxes=function(){var res=[];var axes=this.items;for(var i=0;i<axes.length;i++){var axis=axes[i];if(axis.isVertical()){res.push(axis);}}
return res;}
AxesArray.prototype._getHAxes=function(){var res=[];var axes=this.items;for(var i=0;i<axes.length;i++){var axis=axes[i];if(axis.isVertical()==false){res.push(axis);}}
return res;}
AxesArray.prototype._getTotalWidth=function(){if(this.horCrossingAxis){return 0;}
var tW=0;var axes=this.items;for(var i=0;i<axes.length;i++){var axis=axes[i];if(axis.isVertical()){tW=tW+axis.width;}}
return tW;}
AxesArray.prototype._getTotalHeight=function(){if(this.verCrossingAxis){return 0;}
var tH=0;var axes=this.items;for(var i=0;i<axes.length;i++){var axis=axes[i];if(axis.isVertical()==false){tH=tH+axis.height;}}
return tH;}
AxesArray.prototype._render=function(axesRenderContext){var axes=this.items,i,axis,axisGroup,groupShape=new GroupShape();axesRenderContext.shapes.push(groupShape);for(i=0;i<axes.length;i++){axis=axes[i];axisGroup=axis._render(axesRenderContext);groupShape.addShape(axisGroup);}}
AxesArray.prototype._updateOrigins=function(){var axes=this.items;for(var i=0;i<axes.length;i++){var axis=axes[i];axis._updateOrigin();}}
AxesArray.prototype._correctOrigins=function(){var axes=this.items;for(var i=0;i<axes.length;i++){var axis=axes[i];if(axis._correctOrigin){axis._correctOrigin();}}}
AxesArray.prototype.getZoomableAxes=function(){var res=[];var axes=this.items;for(var i=0;i<axes.length;i++){var axis=axes[i];if(axis.zoomEnabled){res.push(axis);}}
return res;}
AxesArray.prototype.find=function(name){var axes=this.items;if(name!=null){for(var i=0;i<axes.length;i++){var axis=axes[i];if(axis.name==name){return axis;}}}
return null;}
AxesArray.prototype.clear=function(){if(!this.items){return;}
jFunc.each(this.items,function(){if(!this.skipClear){this.clear();}
else{this.skipClear=false;}});}
function Axis(options){AxisBase.call(this,options);}
Axis.prototype=new AxisBase();Axis.constructor=Axis;Axis.prototype._initDefs=function(){AxisBase.prototype._initDefs.call(this);var defs=jFunc.extend(true,{},this.defaults,{rangeSlider:{visible:true,breadth:24},mouseWheelZoomStep:0.001,mouseWheelScrollStep:0.05,margin:5,lineWidth:1,zoomEnabled:false,visible:true});this.defaults=defs;}
Axis.prototype._initSeries=function(){var axSeries=new SeriesArray(null,this.chart);var series=this.chart.series.items;for(var i=0;i<series.length;i++){var ser=series[i];if(ser.realXAxis==this||ser.realYAxis==this){axSeries.items.push(ser);}}
this.series=axSeries;}
Axis.prototype._setVisibleRanges=function(){AxisBase.prototype._setVisibleRanges.call(this);if(!this.axisRangeSlider){return;}
var smallChange=(this.actualMaximum-this.actualMinimum)/10;this.axisRangeSlider.setState({orientation:this.isAxisVertical?'vertical':'horizontal',reversed:this.reversed,minimum:this.actualMinimum,maximum:this.actualMaximum,smallChange:smallChange,largeChange:2*smallChange,minRange:smallChange/100,range:{minimum:this.actualVisibleMinimum,maximum:this.actualVisibleMaximum}});}
Axis.prototype._arrange=function(){AxisBase.prototype._arrange.call(this);if(!this.zoomEnabled){this.clear();return;}
var rangeSliderBreadth=this.rangeSlider.breadth;if(this.rangeSlider.visible===false){return;}
this.offset+=rangeSliderBreadth;var offset=this.offset;if(!this.axisRangeSlider){var domElement=this.chart.getDOMElement();domElement.insertAdjacentHTML('beforeend','<div style="position:absolute"></div>');var rangeSlider=new RangeSlider(domElement.lastChild);var that=this;var chartOpts=that.chart.options;if(!chartOpts.dataSource||chartOpts.dataSource.serverFiltering!==true){jFunc.bind(rangeSlider.elem,'rangeChanging',function(event,range){that._sliderZoom(range||event.detail);});}
jFunc.bind(rangeSlider.elem,'rangeChanged',function(event,range){that._sliderZoom(range||event.detail);});this.axisRangeSlider=rangeSlider;}
var css;switch(this.location){case 'left':css={left:this.x+this.width-offset,top:this.y,width:rangeSliderBreadth,height:this.height};break;case 'right':css={left:this.x+this.lineWidth/2,top:this.y,width:rangeSliderBreadth,height:this.height};break;case 'top':css={left:this.x,top:this.y+this.height-offset,width:this.width,height:rangeSliderBreadth};break;case 'bottom':css={left:this.x,top:this.y+this.lineWidth/2,width:this.width,height:rangeSliderBreadth};default:break;}
if(css){this.axisRangeSlider.css(css).setState({orientation:this.isAxisVertical?'vertical':'horizontal',reversed:this.reversed});}}
Axis.prototype._moveVisibleRange=function(dx,dy){var vertical=this.isAxisVertical;var min=this.actualVisibleMinimum;var max=this.actualVisibleMaximum;var range=max-min;var offset=0;if(vertical){offset=-range*dy/this.length;}
else{offset=range*dx/this.length;}
if(this.reversed){offset=-offset;}
offset=Math.max(offset,this.actualMinimum-min);offset=Math.min(offset,this.actualMaximum-max);this.visibleMinimum=min+offset;this.visibleMaximum=max+offset;this._setVisibleRanges();this._zoom();}
Axis.prototype._mouseWheelZoom=function(delta){var min=this.actualVisibleMinimum;var max=this.actualVisibleMaximum;var offset=delta*100*this.mouseWheelZoomStep*(this.actualVisibleMaximum-this.actualVisibleMinimum);var mouseInput=this.chart.mouseInput;if(!mouseInput){return;}
var mousePos=this.isAxisVertical?mouseInput.locY:mouseInput.locX;var coef=(mousePos-this.origin)/this.length;var coefMin,coefMax;if(this.isAxisVertical){coefMin=(1-coef);coefMax=coef;}
else{coefMin=coef;coefMax=1-coef;}
min=Math.max(this.actualMinimum,min+offset*coefMin);max=Math.min(this.actualMaximum,max-offset*coefMax);var minRange=(this.actualMaximum-this.actualMinimum)/1000;if(max-min<minRange){return;}
this.visibleMinimum=min;this.visibleMaximum=max;this._setVisibleRanges();this._zoom();}
Axis.prototype._mouseWheelScroll=function(delta){var min=this.actualVisibleMinimum;var max=this.actualVisibleMaximum;var range=this.mouseWheelScrollStep*delta*(this.actualMaximum-this.actualMinimum);if(min+range<this.actualMinimum){range=this.actualMinimum-min;}
if(max+range>this.actualMaximum){range=this.actualMaximum-max;}
min+=range;max+=range;this.visibleMinimum=min;this.visibleMaximum=max;this._setVisibleRanges();this._zoom();}
Axis.prototype._scaleVisibleRange=function(input1,input2){var min=this.actualVisibleMinimum;var max=this.actualVisibleMaximum;var range=max-min;var zoom=this.getZoom();var scale,offset1,offset2;var vertical=this.isAxisVertical;if(vertical){scale=input1.dy/input2.dy;var dy1=input2.y1-input1.y1;var dy2=input2.y2-input1.y2;offset1=-range*dy2/this.length/zoom;offset2=-range*dy1/this.length/zoom;if(input1.y1>input1.y2){var temp=offset1;offset1=offset2;offset2=temp;}}
else{scale=input1.dx/input2.dx;var dx1=input2.x1-input1.x1;var dx2=input2.x2-input1.x2;offset1=range*dx1/this.length/zoom;offset2=range*dx2/this.length/zoom;if(input1.x1>input1.x2){var temp=offset1;offset1=offset2;offset2=temp;}}
if(this.reversed){var temp=offset1;offset1=-offset2;offset2=-temp;}
var center=(min+max)/2;var minRange=(this.actualMaximum-this.actualMinimum)/1000;min=Math.max(this.actualMinimum,min-offset1);max=Math.min(this.actualMaximum,max-offset2);if(min>max-minRange){minRange/=2;min=center-minRange;max=center+minRange}
this.visibleMinimum=min;this.visibleMaximum=max;this._setVisibleRanges();this._zoom();}
Axis.prototype._scaleToRegion=function(input1,input2){var gridArea=this.chart.gridArea;var x1=gridArea.fitHor(input1.locX);var y1=gridArea.fitVer(input1.locY);var x2=gridArea.fitHor(input2.locX);var y2=gridArea.fitVer(input2.locY);var reversed=this.reversed;var vl1,vl2;if(this.isAxisVertical){if(reversed){vl1=Math.min(y1,y2);vl2=Math.max(y1,y2);}
else{vl1=Math.max(y1,y2);vl2=Math.min(y1,y2);}}
else{if(reversed){vl1=Math.max(x1,x2);vl2=Math.min(x1,x2);}
else{vl1=Math.min(x1,x2);vl2=Math.max(x1,x2);}}
vl1=this.getValue(vl1);vl2=this.getValue(vl2);var minRange=(this.actualMaximum-this.actualMinimum)/1000;if(vl2-vl1<minRange){var diff=(minRange-(vl2-vl1))/2;vl1-=diff;vl2+=diff;}
this.visibleMinimum=vl1;this.visibleMaximum=vl2;this._setVisibleRanges();this._zoom();}
Axis.prototype._sliderZoom=function(range){this.visibleMinimum=this.options.visibleMinimum=range.minimum;this.visibleMaximum=this.options.visibleMaximum=range.maximum;this.chart.partialDelayedUpdate();this._zoom();}
Axis.prototype._zoom=function(){this.chart.triggerEvent('axisZoom',{chart:this.chart,axis:this});}
Axis.prototype._getTooltip=function(value){return '<div class="dvx-chart-tooltip-title">'+jMath.replaceTextForTooltip(value)+'</div>';}
Axis.prototype.getCatPosition=function(value){return AxisBase.prototype.getPosition.call(this,value);}
Axis.prototype.resetZoom=function(){if(!this.zoomEnabled){return;}
this.visibleMinimum=this.actualMinimum;this.visibleMaximum=this.actualMaximum;this._setVisibleRanges();this._zoom();}
Axis.prototype.clear=function(){if(this.axisRangeSlider){this.axisRangeSlider.destroy();this.axisRangeSlider=null;}}
function CategoryAxis(options){Axis.call(this,options);this.DataType='CategoryAxis';}
CategoryAxis.prototype=new Axis();CategoryAxis.constructor=CategoryAxis;CategoryAxis.prototype.getCategories=function(){if(this.categories){return this.categories;}
var arrDataSource=this.chart.arrDataSource;if(!arrDataSource){return null;}
var categoriesField=this.categoriesField;var cats=jMath.processDataField(arrDataSource,categoriesField);return cats;}
CategoryAxis.prototype._initRange=function(){var series=this.series;series._initCategories();var cats=series.categories;this.arrCats=this.getCategories();var categoriesLength=cats.length;if(this.arrCats){categoriesLength=Math.max(categoriesLength,this.arrCats.length);}
var min=0;var max=categoriesLength;if(!jMath.isNull(this.minimum)){min=this.minimum;}
if(!jMath.isNull(this.maximum)){max=this.maximum;}
this.actualMinimum=min;this.actualMaximum=max;this._setVisibleRanges();this.actualInterval=this.interval||1;this.seriesCategories=cats;}
CategoryAxis.prototype._getLabelIntervals=function(interval,mark){var offset=0;if(mark&&mark.intervalOffset){offset=mark.intervalOffset;}
var intrs=[];var min=Math.round(this.actualVisibleMinimum);var intrStart=this._getIntervalStart(min,interval)+0.5;for(var i=intrStart+offset;i<=this.actualVisibleMaximum;i=jMath.round(i+interval)){intrs.push(i);}
return intrs;}
CategoryAxis.prototype._getIntervalCount=function(){return this.arrCats.length;}
CategoryAxis.prototype._getValue=function(value){var index=Math.round(value);var category;if(this.arrCats&&index<this.arrCats.length){category=this.arrCats[index];}
else{category=this.seriesCategories[index];}
return category;}
CategoryAxis.prototype.getLabel=function(value){var label;if(jFunc.type(value)=='string'){label=value;}
else{var index=Math.round(value-0.5);if(this.arrCats&&index<this.arrCats.length){label=this.arrCats[index];}
else{label=this.seriesCategories[index];}}
label=label||'';return Axis.prototype.getLabel.call(this,label);}
CategoryAxis.prototype.getCatPosition=function(value){if(this.reversed){value++;}
return AxisBase.prototype.getPosition.call(this,value);}
CategoryAxis.prototype.getOrientation=function(series){return 'x';}
function LinearAxis(options){Axis.call(this,options);this.DataType='LinearAxis';}
LinearAxis.prototype=new Axis();LinearAxis.constructor=LinearAxis;LinearAxis.prototype._initDefs=function(){Axis.prototype._initDefs.call(this);var defs=jFunc.extend(true,{},this.defaults,{extendRangeToOrigin:false,logarithmic:false,logBase:10,labels:{resolveOverlappingMode:'hide'}});this.defaults=defs;}
LinearAxis.prototype._initRange=function(){var series=this.series;series._initRanges();var dMin,dMax;if(this.getOrientation()=='x'){dMin=series.minX;dMax=series.maxX;}
else{dMin=series.min;dMax=series.max;}
if(dMin==maxVl&&dMax==minVl){dMin=0;dMax=10;}
var plotRange=this._addPlotsInRange(dMin,dMax);dMin=plotRange.min;dMax=plotRange.max;if(!jMath.isNull(this.minimum)){dMin=this.minimum;}
if(!jMath.isNull(this.maximum)){dMax=this.maximum;}
var range=Math.abs(dMax-dMin);var divisor=this.DataType=='DateTimeAxis'?100000000000:1000000;if(range<Math.abs(dMin)/divisor){range=0;}
if(this.skipEmptyDays){range-=this.totalEmptyDaysTicks;}
if(range<=0){range=Math.max(1,dMax/10);dMin-=range/2;dMax+=range/2;}
var leftMargin=0;var rightMargin=0;var margin=series._getPixelMargins(this);if(this.isAxisVertical){margin.left=jMath.isNull(this.bottomMargin)?margin.left+0.5:this.bottomMargin;margin.right=jMath.isNull(this.topMargin)?margin.right+0.5:this.topMargin;}
else{margin.left=jMath.isNull(this.leftMargin)?margin.left+0.5:this.leftMargin;margin.right=jMath.isNull(this.rightMargin)?margin.right+0.5:this.rightMargin;}
var valuePerPixels=range/this.length;leftMargin=valuePerPixels*margin.left;rightMargin=valuePerPixels*margin.right;if(this.logarithmic===true){leftMargin=Math.max(0,jMath.log(leftMargin,this.logBase));rightMargin=Math.max(0,jMath.log(rightMargin,this.logBase));}
var currMin=dMin-leftMargin;var currMax=dMax+rightMargin;var isDataAnchoredToOrigin=this.series._isAnchoredToOrigin();var cross=this.getCrossing();if(isDataAnchoredToOrigin&&this.getOrientation()=='y'){if(dMin>=cross&&currMin<cross){currMin=cross;}
else if(dMax<=cross&&currMax>cross){currMax=cross;}}
if(this.extendRangeToOrigin){if(currMin>cross){currMin=cross;}
else if(currMax<cross){currMax=cross;}}
if(this.logarithmic===true){var minValue=1;if(currMin<minValue){currMin=minValue;}
currMin=jMath.log(currMin,this.logBase);currMax=jMath.log(currMax,this.logBase);var currInterval=this._calculateActualIntervalLogarithmic(currMin,currMax);currMin=jMath.round(Math.floor(currMin/currInterval)*currInterval);currMax=jMath.round(Math.ceil(currMax/currInterval)*currInterval);}
var minRange=this.minimumRange;if(minRange){var currDiff=currMax-currMin;if(minRange>currDiff){currDiff=(minRange-currDiff)/2;currMin-=currDiff;currMax+=currDiff;}}
this._setMinMax(currMin,currMax);this._setVisibleRanges();if(this.logarithmic===true){this.actualInterval=this._calculateActualIntervalLogarithmic(this.actualVisibleMinimum,this.actualVisibleMaximum);}
else{this.actualInterval=this._calculateActualInterval(this.actualVisibleMinimum,this.actualVisibleMaximum);}}
LinearAxis.prototype._addPlotsInRange=function(dMin,dMax){var plotLines=this.plotLines;if(plotLines){for(var i=0;i<plotLines.length;i++){var vl=plotLines[i].value;if(!jMath.isNull(vl)){dMin=Math.min(dMin,vl);dMax=Math.max(dMax,vl);}}}
var plotBands=this.plotBands;if(plotBands){for(var i=0;i<plotBands.length;i++){var from=plotBands[i].from;var to=plotBands[i].to;if(!jMath.isNull(from)){dMin=Math.min(dMin,from);dMax=Math.max(dMax,from);}
if(!jMath.isNull(to)){dMin=Math.min(dMin,to);dMax=Math.max(dMax,to);}}}
return{min:dMin,max:dMax};}
LinearAxis.prototype._calculateActualIntervalLogarithmic=function(min,max){if(this.interval){return this.interval;}
var interval=(max-min)/3.0;var baseInterval=Math.floor(jMath.log10(Math.abs(interval)));if(baseInterval==0){baseInterval=1;}
return jMath.round(Math.floor((interval/baseInterval))*baseInterval);}
LinearAxis.prototype._getIntervals=function(interval,mark,major){if(this.customTickMarks){return this.customTickMarks;}
if(this.logarithmic===false){return Axis.prototype._getIntervals.call(this,interval,mark);}
if(major===false){return this._getLogarithmicMinorIntervals(interval,mark);}
var offset=0;if(mark&&mark.intervalOffset){offset=mark.intervalOffset;}
var intrs=[];var intrStart=this._getIntervalStart(this._getActualVisibleMinimum(),interval);for(var i=intrStart+offset;i<=this._getActualVisibleMaximum();i=jMath.round(i+interval)){intrs.push(Math.pow(this.logBase,i));}
return intrs;}
LinearAxis.prototype._getLogarithmicMinorIntervals=function(interval,mark){var majorIntr=this._getMarkInterval(mark.major,true);var majorIntrs=this._getIntervals(majorIntr,mark.major,true);var intrs=[];var prevMajor=null;for(var i=0;i<majorIntrs.length;i++){var major=majorIntrs[i];if(prevMajor==null){prevMajor=major;continue;}
var value1=prevMajor;var value2=major;if(value1<value2){var temp=value1;value1=value2;value2=temp;}
var minorDelta=(value1-value2)*interval/10;var minorPositionValue=value2+minorDelta;while(minorPositionValue<value1){intrs.push(jMath.round(minorPositionValue));minorPositionValue+=minorDelta;}
prevMajor=major;}
return intrs;}
LinearAxis.prototype._getIntervalCount=function(){return Math.ceil(this._getActualMaximum()-this._getActualMinimum());}
LinearAxis.prototype.getCrossingPosition=function(){return this.getPosition(this.getCrossing());}
LinearAxis.prototype.getOrientation=function(series){var isVertical=this.isVertical();if(this.series){for(var i=0;i<this.series.items.length;i++){series=this.series.items[i];}}
if(series&&series.isVertical){isVertical=!isVertical;}
if(isVertical){return 'y';}
return 'x';}
LinearAxis.prototype.getPosition=function(val){if(this.logarithmic==true){val=jMath.log(val,this.logBase);}
var value=Axis.prototype.getPosition.call(this,val);return value;}
function DateTimeAxis(options){LinearAxis.call(this,options);this.DataType='DateTimeAxis';}
DateTimeAxis.prototype=new LinearAxis();DateTimeAxis.constructor=DateTimeAxis;DateTimeAxis.prototype._initDefs=function(){LinearAxis.prototype._initDefs.call(this);var dateFormat=jFunc.getDateFormat();var masks=dateFormat.masks;var defs=jFunc.extend(true,{},this.defaults,{labels:{yearsIntervalStringFormat:'yyyy',monthsIntervalStringFormat:masks.shortDate,weeksIntervalStringFormat:masks.shortDate,daysIntervalStringFormat:masks.shortDate,hoursIntervalStringFormat:masks.shortDate+' '+masks.shortTime,minutesIntervalStringFormat:masks.shortTime,secondsIntervalStringFormat:masks.longTime,millisecondsIntervalStringFormat:masks.longTime},skipEmptyDays:false});this.defaults=defs;}
DateTimeAxis.prototype._initRange=function(){if(this.skipEmptyDays){this.emptyDays=this._getEmptyDays();this.totalEmptyDaysTicks=this.emptyDays.length*jDate.ticksInDay;}
else{this.totalEmptyDaysTicks=0;}
LinearAxis.prototype._initRange.call(this);this._initActualStringFormat();}
DateTimeAxis.prototype._setMinMax=function(min,max){if(this.minimum!=null){if(jFunc.type(this.minimum)=='date'){this.actualMinimum=this.minimum.getTime();}
else{this.actualMinimum=this.minimum;}}
else{this.actualMinimum=min;}
if(this.maximum!=null){if(jFunc.type(this.minimum)=='date'){this.actualMaximum=this.maximum.getTime();}
else{this.actualMaximum=this.maximum;}}
else{this.actualMaximum=max;}}
DateTimeAxis.prototype._calculateActualInterval=function(min,max){var actualInterval=this._calculateDateTimeInterval(min,max);if(this.intervalType!=null){this.actualIntervalType=this.intervalType;}
else{this.actualIntervalType=this.type;}
if(this.interval!=null){actualInterval=this.interval;}
return actualInterval;}
DateTimeAxis.prototype._calculateDateTimeInterval=function(min,max){var timeSpan=max-min;var maxIntervals=0.8*this.maxInter200Px;var actualWidth=Math.max(1,this.length);var rangeMultiplicator=actualWidth/(200*10/maxIntervals);var milliseconds=timeSpan/rangeMultiplicator;this.type='year';var inter=milliseconds/(1000*60);if(inter<=1.0){if(milliseconds<=10){this.type="milliseconds";return 1;}
if(milliseconds<=50){this.type="milliseconds";return 4;}
if(milliseconds<=200){this.type="milliseconds";return 20;}
if(milliseconds<=500){this.type="milliseconds";return 50;}
var seconds=milliseconds/1000;if(seconds<=7){this.type="seconds";return 1;}
if(seconds<=15){this.type="seconds";return 2;}
if(seconds<=30){this.type="seconds";return 5;}
if(seconds<=60){this.type="seconds";return 10;}}
else if(inter<=2.0){this.type="seconds";return 20;}
if(inter<=3.0){this.type="seconds";return 30;}
if(inter<=10){this.type="minutes";return 1;}
if(inter<=20){this.type="minutes";return 2;}
if(inter<=60){this.type="minutes";return 5;}
if(inter<=120){this.type="minutes";return 10;}
if(inter<=180){this.type="minutes";return 30;}
if(inter<=60*12){this.type="hours";return 1;}
if(inter<=60*24){this.type="hours";return 4;}
if(inter<=60*24*2){this.type="hours";return 6;}
if(inter<=60*24*3){this.type="hours";return 12;}
if(inter<=60*24*10){this.type="days";return 1;}
if(inter<=60*24*20){this.type="days";return 2;}
if(inter<=60*24*30){this.type="days";return 3;}
if(inter<=60*24*30.5*2){this.type="weeks";return 1;}
if(inter<=60*24*30.5*5){this.type="weeks";return 2;}
if(inter<=60*24*30.5*12){this.type="months";return 1;}
if(inter<=60*24*30.5*24){this.type="months";return 3;}
if(inter<=60*24*30.5*48){this.type="months";return 6;}
this.type="years";var years=inter/60/24/365;if(years<5){return 1;}
if(years<10){return 2;}
return Math.floor(years/5);}
DateTimeAxis.prototype._getNextPosition=function(current,interval){return this._incrementDateTime(current,interval,this.actualIntervalType);}
DateTimeAxis.prototype._incrementDateTime=function(current,interval,intervalType){var date=new Date(current);var span=0;if(intervalType=="days"){date=jDate.addDays(date,interval);}
else if(intervalType=="hours"){span=jDate.fromHours(interval);}
else if(intervalType=="milliseconds"){span=interval;}
else if(intervalType=="seconds"){span=jDate.fromSeconds(interval);}
else if(intervalType=="minutes"){span=jDate.fromMinutes(interval);}
else if(intervalType=="weeks"){date=jDate.addDays(date,7*interval);}
else if(intervalType=="months"){var lastMonthDay=false;if(date.getDate()==jDate.getDaysInMonth(date.getFullYear(),date.getMonth())){lastMonthDay=true;}
date=jDate.addMonths(date,Math.floor(interval));span=jDate.fromDays(30.0*(interval-Math.floor(interval)));if(lastMonthDay&&span==0){var daysInMonth=jDate.getDaysInMonth(date.getFullYear(),date.getMonth());date=jDate.addDays(date,daysInMonth-date.getDate());}}
else if(intervalType=="years"){date=jDate.addYears(date,Math.floor(interval));span=jDate.fromDays(365.0*(interval-Math.floor(interval)));}
return date.getTime()+span;}
DateTimeAxis.prototype._getIntervalStart=function(start,intervalSize,intervalType){if(intervalType==null){return start;}
var newStartDate=new Date(start);if(intervalSize>0.0&&intervalSize!=1.0){if(intervalType=="months"&&intervalSize<=12.0&&intervalSize>1){var resultDate=newStartDate;var sizeAdjustedDate=new Date(newStartDate.getFullYear(),0,1,0,0,0);while(sizeAdjustedDate<newStartDate){resultDate=sizeAdjustedDate;sizeAdjustedDate=jDate.addMonths(sizeAdjustedDate,intervalSize);}
newStartDate=resultDate;return newStartDate.getTime();}}
switch(intervalType){case "years":var year=(newStartDate.getFullYear()/intervalSize)*intervalSize;if(year<=0){year=1;}
newStartDate=new Date(year,0,1,0,0,0);break;case "months":var month=(newStartDate.getMonth()/intervalSize)*intervalSize;if(month<0){month=0;}
newStartDate=new Date(newStartDate.getFullYear(),month,1,0,0,0);break;case "days":var day=(newStartDate.getDate()/intervalSize)*intervalSize;if(day<=0){day=1;}
newStartDate=new Date(newStartDate.getFullYear(),newStartDate.getMonth(),day,0,0,0);break;case "hours":var hour=(newStartDate.getHours()/intervalSize)*intervalSize;newStartDate=new Date(newStartDate.getFullYear(),newStartDate.getMonth(),newStartDate.getDate(),hour,0,0);break;case "minutes":var minute=(newStartDate.getMinutes()/intervalSize)*intervalSize;newStartDate=new Date(newStartDate.getFullYear(),newStartDate.getMonth(),newStartDate.getDate(),newStartDate.getHours(),minute,0);break;case "seconds":var second=(newStartDate.getSeconds()/intervalSize)*intervalSize;newStartDate=new Date(newStartDate.getFullYear(),newStartDate.getMonth(),newStartDate.getDate(),newStartDate.getHours(),newStartDate.getMinutes(),second,0);break;case "milliseconds":var milliseconds=(newStartDate.getMilliseconds()/intervalSize)*intervalSize;newStartDate=new Date(newStartDate.getFullYear(),newStartDate.getMonth(),newStartDate.getDate(),newStartDate.getHours(),newStartDate.getMinutes(),newStartDate.getSeconds(),milliseconds);break;case "weeks":newStartDate=new Date(newStartDate.getFullYear(),newStartDate.getMonth(),newStartDate.getDate(),0,0,0);newStartDate=jDate.addDays(newStartDate,-jDate.getDayOfWeek(newStartDate));break;}
return newStartDate.getTime();}
DateTimeAxis.prototype._initActualStringFormat=function(){if(!this.labels||this.labels.visible===false){return;}
if(this.labels.stringFormat){this.actualStringFormat=this.labels.stringFormat;return;}
switch(this.actualIntervalType){case 'years':this.actualStringFormat=this.labels.yearsIntervalStringFormat;break;case 'months':this.actualStringFormat=this.labels.monthsIntervalStringFormat;break;case 'weeks':this.actualStringFormat=this.labels.weeksIntervalStringFormat;break;case 'days':this.actualStringFormat=this.labels.daysIntervalStringFormat;break;case 'hours':this.actualStringFormat=this.labels.hoursIntervalStringFormat;break;case 'minutes':this.actualStringFormat=this.labels.minutesIntervalStringFormat;break;case 'seconds':this.actualStringFormat=this.labels.secondsIntervalStringFormat;break;case 'milliseconds':this.actualStringFormat=this.labels.millisecondsIntervalStringFormat;break;default:this.actualStringFormat="default";break;}}
DateTimeAxis.prototype._getIntervals=function(interval,mark){if(this.customTickMarks){return this.customTickMarks;}
var intrs=[];var min=this.actualVisibleMinimum;var max=this.actualVisibleMaximum;var intrStart=this._getIntervalStart(min,interval,this.actualIntervalType);while(intrStart<min){intrStart=this._incrementDateTime(intrStart,interval,this.actualIntervalType);}
if(mark&&mark.intervalOffset){var intervalOffsetType=this.actualIntervalType;var offset=mark.intervalOffset;if(mark.intervalOffsetType){intervalOffsetType=mark.intervalOffsetType;}
intrStart=this._incrementDateTime(intrStart,offset,intervalOffsetType);}
for(var i=intrStart;i<=max;i=this._incrementDateTime(i,interval,this.actualIntervalType)){var nonEmptyDay=this._getNextNonEmptyDay(i);if(nonEmptyDay){if(this.skipEmptyDays&&i<nonEmptyDay){i=nonEmptyDay;}
intrs.push(nonEmptyDay);}}
return intrs;}
DateTimeAxis.prototype._getIntervalCount=function(){var diff=this._getActualMaximum()-this._getActualMinimum();diff=Math.ceil(diff/jDate.ticksInDay);return diff;}
DateTimeAxis.prototype._getNextNonEmptyDay=function(val){if(!this.emptyDays){return val;}
var index=jFunc.inArray(val,this.emptyDays);if(index==-1){return val;}
var start=jDate.addDays(new Date(val),1);var max=this.actualVisibleMaximum;for(var i=start;i<=max;i=jDate.addDays(i,1)){var iTime=i.getTime();index=jFunc.inArray(iTime,this.emptyDays);if(index==-1){return iTime;}}
return null;}
DateTimeAxis.prototype._getEmptyDaysOffset=function(date){if(!this.emptyDays){return 0;}
var days=0;for(var i=0;i<this.emptyDays.length;i++){var item=this.emptyDays[i];if(item<date){days++;}
else{break;}}
return days*jDate.ticksInDay;}
DateTimeAxis.prototype._addEmptyDaysOffset=function(date){if(jMath.isNull(date)){return null;}
var result=date+this._getEmptyDaysOffset(date);var diff=this._getEmptyDaysOffset(result)-this._getEmptyDaysOffset(date);date=result;result+=diff;while(diff){diff=this._getEmptyDaysOffset(result)-this._getEmptyDaysOffset(date);date=result;result+=diff;}
return result;}
DateTimeAxis.prototype._getEmptyDays=function(){var dates=[];for(var i=0;i<this.series.items.length;i++){var series=this.series.items[i];if(i==0){dates=this._getEmptyDaysFromSeries(series);}
else{this._excludeDaysFromSeries(series,dates);}}
return dates;}
DateTimeAxis.prototype._getEmptyDaysFromSeries=function(series){var dates=[];var data=[];jFunc.merge(data,series.arrData);data.sort(function(a,b){return a[0]-b[0];});var prev=jDate.roundToDay(data[0][0]);for(var j=1;j<data.length;j++){var item=jDate.roundToDay(data[j][0]);var diff=Math.round((item-prev)/jDate.ticksInDay);for(var k=1;k<diff;k++){dates.push(jDate.addDays(prev,k).getTime());}
prev=item;}
return dates;}
DateTimeAxis.prototype._excludeDaysFromSeries=function(series,dates){jFunc.each(series.arrData,function(i,item){var time=jDate.roundToDay(item[0]).getTime();var index=jFunc.inArray(time,dates);if(index!=-1){dates.splice(index,1);}});}
DateTimeAxis.prototype._getTooltip=function(value){var dateFormat=jFunc.getDateFormat();var masks=dateFormat.masks;var format='';if(value.getSeconds()!=0){format+=masks.shortDate+' '+masks.longTime;}
else if(value.getHours()!=0||value.getMinutes()!=0){format+=masks.shortDate+' '+masks.shortTime;}
else{format=masks.shortDate;}
value=this.chart.stringFormat(value,format);return '<div class="dvx-chart-tooltip-title">'+value+'</div>';}
DateTimeAxis.prototype._getActualVisibleMinimum=function(){var value=this.actualVisibleMinimum;return value-this._getEmptyDaysOffset(value);}
DateTimeAxis.prototype._getActualVisibleMaximum=function(){var value=this.actualVisibleMaximum;return value-this._getEmptyDaysOffset(value);}
DateTimeAxis.prototype._getActualMinimum=function(){var value=this.actualMinimum;return value-this._getEmptyDaysOffset(value);}
DateTimeAxis.prototype._getActualMaximum=function(){var value=this.actualMaximum;return value-this._getEmptyDaysOffset(value);}
DateTimeAxis.prototype.getPosition=function(val){if(jFunc.type(val)=='date'){val=val.getTime();}
var offset=0;if(this.skipEmptyDays){offset=this._getEmptyDaysOffset(val);}
var value=LinearAxis.prototype.getPosition.call(this,val-offset);return value;}
DateTimeAxis.prototype.getLabel=function(value){if(!this.labels||this.labels.visible===false||!this.actualStringFormat){return;}
var date=new Date(value);var dateFormatter=jFunc.getDateFormatter();return dateFormatter(date,this.actualStringFormat);}
function LinearRadiusAxis(options){LinearAxis.call(this,options);this.DataType="LinearRadiusAxis";}
LinearRadiusAxis.prototype=new LinearAxis();LinearRadiusAxis.constructor=LinearRadiusAxis;LinearRadiusAxis.prototype._initDefs=function(){LinearAxis.prototype._initDefs.call(this);var defs=jFunc.extend(true,{},this.defaults,{innerExtent:0.2,renderStyle:'circle',majorTickMarks:{visible:false},location:'radial',majorGridLines:{visible:true}});this.defaults=defs;}
LinearRadiusAxis.prototype.getOrientation=function(){return 'y';}
LinearRadiusAxis.prototype._measure=function(){this.width=0;this.height=0;return false;}
LinearRadiusAxis.prototype._arrange=function(){this._initRadialMeasures();}
LinearRadiusAxis.prototype._updateOrigin=function(){var margin=this.innerExtent*this.radius;this.origin=this.cx+margin;this.length=this.radius-margin;this.extent=margin;}
LinearRadiusAxis.prototype._getLabels=function(){var label=this.labels;if(label==null||label.visible===false){return[];}
var offset=this._getMaxOutsideTickMarksLength()+this.lblMargin;var shapes=[];var intr=this._getMarkInterval(label,true);var intrs=this._getLabelIntervals(intr,label);var len=intrs.length;var showFirst=label.showFirstLabel;var showLast=label.showLastLabel;for(var i=0;i<len;i++){if((!showFirst&&i==0)||(!showLast&&i==len-1)){continue;}
var val=intrs[i];var lblText=this.getLabel(val);var tBlock=this._createLabel(lblText,label);var pos=this.getPosition(val);var y=this.cy;var x=pos;var pt=jMath.rotatePointAt(x,y,-Math.PI/2,this.cx,this.cy);tBlock.x=pt.x-offset;tBlock.y=pt.y;tBlock.textAlign='right';shapes.push(tBlock);}
return shapes;}
LinearRadiusAxis.prototype._getTickMarks=function(mark,major){if(mark==null||mark.visible!=true){return[];}
var shapes=[];var intr=this._getMarkInterval(mark,major);var lng=mark.length;var intrs=this._getIntervals(intr,mark,major);var sharedAxis=this.sharedAxis;var sharedAxisIntrs=sharedAxis._getIntervals(sharedAxis.actualInterval);var x1,y1,x2,y2,svgClass=major?'dvx-chart-axis-major-tick-mark':'dvx-chart-axis-minor-tick-mark';for(var i=0;i<intrs.length;i++){var pos=this.getPosition(intrs[i]);x1=x2=pos;y2=this.cy;y1=y2-lng;for(var j=0;j<sharedAxisIntrs.length;j++){var vl=sharedAxisIntrs[j];var angle=this.sharedAxis._getAngle(vl);var pt1=jMath.rotatePointAt(x1,y1,angle,this.cx,this.cy);var pt2=jMath.rotatePointAt(x2,y2,angle,this.cx,this.cy);var line=new Line(pt1.x,pt1.y,pt2.x,pt2.y);line.addClass(svgClass);shapes.push(line);}}
return shapes;}
LinearRadiusAxis.prototype._getGridLines=function(mark,major){if(mark==null||mark.visible!=true){return[];}
var shapes=[];var intr=this._getMarkInterval(mark,major);var intrs=this._getIntervals(intr,mark,true);var svgClass=major?'dvx-chart-axis-major-grid-line':'dvx-chart-axis-minor-grid-line';for(var i=0;i<intrs.length;i++){var interval=intrs[i];var circle=this._getRenderShape(interval);circle.addClass(svgClass);shapes.push(circle);}
return shapes;}
LinearRadiusAxis.prototype._render=function(renderContext){var groupShape=new GroupShape();this._setAxesClasses(groupShape);var postGroupShape=new GroupShape();this._setAxesClasses(postGroupShape);renderContext.postShapes.push(postGroupShape);var minorGridLines=this._getGridLines(this.minorGridLines,false);if(minorGridLines.length){var minorGridLinesGroup=new GroupShape();minorGridLinesGroup.addClass('dvx-chart-axis-minor-grid-line');minorGridLinesGroup.addShapes(minorGridLines);groupShape.addShape(minorGridLinesGroup);}
var majorGridLines=this._getGridLines(this.majorGridLines,true);if(majorGridLines.length){var majorGridLinesGroup=new GroupShape();majorGridLinesGroup.addClass('dvx-chart-axis-major-grid-line');majorGridLinesGroup.addShapes(majorGridLines);groupShape.addShape(majorGridLinesGroup);}
var minor=this._getTickMarks(this.minorTickMarks,false);if(minor.length){var minorTickMarkGroup=new GroupShape();minorTickMarkGroup.addClass('dvx-chart-axis-minor-tick-mark');minorTickMarkGroup.addShapes(minor);postGroupShape.addShape(minorTickMarkGroup);}
var major=this._getTickMarks(this.majorTickMarks,true);if(major.length){var majorTickMarkGroup=new GroupShape();majorTickMarkGroup.addClass('dvx-chart-axis-major-tick-mark');majorTickMarkGroup.addShapes(major);postGroupShape.addShape(majorTickMarkGroup);}
var circle=this._getRenderShape(this.actualMinimum);circle.addClass('dvx-chart-axis-main-line');groupShape.addShape(circle);var labels=this._getLabels();if(labels.length){var labelsGroup=new GroupShape();labelsGroup.addClass('dvx-chart-axis-label-group');labelsGroup.addShapes(labels);postGroupShape.addShape(labelsGroup);}
jFunc.merge(renderContext.contextShapes,labels);return groupShape;}
LinearRadiusAxis.prototype._getRenderShape=function(interval){var pos=this.getPosition(interval);var r=pos-this.origin+this.extent;var circle=this._createRenderShape(this.cx-r,this.cy-r,r);return circle;}
LinearRadiusAxis.prototype._createRenderShape=function(x,y,r){var sharedAxis=this.sharedAxis;if(this.renderStyle!='polygon'){if(jMath.isNull(sharedAxis.startAngle)||jMath.isNull(sharedAxis.endAngle)||(sharedAxis.startAngle-sharedAxis.endAngle==360)){return new Circle(x,y,r);}
var rStartAngle=jMath.radians(sharedAxis.startAngle);var rEndAngle=jMath.radians(sharedAxis.endAngle);var sweepAngle=rEndAngle-rStartAngle;if(sweepAngle<2*Math.PI-0.000125){var startAngle=rStartAngle-Math.PI/2;var endAngle=rEndAngle-Math.PI/2;return new Arc(x,y,r,startAngle,endAngle);}}
var pts=[];var len=this.sharedAxis.actualMaximum;var unit=2*Math.PI/len;var x=this.cx;var y=this.cy-r;for(var i=0;i<len;i++){var pt=jMath.rotatePointAt(x,y,i*unit,this.cx,this.cy);pts.push(pt.x);pts.push(pt.y);}
return new Polygon(pts);}
function CategoryAngleAxis(options){Axis.call(this,options);this.DataType='CategoryAngleAxis';}
CategoryAngleAxis.prototype=new CategoryAxis();CategoryAngleAxis.constructor=CategoryAngleAxis;CategoryAngleAxis.prototype._initDefs=function(){Axis.prototype._initDefs.call(this);var defs=jFunc.extend(true,{},this.defaults,{renderLinesOverGraph:true,location:'radial'});this.defaults=defs;}
CategoryAngleAxis.prototype._measure=function(){this.width=0;this.height=0;return false;}
CategoryAngleAxis.prototype._arrange=function(){this._initRadialMeasures();}
CategoryAngleAxis.prototype._updateOrigin=function(){this.origin=this.cx;this.length=2*Math.PI*this.radius;}
CategoryAngleAxis.prototype._correctOrigin=function(){var correction=0;var left=this.x;var top=this.y;var right=this.x+this.width;var bottom=this.y+this.height;var labels=this._getLabels();for(var i=0;i<labels.length;i++){var label=labels[i];if(label.x<left){correction=Math.max(correction,left-label.x);}
var lblRight=label.x+label.width;if(lblRight>right){correction=Math.max(correction,lblRight-right);}
var lblTop=label.y-label.height/2
if(lblTop<top){correction=Math.max(correction,top-lblTop);}
var lblBottom=label.y+label.height/2;if(lblBottom>bottom){correction=Math.max(correction,lblBottom-bottom);}}
this.radius-=correction;this.length=2*Math.PI*this.radius;if(this.sharedAxis){this.sharedAxis.radius=this.radius;this.sharedAxis._updateOrigin();this.sharedAxis._initRange();}}
CategoryAngleAxis.prototype._getAngle=function(value){var len=this.actualMaximum;var unit=2*Math.PI/len;var angle=value*unit;if(this.reversed===true){angle=2*Math.PI-angle;}
return angle-Math.PI/2;}
CategoryAngleAxis.prototype._getLabels=function(){var label=this.labels;if(label==null||label.visible===false){return[];}
var len=this.actualMaximum;if(len==0){return;}
var cx=this.cx;var cy=this.cy;var x=cx;var y=cy-this.radius;var unit=2*Math.PI/len;var lblMar=8;var tBlocks=[];var label=this.labels;for(var i=0;i<len;i++){var angle=i*unit;var pt=jMath.rotatePointAt(x,y,angle,cx,cy);var lblText=this.getLabel(i);var tBlock=this._createLabel(lblText,label);tBlock.x=pt.x;tBlock.y=pt.y;if(angle==Math.PI){tBlock.x-=tBlock.width/2;tBlock.y+=lblMar;}
else if(angle==0){tBlock.x-=tBlock.width/2;tBlock.y-=lblMar;}
else if(angle>Math.PI){tBlock.x-=tBlock.width+lblMar;}
else{tBlock.x+=lblMar;}
tBlocks.push(tBlock);}
return tBlocks;}
CategoryAngleAxis.prototype._render=function(renderContext){var groupShape=new GroupShape();this._setAxesClasses(groupShape);var postGroupShape=new GroupShape();this._setAxesClasses(postGroupShape);renderContext.postShapes.push(postGroupShape);var len=this.actualMaximum;if(!len){return;}
var cx=this.cx;var cy=this.cy;var x1=cx;var y1=cy-this.sharedAxis.extent;var x2=cx;var y2=cy-this.radius;var over=this.renderLinesOverGraph;var gridLines=[];var unit=2*Math.PI/len;for(var i=0;i<len;i++){var angle=i*unit;var pt1=jMath.rotatePointAt(x1,y1,angle,cx,cy);var pt2=jMath.rotatePointAt(x2,y2,angle,cx,cy);var line=new Line(pt1.x,pt1.y,pt2.x,pt2.y);gridLines.push(line);}
if(gridLines.length){var majorGridLinesGroup=new GroupShape();majorGridLinesGroup.addClass('dvx-chart-axis-major-grid-line');majorGridLinesGroup.addShapes(gridLines);if(over){postGroupShape.addShape(majorGridLinesGroup);}
else{groupShape.addShape(majorGridLinesGroup);}}
var labels=this._getLabels();if(labels.length){var labelsGroup=new GroupShape();labelsGroup.addClass('dvx-chart-axis-label-group');labelsGroup.addShapes(labels);postGroupShape.addShape(labelsGroup);}
jFunc.merge(renderContext.contextShapes,labels);return groupShape;}
function LinearAngleAxis(options){Axis.call(this,options);this.DataType='LinearAngleAxis';this.location='radial';}
LinearAngleAxis.prototype=new LinearAxis();LinearAngleAxis.constructor=LinearAngleAxis;LinearAngleAxis.prototype._initDefs=function(){Axis.prototype._initDefs.call(this);var defs=jFunc.extend(true,{},this.defaults,{minimum:0,maximum:360,startAngle:0,endAngle:360,renderLinesOverGraph:true});this.defaults=defs;}
LinearAngleAxis.prototype._initRange=function(){this._setMinMax(this.minimum,this.maximum);this._setVisibleRanges();if(this.logarithmic===true){this.actualInterval=this._calculateActualIntervalLogarithmic(this.actualVisibleMinimum,this.actualVisibleMaximum);}
else{this.actualInterval=this._calculateActualInterval(this.actualVisibleMinimum,this.actualVisibleMaximum);}}
LinearAngleAxis.prototype._measure=function(){this.width=0;this.height=0;return false;}
LinearAngleAxis.prototype._arrange=function(){this._initRadialMeasures();}
LinearAngleAxis.prototype._updateOrigin=function(){this.origin=this.cx;this.length=2*Math.PI*this.radius;}
LinearAngleAxis.prototype._correctOrigin=function(){var correction=0;var left=this.x;var top=this.y;var right=this.x+this.width;var bottom=this.y+this.height;var labels=this._getLabels();for(var i=0;i<labels.length;i++){var label=labels[i];if(label.x<left){correction=Math.max(correction,left-label.x);}
var lblRight=label.x+label.width;if(lblRight>right){correction=Math.max(correction,lblRight-right);}
var lblTop=label.y-label.height/2
if(lblTop<top){correction=Math.max(correction,top-lblTop);}
var lblBottom=label.y+label.height/2;if(lblBottom>bottom){correction=Math.max(correction,lblBottom-bottom);}}
this.radius-=correction;this.length=2*Math.PI*this.radius;if(this.sharedAxis){this.sharedAxis.radius=this.radius;this.sharedAxis._updateOrigin();this.sharedAxis._initRange();}}
LinearAngleAxis.prototype._getAngle=function(value){var valueDiff=this.actualMaximum-this.actualMinimum;var angleDiff=this.endAngle-this.startAngle;var angleDiffRadians=jMath.radians(angleDiff);var startAngleRadians=jMath.radians(this.startAngle);var resultAngle;if(valueDiff===0){resultAngle=startAngleRadians+angleDiffRadians/2;}
else{resultAngle=startAngleRadians+angleDiffRadians*(value-this.actualMinimum)/valueDiff;}
if(this.reversed===true){resultAngle=2*Math.PI-resultAngle;}
return resultAngle-Math.PI/2;}
LinearAngleAxis.prototype._getLabels=function(){var label=this.labels;if(label==null||label.visible===false){return[];}
var cx=this.cx;var cy=this.cy;var x=cx+this.radius;var y=cy;var lblMar=8;var tBlocks=[];var intr=this._getMarkInterval(label,true);var intrs=this._getLabelIntervals(intr,label);var len=this._getIntervalsLength(intrs);for(var i=0;i<len;i++){var val=intrs[i];var lblText=this.getLabel(val);var angle=this._getAngle(val);var pt=jMath.rotatePointAt(x,y,angle,cx,cy);var tBlock=this._createLabel(lblText,label);tBlock.x=pt.x;tBlock.y=pt.y;angle+=Math.PI/2;angle=jMath.normalizeAngle(angle);if(angle==Math.PI){tBlock.x-=tBlock.width/2;tBlock.y+=lblMar;}
else if(angle==0){tBlock.x-=tBlock.width/2;tBlock.y-=lblMar;}
else if(angle>Math.PI){tBlock.x-=tBlock.width+lblMar;}
else{tBlock.x+=lblMar;}
tBlocks.push(tBlock);}
return tBlocks;}
LinearAngleAxis.prototype._getIntervalsLength=function(intrs){if((this.endAngle-this.startAngle)==360){return intrs.length-1;}
return intrs.length;}
LinearAngleAxis.prototype._render=function(renderContext){var groupShape=new GroupShape();this._setAxesClasses(groupShape);var postGroupShape=new GroupShape();this._setAxesClasses(postGroupShape);renderContext.postShapes.push(postGroupShape);var cx=this.cx;var cy=this.cy;var x1=cx;var y1=cy;if(this.sharedAxis){y1-=this.sharedAxis.extent;}
var x2=cx;var y2=cy-this.radius;var over=this.renderLinesOverGraph;var gridLines=[];var intrs=this._getIntervals(this.actualInterval);var len=this._getIntervalsLength(intrs);for(var i=0;i<len;i++){var val=intrs[i];var angle=this._getAngle(val)+Math.PI/2;var pt1=jMath.rotatePointAt(x1,y1,angle,cx,cy);var pt2=jMath.rotatePointAt(x2,y2,angle,cx,cy);var line=new Line(pt1.x,pt1.y,pt2.x,pt2.y);gridLines.push(line);}
if(gridLines.length){var majorGridLinesGroup=new GroupShape();majorGridLinesGroup.addClass('dvx-chart-axis-major-grid-line');majorGridLinesGroup.addShapes(gridLines);if(over){postGroupShape.addShape(majorGridLinesGroup);}
else{groupShape.addShape(majorGridLinesGroup);}}
var labels=this._getLabels();if(labels.length){var labelsGroup=new GroupShape();labelsGroup.addClass('dvx-chart-axis-label-group');labelsGroup.addShapes(labels);postGroupShape.addShape(labelsGroup);}
jFunc.merge(renderContext.contextShapes,labels);return groupShape;}
function ErrorBars(series,options){this.series=series;this.defaults={calculationType:'standardError',displayType:'both',value:10,lineWidth:2,capLength:10};this.setOptions(options);this.errorAmount=this._calculateErrorAmount();}
ErrorBars.prototype.setOptions=function(options){var settings=jFunc.extend({},this.defaults,options||{});jFunc.extend(this,settings);}
ErrorBars.prototype._getYValues=function(){var series=this.series;var data=series.arrData;var len=data.length;var xAxisType=series.xAxisType;var vl,vlY;var yValues=[];for(var i=0;i<data.length;i++){vl=data[i];if(vl===null){continue;}
if(xAxisType=='CategoryAxis'){if(jFunc.isArray(vl)==false){vlY=vl;}
else{vlY=vl[1];}}
else{vlY=vl[1];}
if(!jMath.isNull(vlY)){yValues.push(vlY);}}
return yValues;}
ErrorBars.prototype._calculateErrorAmount=function(){var series=this.series;if(!series.arrData){return 0;}
var yValues=this._getYValues(series);var len=yValues.length;switch(this.calculationType){case 'standardError':if(len<=1){return 0;}
var error=0;for(var i=0;i<len;i++){error+=Math.pow(yValues[i],2);}
error=Math.sqrt(error/(len*(len-1)))/2;return error;case 'standardDeviation':if(len<=1){return 0;}
var sum=jMath.sum(yValues);var average=sum/len;var deviation=0;for(var i=0;i<len;i++){deviation+=Math.pow(yValues[i]-average,2);}
deviation=Math.sqrt(deviation/(len-1));return deviation;case 'percentage':var lowerErrorAmount=0;var upperErrorAmount=0;var max=minVl;var min=maxVl;var vl,errorAmount,currMin,currMax;for(var i=0;i<len;i++){vl=yValues[i];errorAmount=Math.abs(vl)*this.value/100;currMin=vl-errorAmount;currMax=vl+errorAmount;if(max<currMax){max=currMax;upperErrorAmount=errorAmount;}
if(min>currMin){min=currMin;lowerErrorAmount=errorAmount;}}
return{lower:lowerErrorAmount,upper:upperErrorAmount};case 'fixedValue':return this.value;case 'customValues':var lowerErrorAmount=0;var upperErrorAmount=0;var maxUpper=minVl;var maxLower=minVl;var errorValue,currMinAmount,currMaxAmount;for(var i=0;i<len;i++){errorValue=this.customValues[i];if(jFunc.isArray(errorValue)){currMinAmount=errorValue[0];currMaxAmount=errorValue[1];}else{currMinAmount=errorValue;currMaxAmount=errorValue;}
if(maxUpper<currMaxAmount){maxUpper=currMaxAmount;upperErrorAmount=currMaxAmount;}
if(maxLower<currMinAmount){maxLower=currMinAmount;lowerErrorAmount=currMinAmount;}}
return{lower:lowerErrorAmount,upper:upperErrorAmount};}}
ErrorBars.prototype.getUpperError=function(){var displayType=this.displayType;if(displayType=='both'||displayType=='upper'){if(this.calculationType=='percentage'||this.calculationType=='customValues'){return this.errorAmount.upper;}
return this.errorAmount;}
return 0;}
ErrorBars.prototype.getLowerError=function(){var displayType=this.displayType;if(displayType=='both'||displayType=='lower'){if(this.calculationType=='percentage'||this.calculationType=='customValues'){return this.errorAmount.lower;}
return this.errorAmount;}
return 0;}
ErrorBars.prototype.getMaxLength=function(){var series=this.series;var isVertical=series.isVertical;var maxLength=0;if(series.realYAxis._getActualVisibleMinimum()===undefined){return 0;}
var error=this.getUpperError();var y1=series.realYAxis.getPosition(0);var y2=series.realYAxis.getPosition(error);if(isNaN(y1)||isNaN(y2)){return 0;}
return Math.abs(y1-y2)+this.lineWidth/2+2;}
ErrorBars.prototype._createShapes=function(shapes){var series=this.series;var isVertical=series.isVertical;var data=series.arrData;var len=data.length;var xAxisType=series.xAxisType;var vl,vlX,vlY,x,x1,x2,y,y1,y2,lower,upper;var line,lowerLine,upperLine;var displayType=this.displayType;var errorAmount=this.errorAmount;var capWidth=this.capLength/2;var errorValue,lowerAmount,upperAmount;for(var i=0;i<data.length;i++){vl=data[i];if(vl===null){continue;}
if(xAxisType=='CategoryAxis'){vlX=i+0.5;if(jFunc.isArray(vl)==false){vlY=vl;}
else{vlY=vl[1];}}
else{vlX=vl[0];vlY=vl[1];}
if(jMath.isNull(vlX)||jMath.isNull(vlY)){continue;}
if(this.calculationType=='customValues'){errorValue=this.customValues[i];if(jFunc.isArray(errorValue)){lowerAmount=errorValue[0];upperAmount=errorValue[1];}else{lowerAmount=errorValue;upperAmount=errorValue;}
lower=vlY-lowerAmount;upper=vlY+upperAmount;}
else{if(this.calculationType=='percentage'){errorAmount=Math.abs(vlY)*this.value/100;}
lower=vlY-errorAmount;upper=vlY+errorAmount;}
if(isVertical){y=series.realXAxis.getPosition(vlX);x=series.realYAxis.getPosition(vlY);x1=series.realYAxis.getPosition(lower);x2=series.realYAxis.getPosition(upper);switch(displayType){case 'lower':line=new Line(x,y,x1,y);break;case 'upper':line=new Line(x2,y,x,y);break;default:line=new Line(x1,y,x2,y);break;}
shapes.push(line);if(displayType==='both'||displayType==='lower'){lowerLine=new Line(x1,y-capWidth,x1,y+capWidth);shapes.push(lowerLine);}
if(displayType==='both'||displayType==='upper'){upperLine=new Line(x2,y-capWidth,x2,y+capWidth);shapes.push(upperLine);}}
else{x=series.realXAxis.getPosition(vlX);y=series.realYAxis.getPosition(vlY);y1=series.realYAxis.getPosition(lower);y2=series.realYAxis.getPosition(upper);switch(displayType){case 'lower':line=new Line(x,y,x,y1);break;case 'upper':line=new Line(x,y2,x,y);break;default:line=new Line(x,y1,x,y2);break;}
shapes.push(line);if(displayType==='both'||displayType==='lower'){lowerLine=new Line(x-capWidth,y1,x+capWidth,y1);shapes.push(lowerLine);}
if(displayType==='both'||displayType==='upper'){upperLine=new Line(x-capWidth,y2,x+capWidth,y2);shapes.push(upperLine);}}}}
function EmptyPointStyle(options){this.defaults={marker:{visible:true,type:'cross',size:10}};this.setOptions(options);}
EmptyPointStyle.prototype.setOptions=function(options){var settings=jFunc.extend(true,{},this.defaults,options||{});jFunc.extend(this,settings);}
dvxCharts.Chart=Chart;})();